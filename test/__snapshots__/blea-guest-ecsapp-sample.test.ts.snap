// Jest Snapshot v1, https://goo.gl/fbAQLP

exports[`BLEA Guest Stacks GuestAccount ECS App Stacks 1`] = `
Object {
  "Outputs": Object {
    "BLEAVpcsubnetID5AA5F2C4": Object {
      "Value": Object {
        "Ref": "BLEAVpcPrivateSubnet1Subnet10F7BE6A",
      },
    },
    "ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
      },
      "Value": Object {
        "Fn::GetAtt": Array [
          "BLEAAppKey3972867F",
          "Arn",
        ],
      },
    },
    "ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
      },
      "Value": Object {
        "Ref": "BLEAAlarmSNSTopic7CA8AFCF",
      },
    },
    "ExportsOutputRefBLEAAppKey3972867FF6F5067F": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAAppKey3972867FF6F5067F",
      },
      "Value": Object {
        "Ref": "BLEAAppKey3972867F",
      },
    },
    "ExportsOutputRefBLEAVpc6BF639B16F5B81D1": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
      },
      "Value": Object {
        "Ref": "BLEAVpc6BF639B1",
      },
    },
    "ExportsOutputRefBLEAVpcPrivateSubnet1Subnet10F7BE6AE43431C8": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet1Subnet10F7BE6AE43431C8",
      },
      "Value": Object {
        "Ref": "BLEAVpcPrivateSubnet1Subnet10F7BE6A",
      },
    },
    "ExportsOutputRefBLEAVpcPrivateSubnet2Subnet3F910288B1BC2DBC": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet2Subnet3F910288B1BC2DBC",
      },
      "Value": Object {
        "Ref": "BLEAVpcPrivateSubnet2Subnet3F910288",
      },
    },
    "ExportsOutputRefBLEAVpcPrivateSubnet3Subnet5A1AF5388272CEF2": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet3Subnet5A1AF5388272CEF2",
      },
      "Value": Object {
        "Ref": "BLEAVpcPrivateSubnet3Subnet5A1AF538",
      },
    },
    "ExportsOutputRefBLEAVpcProtectedSubnet1SubnetCCF23E7394FF610E": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet1SubnetCCF23E7394FF610E",
      },
      "Value": Object {
        "Ref": "BLEAVpcProtectedSubnet1SubnetCCF23E73",
      },
    },
    "ExportsOutputRefBLEAVpcProtectedSubnet2SubnetC330AB5133437650": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet2SubnetC330AB5133437650",
      },
      "Value": Object {
        "Ref": "BLEAVpcProtectedSubnet2SubnetC330AB51",
      },
    },
    "ExportsOutputRefBLEAVpcProtectedSubnet3Subnet27FB7E261FAB8480": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet3Subnet27FB7E261FAB8480",
      },
      "Value": Object {
        "Ref": "BLEAVpcProtectedSubnet3Subnet27FB7E26",
      },
    },
    "ExportsOutputRefBLEAVpcPublicSubnet1Subnet5DC06C9FE9689AC8": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPublicSubnet1Subnet5DC06C9FE9689AC8",
      },
      "Value": Object {
        "Ref": "BLEAVpcPublicSubnet1Subnet5DC06C9F",
      },
    },
    "ExportsOutputRefBLEAVpcPublicSubnet2Subnet197E9DA596910BEA": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPublicSubnet2Subnet197E9DA596910BEA",
      },
      "Value": Object {
        "Ref": "BLEAVpcPublicSubnet2Subnet197E9DA5",
      },
    },
    "ExportsOutputRefBLEAVpcPublicSubnet3Subnet190190BA16029F0B": Object {
      "Export": Object {
        "Name": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPublicSubnet3Subnet190190BA16029F0B",
      },
      "Value": Object {
        "Ref": "BLEAVpcPublicSubnet3Subnet190190BA",
      },
    },
  },
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "BLEAAlarmNotifyEmail192FB23D": Object {
      "Properties": Object {
        "Endpoint": "notify-monitoring@example.com",
        "Protocol": "email",
        "TopicArn": Object {
          "Ref": "BLEAAlarmSNSTopic7CA8AFCF",
        },
      },
      "Type": "AWS::SNS::Subscription",
    },
    "BLEAAlarmSNSTopic7CA8AFCF": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::SNS::Topic",
    },
    "BLEAAlarmSNSTopicPolicyDA4C48FD": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sns:Publish",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "cloudwatch.amazonaws.com",
              },
              "Resource": Object {
                "Ref": "BLEAAlarmSNSTopic7CA8AFCF",
              },
              "Sid": "0",
            },
            Object {
              "Action": "sns:Publish",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "events.amazonaws.com",
              },
              "Resource": Object {
                "Ref": "BLEAAlarmSNSTopic7CA8AFCF",
              },
              "Sid": "1",
            },
          ],
          "Version": "2012-10-17",
        },
        "Topics": Array [
          Object {
            "Ref": "BLEAAlarmSNSTopic7CA8AFCF",
          },
        ],
      },
      "Type": "AWS::SNS::TopicPolicy",
    },
    "BLEAAppKey3972867F": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Description": "Custom KMS key",
        "EnableKeyRotation": true,
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Encrypt*",
                "kms:Decrypt*",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Describe*",
              ],
              "Condition": Object {
                "ArnLike": Object {
                  "kms:EncryptionContext:aws:logs:arn": "arn:aws:logs:ap-northeast-1:410364260571:*",
                },
              },
              "Effect": "Allow",
              "Principal": Object {
                "Service": "logs.ap-northeast-1.amazonaws.com",
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAAppKeyAlias3EC7B80F": Object {
      "Properties": Object {
        "AliasName": "alias/BLEA-AppKey-for-app",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "BLEAAppKey3972867F",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
    },
    "BLEAChatbotChatbotChannel4E049D2A": Object {
      "Properties": Object {
        "ConfigurationName": "BLEA-Chatbot-T8XXXXXXX",
        "IamRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAChatbotChatbotRoleDF9ECF67",
            "Arn",
          ],
        },
        "SlackChannelId": "C01YYYYYYYY",
        "SlackWorkspaceId": "T8XXXXXXX",
        "SnsTopicArns": Array [
          Object {
            "Ref": "BLEAAlarmSNSTopic7CA8AFCF",
          },
        ],
      },
      "Type": "AWS::Chatbot::SlackChannelConfiguration",
    },
    "BLEAChatbotChatbotRoleDF9ECF67": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "chatbot.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/ReadOnlyAccess",
              ],
            ],
          },
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/CloudWatchReadOnlyAccess",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEACognitoCognitoUserPoolC748A699": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AccountRecoverySetting": Object {
          "RecoveryMechanisms": Array [
            Object {
              "Name": "verified_phone_number",
              "Priority": 1,
            },
            Object {
              "Name": "verified_email",
              "Priority": 2,
            },
          ],
        },
        "AdminCreateUserConfig": Object {
          "AllowAdminCreateUserOnly": true,
        },
        "EmailVerificationMessage": "The verification code to your new account is {####}",
        "EmailVerificationSubject": "Verify your new account",
        "SmsVerificationMessage": "The verification code to your new account is {####}",
        "UserPoolTags": Object {
          "Environment": "dev",
        },
        "VerificationMessageTemplate": Object {
          "DefaultEmailOption": "CONFIRM_WITH_CODE",
          "EmailMessage": "The verification code to your new account is {####}",
          "EmailSubject": "Verify your new account",
          "SmsMessage": "The verification code to your new account is {####}",
        },
      },
      "Type": "AWS::Cognito::UserPool",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEACognitoCognitoUserPoolUserPoolClient666F8F76": Object {
      "Properties": Object {
        "AllowedOAuthFlows": Array [
          "implicit",
          "code",
        ],
        "AllowedOAuthFlowsUserPoolClient": true,
        "AllowedOAuthScopes": Array [
          "email",
          "openid",
          "profile",
        ],
        "CallbackURLs": Array [
          "http://xxx/auth/callback",
        ],
        "GenerateSecret": false,
        "LogoutURLs": Array [
          "http://xxx/auth/logout",
        ],
        "SupportedIdentityProviders": Array [
          "COGNITO",
        ],
        "UserPoolId": Object {
          "Ref": "BLEACognitoCognitoUserPoolC748A699",
        },
      },
      "Type": "AWS::Cognito::UserPoolClient",
    },
    "BLEACognitoCognitoUserPoolUserPoolDomainAFABB93D": Object {
      "Properties": Object {
        "Domain": "blea",
        "UserPoolId": Object {
          "Ref": "BLEACognitoCognitoUserPoolC748A699",
        },
      },
      "Type": "AWS::Cognito::UserPoolDomain",
    },
    "BLEAVpc6BF639B1": Object {
      "Properties": Object {
        "CidrBlock": "10.100.0.0/16",
        "EnableDnsHostnames": true,
        "EnableDnsSupport": true,
        "InstanceTenancy": "default",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc",
          },
        ],
      },
      "Type": "AWS::EC2::VPC",
    },
    "BLEAVpcEc2EndpointForPrivateB7E25DC9": Object {
      "Properties": Object {
        "PrivateDnsEnabled": true,
        "SecurityGroupIds": Array [
          Object {
            "Fn::GetAtt": Array [
              "BLEAVpcEc2EndpointForPrivateSecurityGroupAEA14E71",
              "GroupId",
            ],
          },
        ],
        "ServiceName": "com.amazonaws.ap-northeast-1.ec2",
        "SubnetIds": Array [
          Object {
            "Ref": "BLEAVpcProtectedSubnet1SubnetCCF23E73",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet2SubnetC330AB51",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet3Subnet27FB7E26",
          },
        ],
        "VpcEndpointType": "Interface",
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::VPCEndpoint",
    },
    "BLEAVpcEc2EndpointForPrivateSecurityGroupAEA14E71": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ShareResources/BLEA-Vpc/Vpc/Ec2EndpointForPrivate/SecurityGroup",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": Array [
          Object {
            "CidrIp": Object {
              "Fn::GetAtt": Array [
                "BLEAVpc6BF639B1",
                "CidrBlock",
              ],
            },
            "Description": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "from ",
                  Object {
                    "Fn::GetAtt": Array [
                      "BLEAVpc6BF639B1",
                      "CidrBlock",
                    ],
                  },
                  ":443",
                ],
              ],
            },
            "FromPort": 443,
            "IpProtocol": "tcp",
            "ToPort": 443,
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAVpcEc2MessagesEndpointForPrivate1F962BF2": Object {
      "Properties": Object {
        "PrivateDnsEnabled": true,
        "SecurityGroupIds": Array [
          Object {
            "Fn::GetAtt": Array [
              "BLEAVpcEc2MessagesEndpointForPrivateSecurityGroupEC395904",
              "GroupId",
            ],
          },
        ],
        "ServiceName": "com.amazonaws.ap-northeast-1.ec2messages",
        "SubnetIds": Array [
          Object {
            "Ref": "BLEAVpcProtectedSubnet1SubnetCCF23E73",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet2SubnetC330AB51",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet3Subnet27FB7E26",
          },
        ],
        "VpcEndpointType": "Interface",
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::VPCEndpoint",
    },
    "BLEAVpcEc2MessagesEndpointForPrivateSecurityGroupEC395904": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ShareResources/BLEA-Vpc/Vpc/Ec2MessagesEndpointForPrivate/SecurityGroup",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": Array [
          Object {
            "CidrIp": Object {
              "Fn::GetAtt": Array [
                "BLEAVpc6BF639B1",
                "CidrBlock",
              ],
            },
            "Description": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "from ",
                  Object {
                    "Fn::GetAtt": Array [
                      "BLEAVpc6BF639B1",
                      "CidrBlock",
                    ],
                  },
                  ":443",
                ],
              ],
            },
            "FromPort": 443,
            "IpProtocol": "tcp",
            "ToPort": 443,
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAVpcEcrDkrEndpointForPrivate5D9DA733": Object {
      "Properties": Object {
        "PrivateDnsEnabled": true,
        "SecurityGroupIds": Array [
          Object {
            "Fn::GetAtt": Array [
              "BLEAVpcEcrDkrEndpointForPrivateSecurityGroup693C3936",
              "GroupId",
            ],
          },
        ],
        "ServiceName": "com.amazonaws.ap-northeast-1.ecr.dkr",
        "SubnetIds": Array [
          Object {
            "Ref": "BLEAVpcProtectedSubnet1SubnetCCF23E73",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet2SubnetC330AB51",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet3Subnet27FB7E26",
          },
        ],
        "VpcEndpointType": "Interface",
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::VPCEndpoint",
    },
    "BLEAVpcEcrDkrEndpointForPrivateSecurityGroup693C3936": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ShareResources/BLEA-Vpc/Vpc/EcrDkrEndpointForPrivate/SecurityGroup",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": Array [
          Object {
            "CidrIp": Object {
              "Fn::GetAtt": Array [
                "BLEAVpc6BF639B1",
                "CidrBlock",
              ],
            },
            "Description": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "from ",
                  Object {
                    "Fn::GetAtt": Array [
                      "BLEAVpc6BF639B1",
                      "CidrBlock",
                    ],
                  },
                  ":443",
                ],
              ],
            },
            "FromPort": 443,
            "IpProtocol": "tcp",
            "ToPort": 443,
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAVpcEcrEndpointForPrivate67616BD8": Object {
      "Properties": Object {
        "PrivateDnsEnabled": true,
        "SecurityGroupIds": Array [
          Object {
            "Fn::GetAtt": Array [
              "BLEAVpcEcrEndpointForPrivateSecurityGroup162BED30",
              "GroupId",
            ],
          },
        ],
        "ServiceName": "com.amazonaws.ap-northeast-1.ecr.api",
        "SubnetIds": Array [
          Object {
            "Ref": "BLEAVpcProtectedSubnet1SubnetCCF23E73",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet2SubnetC330AB51",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet3Subnet27FB7E26",
          },
        ],
        "VpcEndpointType": "Interface",
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::VPCEndpoint",
    },
    "BLEAVpcEcrEndpointForPrivateSecurityGroup162BED30": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ShareResources/BLEA-Vpc/Vpc/EcrEndpointForPrivate/SecurityGroup",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": Array [
          Object {
            "CidrIp": Object {
              "Fn::GetAtt": Array [
                "BLEAVpc6BF639B1",
                "CidrBlock",
              ],
            },
            "Description": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "from ",
                  Object {
                    "Fn::GetAtt": Array [
                      "BLEAVpc6BF639B1",
                      "CidrBlock",
                    ],
                  },
                  ":443",
                ],
              ],
            },
            "FromPort": 443,
            "IpProtocol": "tcp",
            "ToPort": 443,
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAVpcFlowLogBucketA65C61EE": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "AccessControl": "Private",
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "BLEAVpcKey9B255BA2",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAVpcFlowLogBucketPolicy73D492E6": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAVpcFlowLogBucketA65C61EE",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAVpcFlowLogBucketA65C61EE",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAVpcFlowLogBucketA65C61EE",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEAVpcFlowLogsFlowLog6AB6A3D6": Object {
      "DependsOn": Array [
        "BLEAVpcFlowLogBucketPolicy73D492E6",
      ],
      "Properties": Object {
        "LogDestination": Object {
          "Fn::GetAtt": Array [
            "BLEAVpcFlowLogBucketA65C61EE",
            "Arn",
          ],
        },
        "LogDestinationType": "s3",
        "ResourceId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
        "ResourceType": "VPC",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/FlowLogs",
          },
        ],
        "TrafficType": "ALL",
      },
      "Type": "AWS::EC2::FlowLog",
    },
    "BLEAVpcIGWDCBB225F": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc",
          },
        ],
      },
      "Type": "AWS::EC2::InternetGateway",
    },
    "BLEAVpcKey9B255BA2": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Description": "for VPC Flow log",
        "EnableKeyRotation": true,
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "kms:Encrypt*",
                "kms:Decrypt*",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Describe*",
              ],
              "Effect": "Allow",
              "Principal": Object {
                "Service": "delivery.logs.amazonaws.com",
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAVpcKeyAlias57C2C427": Object {
      "Properties": Object {
        "AliasName": "alias/BLEA-Vpc-for-flowlog",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "BLEAVpcKey9B255BA2",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
    },
    "BLEAVpcLogsEndpointForPrivate8122CDCB": Object {
      "Properties": Object {
        "PrivateDnsEnabled": true,
        "SecurityGroupIds": Array [
          Object {
            "Fn::GetAtt": Array [
              "BLEAVpcLogsEndpointForPrivateSecurityGroup2B4C6DC2",
              "GroupId",
            ],
          },
        ],
        "ServiceName": "com.amazonaws.ap-northeast-1.logs",
        "SubnetIds": Array [
          Object {
            "Ref": "BLEAVpcProtectedSubnet1SubnetCCF23E73",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet2SubnetC330AB51",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet3Subnet27FB7E26",
          },
        ],
        "VpcEndpointType": "Interface",
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::VPCEndpoint",
    },
    "BLEAVpcLogsEndpointForPrivateSecurityGroup2B4C6DC2": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ShareResources/BLEA-Vpc/Vpc/LogsEndpointForPrivate/SecurityGroup",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": Array [
          Object {
            "CidrIp": Object {
              "Fn::GetAtt": Array [
                "BLEAVpc6BF639B1",
                "CidrBlock",
              ],
            },
            "Description": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "from ",
                  Object {
                    "Fn::GetAtt": Array [
                      "BLEAVpc6BF639B1",
                      "CidrBlock",
                    ],
                  },
                  ":443",
                ],
              ],
            },
            "FromPort": 443,
            "IpProtocol": "tcp",
            "ToPort": 443,
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAVpcNaclPrivate6253E329": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/NaclPrivate",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::NetworkAcl",
    },
    "BLEAVpcNaclPrivateDefaultAssociationBLEAShareResourcesBLEAVpcPrivateSubnet12C761275FAE39227": Object {
      "Properties": Object {
        "NetworkAclId": Object {
          "Ref": "BLEAVpcNaclPrivate6253E329",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPrivateSubnet1Subnet10F7BE6A",
        },
      },
      "Type": "AWS::EC2::SubnetNetworkAclAssociation",
    },
    "BLEAVpcNaclPrivateDefaultAssociationBLEAShareResourcesBLEAVpcPrivateSubnet294459262E10A025D": Object {
      "Properties": Object {
        "NetworkAclId": Object {
          "Ref": "BLEAVpcNaclPrivate6253E329",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPrivateSubnet2Subnet3F910288",
        },
      },
      "Type": "AWS::EC2::SubnetNetworkAclAssociation",
    },
    "BLEAVpcNaclPrivateDefaultAssociationBLEAShareResourcesBLEAVpcPrivateSubnet3D27D3FBD9B52BA5A": Object {
      "Properties": Object {
        "NetworkAclId": Object {
          "Ref": "BLEAVpcNaclPrivate6253E329",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPrivateSubnet3Subnet5A1AF538",
        },
      },
      "Type": "AWS::EC2::SubnetNetworkAclAssociation",
    },
    "BLEAVpcNaclPrivateNaclEgressPrivateE04201E3": Object {
      "Properties": Object {
        "CidrBlock": "0.0.0.0/0",
        "Egress": true,
        "NetworkAclId": Object {
          "Ref": "BLEAVpcNaclPrivate6253E329",
        },
        "Protocol": -1,
        "RuleAction": "allow",
        "RuleNumber": 100,
      },
      "Type": "AWS::EC2::NetworkAclEntry",
    },
    "BLEAVpcNaclPrivateNaclIngressPrivate14060F5D": Object {
      "Properties": Object {
        "CidrBlock": "0.0.0.0/0",
        "Egress": false,
        "NetworkAclId": Object {
          "Ref": "BLEAVpcNaclPrivate6253E329",
        },
        "Protocol": -1,
        "RuleAction": "allow",
        "RuleNumber": 120,
      },
      "Type": "AWS::EC2::NetworkAclEntry",
    },
    "BLEAVpcNaclPublic14022791": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/NaclPublic",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::NetworkAcl",
    },
    "BLEAVpcNaclPublicDefaultAssociationBLEAShareResourcesBLEAVpcPublicSubnet13515B726B8C3E627": Object {
      "Properties": Object {
        "NetworkAclId": Object {
          "Ref": "BLEAVpcNaclPublic14022791",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPublicSubnet1Subnet5DC06C9F",
        },
      },
      "Type": "AWS::EC2::SubnetNetworkAclAssociation",
    },
    "BLEAVpcNaclPublicDefaultAssociationBLEAShareResourcesBLEAVpcPublicSubnet292F41792F335B0A5": Object {
      "Properties": Object {
        "NetworkAclId": Object {
          "Ref": "BLEAVpcNaclPublic14022791",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPublicSubnet2Subnet197E9DA5",
        },
      },
      "Type": "AWS::EC2::SubnetNetworkAclAssociation",
    },
    "BLEAVpcNaclPublicDefaultAssociationBLEAShareResourcesBLEAVpcPublicSubnet38E20E508C82D68EB": Object {
      "Properties": Object {
        "NetworkAclId": Object {
          "Ref": "BLEAVpcNaclPublic14022791",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPublicSubnet3Subnet190190BA",
        },
      },
      "Type": "AWS::EC2::SubnetNetworkAclAssociation",
    },
    "BLEAVpcNaclPublicNaclEgressPublicD13D9318": Object {
      "Properties": Object {
        "CidrBlock": "0.0.0.0/0",
        "Egress": true,
        "NetworkAclId": Object {
          "Ref": "BLEAVpcNaclPublic14022791",
        },
        "Protocol": -1,
        "RuleAction": "allow",
        "RuleNumber": 100,
      },
      "Type": "AWS::EC2::NetworkAclEntry",
    },
    "BLEAVpcNaclPublicNaclIngressPublic1DB935A6": Object {
      "Properties": Object {
        "CidrBlock": "0.0.0.0/0",
        "Egress": false,
        "NetworkAclId": Object {
          "Ref": "BLEAVpcNaclPublic14022791",
        },
        "Protocol": -1,
        "RuleAction": "allow",
        "RuleNumber": 100,
      },
      "Type": "AWS::EC2::NetworkAclEntry",
    },
    "BLEAVpcPrivateSubnet1DefaultRoute91191BA9": Object {
      "Properties": Object {
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": Object {
          "Ref": "BLEAVpcPublicSubnet1NATGatewayEA941A16",
        },
        "RouteTableId": Object {
          "Ref": "BLEAVpcPrivateSubnet1RouteTable5BC14469",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "BLEAVpcPrivateSubnet1RouteTable5BC14469": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PrivateSubnet1",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "BLEAVpcPrivateSubnet1RouteTableAssociation49B72143": Object {
      "Properties": Object {
        "RouteTableId": Object {
          "Ref": "BLEAVpcPrivateSubnet1RouteTable5BC14469",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPrivateSubnet1Subnet10F7BE6A",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "BLEAVpcPrivateSubnet1Subnet10F7BE6A": Object {
      "Properties": Object {
        "AvailabilityZone": "dummy1a",
        "CidrBlock": "10.100.4.0/22",
        "MapPublicIpOnLaunch": false,
        "Tags": Array [
          Object {
            "Key": "aws-cdk:subnet-name",
            "Value": "Private",
          },
          Object {
            "Key": "aws-cdk:subnet-type",
            "Value": "Private",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PrivateSubnet1",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "BLEAVpcPrivateSubnet2DefaultRoute7309B902": Object {
      "Properties": Object {
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": Object {
          "Ref": "BLEAVpcPublicSubnet2NATGatewayEA31BDF6",
        },
        "RouteTableId": Object {
          "Ref": "BLEAVpcPrivateSubnet2RouteTableE60C485B",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "BLEAVpcPrivateSubnet2RouteTableAssociation72104B35": Object {
      "Properties": Object {
        "RouteTableId": Object {
          "Ref": "BLEAVpcPrivateSubnet2RouteTableE60C485B",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPrivateSubnet2Subnet3F910288",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "BLEAVpcPrivateSubnet2RouteTableE60C485B": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PrivateSubnet2",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "BLEAVpcPrivateSubnet2Subnet3F910288": Object {
      "Properties": Object {
        "AvailabilityZone": "dummy1b",
        "CidrBlock": "10.100.8.0/22",
        "MapPublicIpOnLaunch": false,
        "Tags": Array [
          Object {
            "Key": "aws-cdk:subnet-name",
            "Value": "Private",
          },
          Object {
            "Key": "aws-cdk:subnet-type",
            "Value": "Private",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PrivateSubnet2",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "BLEAVpcPrivateSubnet3DefaultRouteC022D5CE": Object {
      "Properties": Object {
        "DestinationCidrBlock": "0.0.0.0/0",
        "NatGatewayId": Object {
          "Ref": "BLEAVpcPublicSubnet1NATGatewayEA941A16",
        },
        "RouteTableId": Object {
          "Ref": "BLEAVpcPrivateSubnet3RouteTableA982DDE1",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "BLEAVpcPrivateSubnet3RouteTableA982DDE1": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PrivateSubnet3",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "BLEAVpcPrivateSubnet3RouteTableAssociation887FEA43": Object {
      "Properties": Object {
        "RouteTableId": Object {
          "Ref": "BLEAVpcPrivateSubnet3RouteTableA982DDE1",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPrivateSubnet3Subnet5A1AF538",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "BLEAVpcPrivateSubnet3Subnet5A1AF538": Object {
      "Properties": Object {
        "AvailabilityZone": "dummy1c",
        "CidrBlock": "10.100.12.0/22",
        "MapPublicIpOnLaunch": false,
        "Tags": Array [
          Object {
            "Key": "aws-cdk:subnet-name",
            "Value": "Private",
          },
          Object {
            "Key": "aws-cdk:subnet-type",
            "Value": "Private",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PrivateSubnet3",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "BLEAVpcProtectedSubnet1RouteTable230FC4E5": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/ProtectedSubnet1",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "BLEAVpcProtectedSubnet1RouteTableAssociation6C00B56A": Object {
      "Properties": Object {
        "RouteTableId": Object {
          "Ref": "BLEAVpcProtectedSubnet1RouteTable230FC4E5",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcProtectedSubnet1SubnetCCF23E73",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "BLEAVpcProtectedSubnet1SubnetCCF23E73": Object {
      "Properties": Object {
        "AvailabilityZone": "dummy1a",
        "CidrBlock": "10.100.16.0/22",
        "MapPublicIpOnLaunch": false,
        "Tags": Array [
          Object {
            "Key": "aws-cdk:subnet-name",
            "Value": "Protected",
          },
          Object {
            "Key": "aws-cdk:subnet-type",
            "Value": "Isolated",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/ProtectedSubnet1",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "BLEAVpcProtectedSubnet2RouteTable78FF7CBC": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/ProtectedSubnet2",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "BLEAVpcProtectedSubnet2RouteTableAssociationBECFCA87": Object {
      "Properties": Object {
        "RouteTableId": Object {
          "Ref": "BLEAVpcProtectedSubnet2RouteTable78FF7CBC",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcProtectedSubnet2SubnetC330AB51",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "BLEAVpcProtectedSubnet2SubnetC330AB51": Object {
      "Properties": Object {
        "AvailabilityZone": "dummy1b",
        "CidrBlock": "10.100.20.0/22",
        "MapPublicIpOnLaunch": false,
        "Tags": Array [
          Object {
            "Key": "aws-cdk:subnet-name",
            "Value": "Protected",
          },
          Object {
            "Key": "aws-cdk:subnet-type",
            "Value": "Isolated",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/ProtectedSubnet2",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "BLEAVpcProtectedSubnet3RouteTable4C441E8B": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/ProtectedSubnet3",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "BLEAVpcProtectedSubnet3RouteTableAssociation99D1345D": Object {
      "Properties": Object {
        "RouteTableId": Object {
          "Ref": "BLEAVpcProtectedSubnet3RouteTable4C441E8B",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcProtectedSubnet3Subnet27FB7E26",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "BLEAVpcProtectedSubnet3Subnet27FB7E26": Object {
      "Properties": Object {
        "AvailabilityZone": "dummy1c",
        "CidrBlock": "10.100.24.0/22",
        "MapPublicIpOnLaunch": false,
        "Tags": Array [
          Object {
            "Key": "aws-cdk:subnet-name",
            "Value": "Protected",
          },
          Object {
            "Key": "aws-cdk:subnet-type",
            "Value": "Isolated",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/ProtectedSubnet3",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "BLEAVpcPublicSubnet1DefaultRoute61924BB5": Object {
      "DependsOn": Array [
        "BLEAVpcVPCGWAC8CE226",
      ],
      "Properties": Object {
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": Object {
          "Ref": "BLEAVpcIGWDCBB225F",
        },
        "RouteTableId": Object {
          "Ref": "BLEAVpcPublicSubnet1RouteTableDED15B33",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "BLEAVpcPublicSubnet1EIP075A241F": Object {
      "Properties": Object {
        "Domain": "vpc",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PublicSubnet1",
          },
        ],
      },
      "Type": "AWS::EC2::EIP",
    },
    "BLEAVpcPublicSubnet1NATGatewayEA941A16": Object {
      "DependsOn": Array [
        "BLEAVpcPublicSubnet1DefaultRoute61924BB5",
        "BLEAVpcPublicSubnet1RouteTableAssociation93E32EFC",
      ],
      "Properties": Object {
        "AllocationId": Object {
          "Fn::GetAtt": Array [
            "BLEAVpcPublicSubnet1EIP075A241F",
            "AllocationId",
          ],
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPublicSubnet1Subnet5DC06C9F",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PublicSubnet1",
          },
        ],
      },
      "Type": "AWS::EC2::NatGateway",
    },
    "BLEAVpcPublicSubnet1RouteTableAssociation93E32EFC": Object {
      "Properties": Object {
        "RouteTableId": Object {
          "Ref": "BLEAVpcPublicSubnet1RouteTableDED15B33",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPublicSubnet1Subnet5DC06C9F",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "BLEAVpcPublicSubnet1RouteTableDED15B33": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PublicSubnet1",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "BLEAVpcPublicSubnet1Subnet5DC06C9F": Object {
      "Properties": Object {
        "AvailabilityZone": "dummy1a",
        "CidrBlock": "10.100.0.0/24",
        "MapPublicIpOnLaunch": true,
        "Tags": Array [
          Object {
            "Key": "aws-cdk:subnet-name",
            "Value": "Public",
          },
          Object {
            "Key": "aws-cdk:subnet-type",
            "Value": "Public",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PublicSubnet1",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "BLEAVpcPublicSubnet2DefaultRouteFF5C52AA": Object {
      "DependsOn": Array [
        "BLEAVpcVPCGWAC8CE226",
      ],
      "Properties": Object {
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": Object {
          "Ref": "BLEAVpcIGWDCBB225F",
        },
        "RouteTableId": Object {
          "Ref": "BLEAVpcPublicSubnet2RouteTable55122ACE",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "BLEAVpcPublicSubnet2EIPA38277ED": Object {
      "Properties": Object {
        "Domain": "vpc",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PublicSubnet2",
          },
        ],
      },
      "Type": "AWS::EC2::EIP",
    },
    "BLEAVpcPublicSubnet2NATGatewayEA31BDF6": Object {
      "DependsOn": Array [
        "BLEAVpcPublicSubnet2DefaultRouteFF5C52AA",
        "BLEAVpcPublicSubnet2RouteTableAssociationBE5C9E18",
      ],
      "Properties": Object {
        "AllocationId": Object {
          "Fn::GetAtt": Array [
            "BLEAVpcPublicSubnet2EIPA38277ED",
            "AllocationId",
          ],
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPublicSubnet2Subnet197E9DA5",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PublicSubnet2",
          },
        ],
      },
      "Type": "AWS::EC2::NatGateway",
    },
    "BLEAVpcPublicSubnet2RouteTable55122ACE": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PublicSubnet2",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "BLEAVpcPublicSubnet2RouteTableAssociationBE5C9E18": Object {
      "Properties": Object {
        "RouteTableId": Object {
          "Ref": "BLEAVpcPublicSubnet2RouteTable55122ACE",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPublicSubnet2Subnet197E9DA5",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "BLEAVpcPublicSubnet2Subnet197E9DA5": Object {
      "Properties": Object {
        "AvailabilityZone": "dummy1b",
        "CidrBlock": "10.100.1.0/24",
        "MapPublicIpOnLaunch": true,
        "Tags": Array [
          Object {
            "Key": "aws-cdk:subnet-name",
            "Value": "Public",
          },
          Object {
            "Key": "aws-cdk:subnet-type",
            "Value": "Public",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PublicSubnet2",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "BLEAVpcPublicSubnet3DefaultRouteAF160CAD": Object {
      "DependsOn": Array [
        "BLEAVpcVPCGWAC8CE226",
      ],
      "Properties": Object {
        "DestinationCidrBlock": "0.0.0.0/0",
        "GatewayId": Object {
          "Ref": "BLEAVpcIGWDCBB225F",
        },
        "RouteTableId": Object {
          "Ref": "BLEAVpcPublicSubnet3RouteTableEF03B798",
        },
      },
      "Type": "AWS::EC2::Route",
    },
    "BLEAVpcPublicSubnet3RouteTableAssociation2F196BB7": Object {
      "Properties": Object {
        "RouteTableId": Object {
          "Ref": "BLEAVpcPublicSubnet3RouteTableEF03B798",
        },
        "SubnetId": Object {
          "Ref": "BLEAVpcPublicSubnet3Subnet190190BA",
        },
      },
      "Type": "AWS::EC2::SubnetRouteTableAssociation",
    },
    "BLEAVpcPublicSubnet3RouteTableEF03B798": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PublicSubnet3",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::RouteTable",
    },
    "BLEAVpcPublicSubnet3Subnet190190BA": Object {
      "Properties": Object {
        "AvailabilityZone": "dummy1c",
        "CidrBlock": "10.100.2.0/24",
        "MapPublicIpOnLaunch": true,
        "Tags": Array [
          Object {
            "Key": "aws-cdk:subnet-name",
            "Value": "Public",
          },
          Object {
            "Key": "aws-cdk:subnet-type",
            "Value": "Public",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc/PublicSubnet3",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::Subnet",
    },
    "BLEAVpcS3EndpointForPrivateAC3EF126": Object {
      "Properties": Object {
        "RouteTableIds": Array [
          Object {
            "Ref": "BLEAVpcPrivateSubnet1RouteTable5BC14469",
          },
          Object {
            "Ref": "BLEAVpcPrivateSubnet2RouteTableE60C485B",
          },
          Object {
            "Ref": "BLEAVpcPrivateSubnet3RouteTableA982DDE1",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet1RouteTable230FC4E5",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet2RouteTable78FF7CBC",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet3RouteTable4C441E8B",
          },
        ],
        "ServiceName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "com.amazonaws.",
              Object {
                "Ref": "AWS::Region",
              },
              ".s3",
            ],
          ],
        },
        "VpcEndpointType": "Gateway",
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::VPCEndpoint",
    },
    "BLEAVpcSsmEndpointForPrivateD9D180F6": Object {
      "Properties": Object {
        "PrivateDnsEnabled": true,
        "SecurityGroupIds": Array [
          Object {
            "Fn::GetAtt": Array [
              "BLEAVpcSsmEndpointForPrivateSecurityGroup6F37A112",
              "GroupId",
            ],
          },
        ],
        "ServiceName": "com.amazonaws.ap-northeast-1.ssm",
        "SubnetIds": Array [
          Object {
            "Ref": "BLEAVpcProtectedSubnet1SubnetCCF23E73",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet2SubnetC330AB51",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet3Subnet27FB7E26",
          },
        ],
        "VpcEndpointType": "Interface",
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::VPCEndpoint",
    },
    "BLEAVpcSsmEndpointForPrivateSecurityGroup6F37A112": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ShareResources/BLEA-Vpc/Vpc/SsmEndpointForPrivate/SecurityGroup",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": Array [
          Object {
            "CidrIp": Object {
              "Fn::GetAtt": Array [
                "BLEAVpc6BF639B1",
                "CidrBlock",
              ],
            },
            "Description": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "from ",
                  Object {
                    "Fn::GetAtt": Array [
                      "BLEAVpc6BF639B1",
                      "CidrBlock",
                    ],
                  },
                  ":443",
                ],
              ],
            },
            "FromPort": 443,
            "IpProtocol": "tcp",
            "ToPort": 443,
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAVpcSsmMessagesEndpointForPrivate2226BC19": Object {
      "Properties": Object {
        "PrivateDnsEnabled": true,
        "SecurityGroupIds": Array [
          Object {
            "Fn::GetAtt": Array [
              "BLEAVpcSsmMessagesEndpointForPrivateSecurityGroupA9D7271C",
              "GroupId",
            ],
          },
        ],
        "ServiceName": "com.amazonaws.ap-northeast-1.ssmmessages",
        "SubnetIds": Array [
          Object {
            "Ref": "BLEAVpcProtectedSubnet1SubnetCCF23E73",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet2SubnetC330AB51",
          },
          Object {
            "Ref": "BLEAVpcProtectedSubnet3Subnet27FB7E26",
          },
        ],
        "VpcEndpointType": "Interface",
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::VPCEndpoint",
    },
    "BLEAVpcSsmMessagesEndpointForPrivateSecurityGroupA9D7271C": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ShareResources/BLEA-Vpc/Vpc/SsmMessagesEndpointForPrivate/SecurityGroup",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": Array [
          Object {
            "CidrIp": Object {
              "Fn::GetAtt": Array [
                "BLEAVpc6BF639B1",
                "CidrBlock",
              ],
            },
            "Description": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "from ",
                  Object {
                    "Fn::GetAtt": Array [
                      "BLEAVpc6BF639B1",
                      "CidrBlock",
                    ],
                  },
                  ":443",
                ],
              ],
            },
            "FromPort": 443,
            "IpProtocol": "tcp",
            "ToPort": 443,
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
          Object {
            "Key": "Name",
            "Value": "BLEA-ShareResources/BLEA-Vpc/Vpc",
          },
        ],
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAVpcVPCGWAC8CE226": Object {
      "Properties": Object {
        "InternetGatewayId": Object {
          "Ref": "BLEAVpcIGWDCBB225F",
        },
        "VpcId": Object {
          "Ref": "BLEAVpc6BF639B1",
        },
      },
      "Type": "AWS::EC2::VPCGatewayAttachment",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`BLEA Guest Stacks GuestAccount ECS App Stacks 2`] = `
Object {
  "Outputs": Object {
    "SourceBucketName": Object {
      "Value": Object {
        "Ref": "SourceBucketDDD2130A",
      },
    },
  },
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "BucketNotificationsHandler050a0587b7544547bf325f094a3db8347ECC3691": Object {
      "DependsOn": Array [
        "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36",
        "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC",
      ],
      "Properties": Object {
        "Code": Object {
          "ZipFile": "import boto3  # type: ignore
import json
import logging
import urllib.request

s3 = boto3.client(\\"s3\\")

EVENTBRIDGE_CONFIGURATION = 'EventBridgeConfiguration'

CONFIGURATION_TYPES = [\\"TopicConfigurations\\", \\"QueueConfigurations\\", \\"LambdaFunctionConfigurations\\"]

def handler(event: dict, context):
  response_status = \\"SUCCESS\\"
  error_message = \\"\\"
  try:
    props = event[\\"ResourceProperties\\"]
    bucket = props[\\"BucketName\\"]
    notification_configuration = props[\\"NotificationConfiguration\\"]
    request_type = event[\\"RequestType\\"]
    managed = props.get('Managed', 'true').lower() == 'true'
    stack_id = event['StackId']

    if managed:
      config = handle_managed(request_type, notification_configuration)
    else:
      config = handle_unmanaged(bucket, stack_id, request_type, notification_configuration)

    put_bucket_notification_configuration(bucket, config)
  except Exception as e:
    logging.exception(\\"Failed to put bucket notification configuration\\")
    response_status = \\"FAILED\\"
    error_message = f\\"Error: {str(e)}. \\"
  finally:
    submit_response(event, context, response_status, error_message)

def handle_managed(request_type, notification_configuration):
  if request_type == 'Delete':
    return {}
  return notification_configuration

def handle_unmanaged(bucket, stack_id, request_type, notification_configuration):
  external_notifications = find_external_notifications(bucket, stack_id)

  if request_type == 'Delete':
    return external_notifications

  def with_id(notification):
    notification['Id'] = f\\"{stack_id}-{hash(json.dumps(notification, sort_keys=True))}\\"
    return notification

  notifications = {}
  for t in CONFIGURATION_TYPES:
    external = external_notifications.get(t, [])
    incoming = [with_id(n) for n in notification_configuration.get(t, [])]
    notifications[t] = external + incoming

  if EVENTBRIDGE_CONFIGURATION in notification_configuration:
    notifications[EVENTBRIDGE_CONFIGURATION] = notification_configuration[EVENTBRIDGE_CONFIGURATION]
  elif EVENTBRIDGE_CONFIGURATION in external_notifications:
    notifications[EVENTBRIDGE_CONFIGURATION] = external_notifications[EVENTBRIDGE_CONFIGURATION]

  return notifications

def find_external_notifications(bucket, stack_id):
  existing_notifications = get_bucket_notification_configuration(bucket)
  external_notifications = {}
  for t in CONFIGURATION_TYPES:
    external_notifications[t] = [n for n in existing_notifications.get(t, []) if not n['Id'].startswith(f\\"{stack_id}-\\")]

  if EVENTBRIDGE_CONFIGURATION in existing_notifications:
    external_notifications[EVENTBRIDGE_CONFIGURATION] = existing_notifications[EVENTBRIDGE_CONFIGURATION]

  return external_notifications

def get_bucket_notification_configuration(bucket):
  return s3.get_bucket_notification_configuration(Bucket=bucket)

def put_bucket_notification_configuration(bucket, notification_configuration):
  s3.put_bucket_notification_configuration(Bucket=bucket, NotificationConfiguration=notification_configuration)

def submit_response(event: dict, context, response_status: str, error_message: str):
  response_body = json.dumps(
    {
      \\"Status\\": response_status,
      \\"Reason\\": f\\"{error_message}See the details in CloudWatch Log Stream: {context.log_stream_name}\\",
      \\"PhysicalResourceId\\": event.get(\\"PhysicalResourceId\\") or event[\\"LogicalResourceId\\"],
      \\"StackId\\": event[\\"StackId\\"],
      \\"RequestId\\": event[\\"RequestId\\"],
      \\"LogicalResourceId\\": event[\\"LogicalResourceId\\"],
      \\"NoEcho\\": False,
    }
  ).encode(\\"utf-8\\")
  headers = {\\"content-type\\": \\"\\", \\"content-length\\": str(len(response_body))}
  try:
    req = urllib.request.Request(url=event[\\"ResponseURL\\"], headers=headers, data=response_body, method=\\"PUT\\")
    with urllib.request.urlopen(req) as response:
      print(response.read().decode(\\"utf-8\\"))
    print(\\"Status code: \\" + response.reason)
  except Exception as e:
      print(\\"send(..) failed executing request.urlopen(..): \\" + str(e))
",
        },
        "Description": "AWS CloudFormation handler for \\"Custom::S3BucketNotifications\\" resources (@aws-cdk/aws-s3)",
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC",
            "Arn",
          ],
        },
        "Runtime": "python3.9",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "Timeout": 300,
      },
      "Type": "AWS::Lambda::Function",
    },
    "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:PutBucketNotification",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleDefaultPolicy2CF63D36",
        "Roles": Array [
          Object {
            "Ref": "BucketNotificationsHandler050a0587b7544547bf325f094a3db834RoleB6FB88EC",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "PipelineTriggerEventRule0AE0646E": Object {
      "Properties": Object {
        "EventPattern": Object {
          "account": Array [
            Object {
              "Ref": "AWS::AccountId",
            },
          ],
          "detail": Object {
            "bucket": Object {
              "name": Array [
                Object {
                  "Ref": "SourceBucketDDD2130A",
                },
              ],
            },
            "object": Object {
              "key": Array [
                "image.zip",
              ],
            },
          },
          "detail-type": Array [
            "Object Created",
          ],
          "source": Array [
            "aws.s3",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::Join": Array [
                "",
                Array [
                  "arn:",
                  Object {
                    "Ref": "AWS::Partition",
                  },
                  ":codepipeline:",
                  Object {
                    "Ref": "AWS::Region",
                  },
                  ":",
                  Object {
                    "Ref": "AWS::AccountId",
                  },
                  ":",
                  Object {
                    "Ref": "ProjectC78D97AD",
                  },
                ],
              ],
            },
            "Id": "Target0",
            "RoleArn": Object {
              "Fn::GetAtt": Array [
                "ProjectEventsRole256975EC",
                "Arn",
              ],
            },
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "ProjectArtifactsBucketA004C8A7": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "ProjectArtifactsBucketEncryptionKey9C4C3F23",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "ProjectArtifactsBucketEncryptionKey9C4C3F23": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "ProjectArtifactsBucketEncryptionKeyAlias9B199404": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AliasName": "alias/codepipeline-bleapipelineprojectb1491efd",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "ProjectArtifactsBucketEncryptionKey9C4C3F23",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
      "UpdateReplacePolicy": "Delete",
    },
    "ProjectArtifactsBucketPolicyB28439E8": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "ProjectArtifactsBucketA004C8A7",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "ProjectArtifactsBucketA004C8A7",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "ProjectArtifactsBucketA004C8A7",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "ProjectBuildCodeBuildCodePipelineActionRole39C24142": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "ProjectBuildCodeBuildCodePipelineActionRoleDefaultPolicyE7B213A3": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "buildProjectB3CE3E56",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "ProjectBuildCodeBuildCodePipelineActionRoleDefaultPolicyE7B213A3",
        "Roles": Array [
          Object {
            "Ref": "ProjectBuildCodeBuildCodePipelineActionRole39C24142",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "ProjectC78D97AD": Object {
      "DependsOn": Array [
        "ProjectRoleDefaultPolicy7F29461B",
        "ProjectRole4CCB274E",
      ],
      "Properties": Object {
        "ArtifactStore": Object {
          "EncryptionKey": Object {
            "Id": Object {
              "Fn::GetAtt": Array [
                "ProjectArtifactsBucketEncryptionKey9C4C3F23",
                "Arn",
              ],
            },
            "Type": "KMS",
          },
          "Location": Object {
            "Ref": "ProjectArtifactsBucketA004C8A7",
          },
          "Type": "S3",
        },
        "RoleArn": Object {
          "Fn::GetAtt": Array [
            "ProjectRole4CCB274E",
            "Arn",
          ],
        },
        "Stages": Array [
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "S3",
                  "Version": "1",
                },
                "Configuration": Object {
                  "PollForSourceChanges": false,
                  "S3Bucket": Object {
                    "Ref": "SourceBucketDDD2130A",
                  },
                  "S3ObjectKey": "image.zip",
                },
                "Name": "SourceBucket",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "SourceArtifact",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "ProjectSourceSourceBucketCodePipelineActionRole30AADFBE",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Source",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "buildProjectB3CE3E56",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "SourceArtifact",
                  },
                ],
                "Name": "CodeBuild",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Build_CodeBuild",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "ProjectBuildCodeBuildCodePipelineActionRole39C24142",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Build",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodePipeline::Pipeline",
    },
    "ProjectEventsRole256975EC": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "events.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "ProjectEventsRoleDefaultPolicy00ED7125": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "codepipeline:StartPipelineExecution",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codepipeline:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":",
                    Object {
                      "Ref": "ProjectC78D97AD",
                    },
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "ProjectEventsRoleDefaultPolicy00ED7125",
        "Roles": Array [
          Object {
            "Ref": "ProjectEventsRole256975EC",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "ProjectRole4CCB274E": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codepipeline.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "ProjectRoleDefaultPolicy7F29461B": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "ProjectArtifactsBucketA004C8A7",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "ProjectArtifactsBucketA004C8A7",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "ProjectArtifactsBucketEncryptionKey9C4C3F23",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "ProjectSourceSourceBucketCodePipelineActionRole30AADFBE",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "ProjectBuildCodeBuildCodePipelineActionRole39C24142",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "ProjectRoleDefaultPolicy7F29461B",
        "Roles": Array [
          Object {
            "Ref": "ProjectRole4CCB274E",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "ProjectSourceSourceBucketCodePipelineActionRole30AADFBE": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "ProjectSourceSourceBucketCodePipelineActionRoleDefaultPolicyBD09B9B2": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "SourceBucketDDD2130A",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "SourceBucketDDD2130A",
                          "Arn",
                        ],
                      },
                      "/image.zip",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "ProjectArtifactsBucketA004C8A7",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "ProjectArtifactsBucketA004C8A7",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Decrypt",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "ProjectArtifactsBucketEncryptionKey9C4C3F23",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "ProjectSourceSourceBucketCodePipelineActionRoleDefaultPolicyBD09B9B2",
        "Roles": Array [
          Object {
            "Ref": "ProjectSourceSourceBucketCodePipelineActionRole30AADFBE",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "SlackChannel425D424B": Object {
      "Properties": Object {
        "ConfigurationName": "YOUR_CHANNEL_NAME",
        "IamRoleArn": Object {
          "Fn::GetAtt": Array [
            "SlackChannelConfigurationRole7EE950F2",
            "Arn",
          ],
        },
        "SlackChannelId": "YOUR_SLACK_CHANNEL_ID",
        "SlackWorkspaceId": "YOUR_SLACK_WORKSPACE_ID",
      },
      "Type": "AWS::Chatbot::SlackChannelConfiguration",
    },
    "SlackChannelConfigurationRole7EE950F2": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "chatbot.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "SourceBucketDDD2130A": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "SourceBucketNotifications0A6F2084": Object {
      "Properties": Object {
        "BucketName": Object {
          "Ref": "SourceBucketDDD2130A",
        },
        "Managed": true,
        "NotificationConfiguration": Object {
          "EventBridgeConfiguration": Object {},
        },
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "BucketNotificationsHandler050a0587b7544547bf325f094a3db8347ECC3691",
            "Arn",
          ],
        },
      },
      "Type": "Custom::S3BucketNotifications",
    },
    "buildProjectB3CE3E56": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "ProjectArtifactsBucketEncryptionKey9C4C3F23",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "Image": "aws/codebuild/standard:5.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "Name": "BLEA-Pipeline-BuildProject",
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "buildProjectRoleAF642118",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"install\\": {
      \\"commands\\": []
    },
    \\"build\\": {
      \\"commands\\": [
        \\"npm install\\",
        \\"npx cdk deploy --require-approval never --all -c environment=dev\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TimeoutInMinutes": 180,
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "buildProjectNotifyOnBuildSucceeded0CCFF51E": Object {
      "Properties": Object {
        "DetailType": "FULL",
        "EventTypeIds": Array [
          "codebuild-project-build-state-succeeded",
        ],
        "Name": "BLEAPipelinebuildProjectNotifyOnBuildSucceeded6B25AA74",
        "Resource": Object {
          "Fn::GetAtt": Array [
            "buildProjectB3CE3E56",
            "Arn",
          ],
        },
        "Tags": Object {
          "Environment": "dev",
        },
        "Targets": Array [
          Object {
            "TargetAddress": Object {
              "Ref": "SlackChannel425D424B",
            },
            "TargetType": "AWSChatbotSlack",
          },
        ],
      },
      "Type": "AWS::CodeStarNotifications::NotificationRule",
    },
    "buildProjectNotifyOnBuildfailed2BA6AA1C": Object {
      "Properties": Object {
        "DetailType": "FULL",
        "EventTypeIds": Array [
          "codebuild-project-build-state-failed",
        ],
        "Name": "BLEAPipelinebuildProjectNotifyOnBuildfailed480D7854",
        "Resource": Object {
          "Fn::GetAtt": Array [
            "buildProjectB3CE3E56",
            "Arn",
          ],
        },
        "Tags": Object {
          "Environment": "dev",
        },
        "Targets": Array [
          Object {
            "TargetAddress": Object {
              "Ref": "SlackChannel425D424B",
            },
            "TargetType": "AWSChatbotSlack",
          },
        ],
      },
      "Type": "AWS::CodeStarNotifications::NotificationRule",
    },
    "buildProjectRoleAF642118": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codebuild.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "buildProjectRoleDefaultPolicy1C8C8518": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":log-group:/aws/codebuild/",
                      Object {
                        "Ref": "buildProjectB3CE3E56",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:",
                      Object {
                        "Ref": "AWS::Region",
                      },
                      ":",
                      Object {
                        "Ref": "AWS::AccountId",
                      },
                      ":log-group:/aws/codebuild/",
                      Object {
                        "Ref": "buildProjectB3CE3E56",
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases",
                "codebuild:BatchPutCodeCoverages",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codebuild:",
                    Object {
                      "Ref": "AWS::Region",
                    },
                    ":",
                    Object {
                      "Ref": "AWS::AccountId",
                    },
                    ":report-group/",
                    Object {
                      "Ref": "buildProjectB3CE3E56",
                    },
                    "-*",
                  ],
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": "arn:aws:iam::*:role/cdk-*",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "ProjectArtifactsBucketA004C8A7",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "ProjectArtifactsBucketA004C8A7",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "ProjectArtifactsBucketEncryptionKey9C4C3F23",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "ProjectArtifactsBucketEncryptionKey9C4C3F23",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "buildProjectRoleDefaultPolicy1C8C8518",
        "Roles": Array [
          Object {
            "Ref": "buildProjectRoleAF642118",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`BLEA Guest Stacks GuestAccount ECS App Stacks 3`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "BLEAWafWebAcl3291C551": Object {
      "Properties": Object {
        "DefaultAction": Object {
          "Block": Object {},
        },
        "Rules": Array [
          Object {
            "Action": Object {
              "Allow": Object {},
            },
            "Name": "IPset",
            "Priority": 1,
            "Statement": Object {
              "IPSetReferenceStatement": Object {
                "Arn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAWafWebAclIPset40499A63",
                    "Arn",
                  ],
                },
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "IPset",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Action": Object {
              "Block": Object {
                "CustomResponse": Object {
                  "ResponseCode": 401,
                  "ResponseHeaders": Array [
                    Object {
                      "Name": "www-authenticate",
                      "Value": "Basic",
                    },
                  ],
                },
              },
            },
            "Name": "BasicAuth",
            "Priority": 3,
            "Statement": Object {
              "NotStatement": Object {
                "Statement": Object {
                  "ByteMatchStatement": Object {
                    "FieldToMatch": Object {
                      "SingleHeader": Object {
                        "name": "authorization",
                      },
                    },
                    "PositionalConstraint": "EXACTLY",
                    "SearchString": "Basic YWRtaW46ZDc0ZmYwZWU=",
                    "TextTransformations": Array [
                      Object {
                        "Priority": 0,
                        "Type": "NONE",
                      },
                    ],
                  },
                },
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": false,
              "MetricName": "BasicAuthRule",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWSManagedRulesCommonRuleSet",
            "OverrideAction": Object {
              "Count": Object {},
            },
            "Priority": 101,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesCommonRuleSet",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AWSManagedRulesCommonRuleSet",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWSManagedRulesKnownBadInputsRuleSet",
            "OverrideAction": Object {
              "Count": Object {},
            },
            "Priority": 102,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesKnownBadInputsRuleSet",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AWSManagedRulesKnownBadInputsRuleSet",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWSManagedRulesAmazonIpReputationList",
            "OverrideAction": Object {
              "Count": Object {},
            },
            "Priority": 103,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesAmazonIpReputationList",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AWSManagedRulesAmazonIpReputationList",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWSManagedRulesLinuxRuleSet",
            "OverrideAction": Object {
              "Count": Object {},
            },
            "Priority": 104,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesLinuxRuleSet",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AWSManagedRulesLinuxRuleSet",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWSManagedRulesSQLiRuleSet",
            "OverrideAction": Object {
              "Count": Object {},
            },
            "Priority": 105,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesSQLiRuleSet",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AWSManagedRulesSQLiRuleSet",
              "SampledRequestsEnabled": true,
            },
          },
        ],
        "Scope": "CLOUDFRONT",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VisibilityConfig": Object {
          "CloudWatchMetricsEnabled": true,
          "MetricName": "WafAcl",
          "SampledRequestsEnabled": true,
        },
      },
      "Type": "AWS::WAFv2::WebACL",
    },
    "BLEAWafWebAclIPset40499A63": Object {
      "Properties": Object {
        "Addresses": Array [
          "210.190.113.128/25",
        ],
        "IPAddressVersion": "IPV4",
        "Name": "IPset",
        "Scope": "CLOUDFRONT",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::WAFv2::IPSet",
    },
    "BLEAWafWebAclmaintenanceUserNameDA9DFE8E": Object {
      "Properties": Object {
        "Name": "maintenanceUserName-c8631ce5eab292fe6a685de7c35d53fa770c2a7ad4",
        "Tags": Object {
          "Environment": "dev",
        },
        "Type": "String",
        "Value": "admin",
      },
      "Type": "AWS::SSM::Parameter",
    },
    "BLEAWafWebAclmaintenanceUserPass8BD93158": Object {
      "Properties": Object {
        "Name": "maintenanceUserPass-c8631ce5eab292fe6a685de7c35d53fa770c2a7ad4",
        "Tags": Object {
          "Environment": "dev",
        },
        "Type": "String",
        "Value": "d74ff0ee",
      },
      "Type": "AWS::SSM::Parameter",
    },
    "CustomCrossRegionExportWriterCustomResourceProviderHandlerD8786E8A": Object {
      "DependsOn": Array [
        "CustomCrossRegionExportWriterCustomResourceProviderRoleC951B1E1",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": "cdk-hnb659fds-assets-410364260571-us-east-1",
          "S3Key": "cff1057a28ad960092a93eb998fe4ec0a6c36771c1122ea4f3cadaea315f93b0.zip",
        },
        "Handler": "__entrypoint__.handler",
        "MemorySize": 128,
        "Role": Object {
          "Fn::GetAtt": Array [
            "CustomCrossRegionExportWriterCustomResourceProviderRoleC951B1E1",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Timeout": 900,
      },
      "Type": "AWS::Lambda::Function",
    },
    "CustomCrossRegionExportWriterCustomResourceProviderRoleC951B1E1": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Sub": "arn:\${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
          },
        ],
        "Policies": Array [
          Object {
            "PolicyDocument": Object {
              "Statement": Array [
                Object {
                  "Action": Array [
                    "ssm:DeleteParameters",
                    "ssm:ListTagsForResource",
                    "ssm:GetParameters",
                    "ssm:PutParameter",
                  ],
                  "Effect": "Allow",
                  "Resource": Array [
                    Object {
                      "Fn::Join": Array [
                        "",
                        Array [
                          "arn:",
                          Object {
                            "Ref": "AWS::Partition",
                          },
                          ":ssm:ap-northeast-1:410364260571:parameter/cdk/exports/*",
                        ],
                      ],
                    },
                  ],
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "Inline",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "ExportsWriterapnortheast12334E1B81D43DF3F": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "CustomCrossRegionExportWriterCustomResourceProviderHandlerD8786E8A",
            "Arn",
          ],
        },
        "WriterProps": Object {
          "exports": Object {
            "/cdk/exports/BLEA-Cloudfront/BLEAWafuseast1FnGetAttBLEAWafWebAcl3291C551Arn3119F950": Object {
              "Fn::GetAtt": Array [
                "BLEAWafWebAcl3291C551",
                "Arn",
              ],
            },
          },
          "region": "ap-northeast-1",
        },
      },
      "Type": "Custom::CrossRegionExportWriter",
      "UpdateReplacePolicy": "Delete",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`BLEA Guest Stacks GuestAccount ECS App Stacks 4`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "CustomAWSCDKOpenIdConnectProviderCustomResourceProviderHandlerF2C543E0": Object {
      "DependsOn": Array [
        "CustomAWSCDKOpenIdConnectProviderCustomResourceProviderRole517FED65",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": Object {
            "Fn::Sub": "cdk-hnb659fds-assets-\${AWS::AccountId}-\${AWS::Region}",
          },
          "S3Key": "350497850828a0108f064a8cb783dd16d04637d20593411e21cc5b4f9e485cd6.zip",
        },
        "Handler": "__entrypoint__.handler",
        "MemorySize": 128,
        "Role": Object {
          "Fn::GetAtt": Array [
            "CustomAWSCDKOpenIdConnectProviderCustomResourceProviderRole517FED65",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Timeout": 900,
      },
      "Type": "AWS::Lambda::Function",
    },
    "CustomAWSCDKOpenIdConnectProviderCustomResourceProviderRole517FED65": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Sub": "arn:\${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
          },
        ],
        "Policies": Array [
          Object {
            "PolicyDocument": Object {
              "Statement": Array [
                Object {
                  "Action": Array [
                    "iam:CreateOpenIDConnectProvider",
                    "iam:DeleteOpenIDConnectProvider",
                    "iam:UpdateOpenIDConnectProviderThumbprint",
                    "iam:AddClientIDToOpenIDConnectProvider",
                    "iam:RemoveClientIDFromOpenIDConnectProvider",
                  ],
                  "Effect": "Allow",
                  "Resource": "*",
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "Inline",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "GithubActionsOidcProviderF9E986BE": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "ClientIDList": Array [
          "sts.amazonaws.com",
        ],
        "CodeHash": "350497850828a0108f064a8cb783dd16d04637d20593411e21cc5b4f9e485cd6",
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "CustomAWSCDKOpenIdConnectProviderCustomResourceProviderHandlerF2C543E0",
            "Arn",
          ],
        },
        "Url": "https://token.actions.githubusercontent.com",
      },
      "Type": "Custom::AWSCDKOpenIdConnectProvider",
      "UpdateReplacePolicy": "Delete",
    },
    "InfraResourcesRoleDefaultPolicy650E5DA3": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "cloudformation:DescribeStacks",
                "s3:PutObject",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "InfraResourcesRoleDefaultPolicy650E5DA3",
        "Roles": Array [
          Object {
            "Ref": "InfraResourcesRoleE6C761A4",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "InfraResourcesRoleE6C761A4": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRoleWithWebIdentity",
              "Condition": Object {
                "StringEquals": Object {
                  "token.actions.githubusercontent.com:aud": "sts.amazonaws.com",
                },
                "StringLike": Object {
                  "token.actions.githubusercontent.com:sub": "repo:OrganizationName/InfraRepositoryName:*",
                },
              },
              "Effect": "Allow",
              "Principal": Object {
                "Federated": Object {
                  "Ref": "GithubActionsOidcProviderF9E986BE",
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "WafRoleA713F7DC": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRoleWithWebIdentity",
              "Condition": Object {
                "StringEquals": Object {
                  "token.actions.githubusercontent.com:aud": "sts.amazonaws.com",
                },
                "StringLike": Object {
                  "token.actions.githubusercontent.com:sub": "repo:OrganizationName/WafRepositoryName:*",
                },
              },
              "Effect": "Allow",
              "Principal": Object {
                "Federated": Object {
                  "Ref": "GithubActionsOidcProviderF9E986BE",
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "WafRoleDefaultPolicy729EDA04": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "wafv2:ListWebACLs",
                "wafv2:GetWebACL",
                "wafv2:UpdateWebACL",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "WafRoleDefaultPolicy729EDA04",
        "Roles": Array [
          Object {
            "Ref": "WafRoleA713F7DC",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`BLEA Guest Stacks GuestAccount ECS App Stacks 5`] = `
Object {
  "Outputs": Object {
    "BLEAECSAppBLEAECSCommonclusterNameD95088AD": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
      },
    },
    "BLEAECSAppBLEAECSCommonexecutionRoleArnAE4F5017": Object {
      "Value": Object {
        "Fn::GetAtt": Array [
          "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
          "Arn",
        ],
      },
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineEcsApp2BgSourceBucketName9C5424A5": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelinePipelineSourceBucket15AD388A",
      },
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgEcrRepoBE1B3BF2": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgRepo596AC1F1",
      },
    },
    "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesEcrRepo8DB85AFC": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesRepo3967CF4F",
      },
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineEcsApp2SourceBucketNameEADEB1EB": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelinePipelineSourceBucket3BB51237",
      },
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineEcsAppBgSourceBucketName96B64ECF": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelinePipelineSourceBucketE7433C21",
      },
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgEcrRepoD3DB1E85": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgRepoD883BC43",
      },
    },
    "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesEcrRepoBCDE8202": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesRepo187ED7FD",
      },
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineEcsAppSourceBucketName38380911": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelinePipelineSourceBucketCC0F879B",
      },
    },
    "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesEcrRepo4D775EE7": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesRepo25F5C2BD",
      },
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineEcsBackend2SourceBucketName6C62C729": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelinePipelineSourceBucket8E060504",
      },
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineEcsBackend2BgSourceBucketName05DDD641": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelinePipelineSourceBucketB2726FB7",
      },
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgEcrRepoD254639A": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgRepo0C7B4B1E",
      },
    },
    "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesEcrRepoAD7B8D43": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesRepo7ED95025",
      },
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineEcsBackendSourceBucketName1A595130": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelinePipelineSourceBucket80D8005D",
      },
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineEcsBackendBgSourceBucketNameFD5800FE": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelinePipelineSourceBucket657623D7",
      },
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgEcrRepoFE629D20": Object {
      "Value": Object {
        "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgRepo7F415B9B",
      },
    },
    "ExportsOutputFnGetAttBLEAECSAppBLEAEcsBackendBackAppEcsResourcesSgBF741673GroupId0FB8EEE6": Object {
      "Export": Object {
        "Name": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAEcsBackendBackAppEcsResourcesSgBF741673GroupId0FB8EEE6",
      },
      "Value": Object {
        "Fn::GetAtt": Array [
          "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesSgBF741673",
          "GroupId",
        ],
      },
    },
    "ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15": Object {
      "Export": Object {
        "Name": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
      },
      "Value": Object {
        "Fn::GetAtt": Array [
          "BLEAECSAppBLEAFrontAlb426FC84F",
          "LoadBalancerFullName",
        ],
      },
    },
    "ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsApp2TGAlbTgUnHealthyHostCountFF6C5217Arn25279973": Object {
      "Export": Object {
        "Name": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsApp2TGAlbTgUnHealthyHostCountFF6C5217Arn25279973",
      },
      "Value": Object {
        "Fn::GetAtt": Array [
          "BLEAECSAppBLEAFrontAlbEcsApp2TGAlbTgUnHealthyHostCountFF6C5217",
          "Arn",
        ],
      },
    },
    "ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsApp2TGTargetGroupC64D4162TargetGroupName0F72D580": Object {
      "Export": Object {
        "Name": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsApp2TGTargetGroupC64D4162TargetGroupName0F72D580",
      },
      "Value": Object {
        "Fn::GetAtt": Array [
          "BLEAECSAppBLEAFrontAlbEcsApp2TGTargetGroupC64D4162",
          "TargetGroupName",
        ],
      },
    },
    "ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsAppTGAlbTgUnHealthyHostCountC0EB54E5ArnBA9D40C8": Object {
      "Export": Object {
        "Name": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsAppTGAlbTgUnHealthyHostCountC0EB54E5ArnBA9D40C8",
      },
      "Value": Object {
        "Fn::GetAtt": Array [
          "BLEAECSAppBLEAFrontAlbEcsAppTGAlbTgUnHealthyHostCountC0EB54E5",
          "Arn",
        ],
      },
    },
    "ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsAppTGTargetGroupBA6D36C2TargetGroupNameDAC7366B": Object {
      "Export": Object {
        "Name": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsAppTGTargetGroupBA6D36C2TargetGroupNameDAC7366B",
      },
      "Value": Object {
        "Fn::GetAtt": Array [
          "BLEAECSAppBLEAFrontAlbEcsAppTGTargetGroupBA6D36C2",
          "TargetGroupName",
        ],
      },
    },
    "ExportsOutputFnGetAttBLEAECSAppBLEAFrontendBgAlbBg7D4F4A31DNSNameEF586E40": Object {
      "Export": Object {
        "Name": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontendBgAlbBg7D4F4A31DNSNameEF586E40",
      },
      "Value": Object {
        "Fn::GetAtt": Array [
          "BLEAECSAppBLEAFrontendBgAlbBg7D4F4A31",
          "DNSName",
        ],
      },
    },
    "ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101": Object {
      "Export": Object {
        "Name": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
      },
      "Value": Object {
        "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
      },
    },
    "ExportsOutputRefBLEAECSAppBLEAFrontAlb426FC84FBABF62D0": Object {
      "Export": Object {
        "Name": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAFrontAlb426FC84FBABF62D0",
      },
      "Value": Object {
        "Ref": "BLEAECSAppBLEAFrontAlb426FC84F",
      },
    },
    "ExportsOutputRefBLEAECSAppBLEAFrontendBgAlbBg7D4F4A31C9802585": Object {
      "Export": Object {
        "Name": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAFrontendBgAlbBg7D4F4A31C9802585",
      },
      "Value": Object {
        "Ref": "BLEAECSAppBLEAFrontendBgAlbBg7D4F4A31",
      },
    },
  },
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "BLEAECSAppBLEABackendBgAlbBgCEE3036A": Object {
      "Properties": Object {
        "LoadBalancerAttributes": Array [
          Object {
            "Key": "deletion_protection.enabled",
            "Value": "false",
          },
          Object {
            "Key": "access_logs.s3.enabled",
            "Value": "true",
          },
          Object {
            "Key": "access_logs.s3.bucket",
            "Value": Object {
              "Ref": "BLEAECSAppBLEABackendBgalblogbucket2A8FF48E",
            },
          },
        ],
        "Scheme": "internal",
        "SecurityGroups": Array [
          Object {
            "Fn::GetAtt": Array [
              "BLEAECSAppBLEABackendBgSgAlb18538169",
              "GroupId",
            ],
          },
        ],
        "Subnets": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet1Subnet10F7BE6AE43431C8",
          },
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet2Subnet3F910288B1BC2DBC",
          },
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet3Subnet5A1AF5388272CEF2",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "Type": "application",
      },
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
    },
    "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257": Object {
      "Properties": Object {
        "DefaultActions": Array [
          Object {
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEABackendBgEcsBackendBgBlueTGTargetGroup10D49C22",
            },
            "Type": "forward",
          },
        ],
        "LoadBalancerArn": Object {
          "Ref": "BLEAECSAppBLEABackendBgAlbBgCEE3036A",
        },
        "Port": 80,
        "Protocol": "HTTP",
      },
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
    },
    "BLEAECSAppBLEABackendBgAlbBgappBluepathAddTargetRule24F49559": Object {
      "Properties": Object {
        "Actions": Array [
          Object {
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEABackendBgEcsBackend2BgBlueTGTargetGroup602A3283",
            },
            "Type": "forward",
          },
        ],
        "Conditions": Array [
          Object {
            "Field": "path-pattern",
            "PathPatternConfig": Object {
              "Values": Array [
                "/path",
              ],
            },
          },
        ],
        "ListenerArn": Object {
          "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
        },
        "Priority": 1,
      },
      "Type": "AWS::ElasticLoadBalancingV2::ListenerRule",
    },
    "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181": Object {
      "Properties": Object {
        "DefaultActions": Array [
          Object {
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEABackendBgEcsBackendBgGreenTGTargetGroup02662F90",
            },
            "Type": "forward",
          },
        ],
        "LoadBalancerArn": Object {
          "Ref": "BLEAECSAppBLEABackendBgAlbBgCEE3036A",
        },
        "Port": 8080,
        "Protocol": "HTTP",
      },
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
    },
    "BLEAECSAppBLEABackendBgAlbBgappGreenpathAddTargetRuleC19EB276": Object {
      "Properties": Object {
        "Actions": Array [
          Object {
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEABackendBgEcsBackend2BgGreenTGTargetGroupEF36DFC1",
            },
            "Type": "forward",
          },
        ],
        "Conditions": Array [
          Object {
            "Field": "path-pattern",
            "PathPatternConfig": Object {
              "Values": Array [
                "/path",
              ],
            },
          },
        ],
        "ListenerArn": Object {
          "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
        },
        "Priority": 1,
      },
      "Type": "AWS::ElasticLoadBalancingV2::ListenerRule",
    },
    "BLEAECSAppBLEABackendBgAlbHttp4xx70CCBC11": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEABackendBgAlbBgCEE3036A",
                "LoadBalancerFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HTTPCode_ELB_4XX_Count",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Sum",
        "Threshold": 10,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEABackendBgAlbHttp5xx4FAF17B1": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEABackendBgAlbBgCEE3036A",
                "LoadBalancerFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HTTPCode_ELB_5XX_Count",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Sum",
        "Threshold": 10,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEABackendBgAlbResponseTime7FAFF40F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEABackendBgAlbBgCEE3036A",
                "LoadBalancerFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "TargetResponseTime",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 100,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEABackendBgEcsBackend2BgBlueTGAlbTgHealthyHostCount95251E15": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "LessThanThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEABackendBgEcsBackend2BgBlueTGTargetGroup602A3283",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEABackendBgEcsBackend2BgBlueTGAlbTgUnHealthyHostCountE8EDC60B": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEABackendBgEcsBackend2BgBlueTGTargetGroup602A3283",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "UnHealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEABackendBgEcsBackend2BgBlueTGTargetGroup602A3283": Object {
      "Properties": Object {
        "Port": 80,
        "Protocol": "HTTP",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TargetGroupAttributes": Array [
          Object {
            "Key": "deregistration_delay.timeout_seconds",
            "Value": "30",
          },
          Object {
            "Key": "stickiness.enabled",
            "Value": "false",
          },
        ],
        "TargetType": "ip",
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
    },
    "BLEAECSAppBLEABackendBgEcsBackend2BgGreenTGAlbTgHealthyHostCountB7DF34BD": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "LessThanThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEABackendBgEcsBackend2BgGreenTGTargetGroupEF36DFC1",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEABackendBgEcsBackend2BgGreenTGAlbTgUnHealthyHostCountAEDBC501": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEABackendBgEcsBackend2BgGreenTGTargetGroupEF36DFC1",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "UnHealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEABackendBgEcsBackend2BgGreenTGTargetGroupEF36DFC1": Object {
      "Properties": Object {
        "Port": 80,
        "Protocol": "HTTP",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TargetGroupAttributes": Array [
          Object {
            "Key": "deregistration_delay.timeout_seconds",
            "Value": "30",
          },
          Object {
            "Key": "stickiness.enabled",
            "Value": "false",
          },
        ],
        "TargetType": "ip",
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
    },
    "BLEAECSAppBLEABackendBgEcsBackendBgBlueTGAlbTgHealthyHostCount9C9D5CAC": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "LessThanThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEABackendBgEcsBackendBgBlueTGTargetGroup10D49C22",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEABackendBgEcsBackendBgBlueTGAlbTgUnHealthyHostCount6C657DE9": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEABackendBgEcsBackendBgBlueTGTargetGroup10D49C22",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "UnHealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEABackendBgEcsBackendBgBlueTGTargetGroup10D49C22": Object {
      "Properties": Object {
        "Port": 80,
        "Protocol": "HTTP",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TargetGroupAttributes": Array [
          Object {
            "Key": "deregistration_delay.timeout_seconds",
            "Value": "30",
          },
          Object {
            "Key": "stickiness.enabled",
            "Value": "false",
          },
        ],
        "TargetType": "ip",
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
    },
    "BLEAECSAppBLEABackendBgEcsBackendBgGreenTGAlbTgHealthyHostCount4042AD4E": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "LessThanThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEABackendBgEcsBackendBgGreenTGTargetGroup02662F90",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEABackendBgEcsBackendBgGreenTGAlbTgUnHealthyHostCountFD529DEA": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEABackendBgEcsBackendBgGreenTGTargetGroup02662F90",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "UnHealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEABackendBgEcsBackendBgGreenTGTargetGroup02662F90": Object {
      "Properties": Object {
        "Port": 80,
        "Protocol": "HTTP",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TargetGroupAttributes": Array [
          Object {
            "Key": "deregistration_delay.timeout_seconds",
            "Value": "30",
          },
          Object {
            "Key": "stickiness.enabled",
            "Value": "false",
          },
        ],
        "TargetType": "ip",
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
    },
    "BLEAECSAppBLEABackendBgSgAlb18538169": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ECS/BLEA-ECSApp/BLEA-Backend-Bg/SgAlb",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow from anyone on port 80",
            "FromPort": 80,
            "IpProtocol": "tcp",
            "ToPort": 80,
          },
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow from anyone on port 8080",
            "FromPort": 8080,
            "IpProtocol": "tcp",
            "ToPort": 8080,
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAECSAppBLEABackendBgSgAlbfromBLEAECSBLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgSg8125C687ALLPORTSA69821FD": Object {
      "Properties": Object {
        "Description": "Allow inbound traffic from specified security group",
        "FromPort": 0,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEABackendBgSgAlb18538169",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgSg7BD1CFB8",
            "GroupId",
          ],
        },
        "ToPort": 65535,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEABackendBgSgAlbfromBLEAECSBLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgSgBA11917FALLPORTS6C96D2A1": Object {
      "Properties": Object {
        "Description": "Allow inbound traffic from specified security group",
        "FromPort": 0,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEABackendBgSgAlb18538169",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgSg9727DE7E",
            "GroupId",
          ],
        },
        "ToPort": 65535,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEABackendBgalblogbucket2A8FF48E": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "AccessControl": "Private",
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEABackendBgalblogbucketPolicy8B8EF0F1": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAECSAppBLEABackendBgalblogbucket2A8FF48E",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEABackendBgalblogbucket2A8FF48E",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEABackendBgalblogbucket2A8FF48E",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "s3:PutObject",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::582318560864:root",
                    ],
                  ],
                },
              },
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "BLEAECSAppBLEABackendBgalblogbucket2A8FF48E",
                        "Arn",
                      ],
                    },
                    "/AWSLogs/410364260571/*",
                  ],
                ],
              },
            },
            Object {
              "Action": "s3:PutObject",
              "Condition": Object {
                "StringEquals": Object {
                  "s3:x-amz-acl": "bucket-owner-full-control",
                },
              },
              "Effect": "Allow",
              "Principal": Object {
                "Service": "delivery.logs.amazonaws.com",
              },
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "BLEAECSAppBLEABackendBgalblogbucket2A8FF48E",
                        "Arn",
                      ],
                    },
                    "/AWSLogs/410364260571/*",
                  ],
                ],
              },
            },
            Object {
              "Action": "s3:GetBucketAcl",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "delivery.logs.amazonaws.com",
              },
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEABackendBgalblogbucket2A8FF48E",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEAECSAppBLEAECSCommonClusterDA7F9F26": Object {
      "Properties": Object {
        "CapacityProviders": Array [
          "FARGATE",
          "FARGATE_SPOT",
        ],
        "Cluster": Object {
          "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
        },
        "DefaultCapacityProviderStrategy": Array [],
      },
      "Type": "AWS::ECS::ClusterCapacityProviderAssociations",
    },
    "BLEAECSAppBLEAECSCommonClusterDefaultServiceDiscoveryNamespace6AF83AD0": Object {
      "Properties": Object {
        "Name": "BLEA",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "Vpc": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::ServiceDiscovery::PrivateDnsNamespace",
    },
    "BLEAECSAppBLEAECSCommonClusterF9835809": Object {
      "Properties": Object {
        "ClusterSettings": Array [
          Object {
            "Name": "containerInsights",
            "Value": "enabled",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::ECS::Cluster",
    },
    "BLEAECSAppBLEAECSCommonECSServiceActionEventRule82DB908A": Object {
      "Properties": Object {
        "Description": "CloudWatch Event Rule to send notification on ECS Service action events.",
        "EventPattern": Object {
          "detail": Object {
            "eventType": Array [
              "WARN",
              "ERROR",
            ],
          },
          "detail-type": Array [
            "ECS Service Action",
          ],
          "source": Array [
            "aws.ecs",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "BLEAECSAppBLEAECSCommonECSServiceDeploymentEventRule9C5FD2BA": Object {
      "Properties": Object {
        "Description": "CloudWatch Event Rule to send notification on ECS Service deployment events.",
        "EventPattern": Object {
          "detail": Object {
            "eventType": Array [
              "WARN",
              "ERROR",
            ],
          },
          "detail-type": Array [
            "ECS Deployment State Change",
          ],
          "source": Array [
            "aws.ecs",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "ecs-tasks.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AmazonECSTaskExecutionRolePolicy",
              ],
            ],
          },
        ],
        "Policies": Array [
          Object {
            "PolicyDocument": Object {
              "Statement": Array [
                Object {
                  "Action": "logs:CreateLogGroup",
                  "Effect": "Allow",
                  "Resource": "*",
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "createLogs",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipeline077F3464": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineRoleDefaultPolicy588399DF",
        "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineRole40BAE1B5",
      ],
      "Properties": Object {
        "ArtifactStore": Object {
          "EncryptionKey": Object {
            "Id": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucketEncryptionKeyFF223B84",
                "Arn",
              ],
            },
            "Type": "KMS",
          },
          "Location": Object {
            "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucket7CEB7062",
          },
          "Type": "S3",
        },
        "RoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineRole40BAE1B5",
            "Arn",
          ],
        },
        "Stages": Array [
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "S3",
                  "Version": "1",
                },
                "Configuration": Object {
                  "S3Bucket": Object {
                    "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelinePipelineSourceBucket15AD388A",
                  },
                  "S3ObjectKey": "image.zip",
                },
                "Name": "SourceBucket",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleC3CB3B51",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Source",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CodeDeployToECS",
                  "Version": "1",
                },
                "Configuration": Object {
                  "AppSpecTemplateArtifact": "Artifact_Source_SourceBucket",
                  "AppSpecTemplatePath": "appspec.yaml",
                  "ApplicationName": Object {
                    "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineEcsDeployApplication3B60EEB4",
                  },
                  "DeploymentGroupName": Object {
                    "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineBlueGreenDeploy174FF21D",
                  },
                  "Image1ArtifactName": "Artifact_Source_SourceBucket",
                  "Image1ContainerName": "IMAGE1_NAME",
                  "TaskDefinitionTemplateArtifact": "Artifact_Source_SourceBucket",
                  "TaskDefinitionTemplatePath": "taskdef.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "Name": "ECSBlueGreenDeploy",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRole689D54EB",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Deploy",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodePipeline::Pipeline",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucket7CEB7062": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucketEncryptionKeyFF223B84",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucketEncryptionKeyAlias2E54F842": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AliasName": "alias/codepipeline-bleaecsbleaecsappbleaecsapp2bgfrontappbgpipeline5406b8da",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucketEncryptionKeyFF223B84",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucketEncryptionKeyFF223B84": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucketPolicy3080DED8": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucket7CEB7062",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucket7CEB7062",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucket7CEB7062",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineBlueGreenDeploy174FF21D": Object {
      "Properties": Object {
        "ApplicationName": Object {
          "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineEcsDeployApplication3B60EEB4",
        },
        "AutoRollbackConfiguration": Object {
          "Enabled": true,
          "Events": Array [
            "DEPLOYMENT_FAILURE",
          ],
        },
        "BlueGreenDeploymentConfiguration": Object {
          "DeploymentReadyOption": Object {
            "ActionOnTimeout": "STOP_DEPLOYMENT",
            "WaitTimeInMinutes": 60,
          },
          "TerminateBlueInstancesOnDeploymentSuccess": Object {
            "Action": "TERMINATE",
            "TerminationWaitTimeInMinutes": 60,
          },
        },
        "DeploymentConfigName": "CodeDeployDefault.ECSAllAtOnce",
        "DeploymentStyle": Object {
          "DeploymentOption": "WITH_TRAFFIC_CONTROL",
          "DeploymentType": "BLUE_GREEN",
        },
        "ECSServices": Array [
          Object {
            "ClusterName": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
            "ServiceName": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsApp2BgServiceFargateService73923B20",
                "Name",
              ],
            },
          },
        ],
        "LoadBalancerInfo": Object {
          "TargetGroupPairInfoList": Array [
            Object {
              "ProdTrafficRoute": Object {
                "ListenerArns": Array [
                  Object {
                    "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                  },
                ],
              },
              "TargetGroups": Array [
                Object {
                  "Name": Object {
                    "Fn::GetAtt": Array [
                      "BLEAECSAppBLEAFrontendBgEcsApp2BgBlueTGTargetGroup37AB5347",
                      "TargetGroupName",
                    ],
                  },
                },
                Object {
                  "Name": Object {
                    "Fn::GetAtt": Array [
                      "BLEAECSAppBLEAFrontendBgEcsApp2BgGreenTGTargetGroup6CDE1BBB",
                      "TargetGroupName",
                    ],
                  },
                },
              ],
              "TestTrafficRoute": Object {
                "ListenerArns": Array [
                  Object {
                    "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                  },
                ],
              },
            },
          ],
        },
        "ServiceRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineBlueGreenDeployServiceRole5EA5A897",
            "Arn",
          ],
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeDeploy::DeploymentGroup",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineBlueGreenDeployServiceRole5EA5A897": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codedeploy.ap-northeast-1.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/AWSCodeDeployRoleForECS",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRole689D54EB": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleDefaultPolicy7B4511DB": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codedeploy:GetApplication",
                "codedeploy:GetApplicationRevision",
                "codedeploy:RegisterApplicationRevision",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:application:",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineEcsDeployApplication3B60EEB4",
                    },
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "codedeploy:CreateDeployment",
                "codedeploy:GetDeployment",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:deploymentgroup:",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineEcsDeployApplication3B60EEB4",
                    },
                    "/",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineBlueGreenDeploy174FF21D",
                    },
                  ],
                ],
              },
            },
            Object {
              "Action": "codedeploy:GetDeploymentConfig",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:deploymentconfig:CodeDeployDefault.ECSAllAtOnce",
                  ],
                ],
              },
            },
            Object {
              "Action": "ecs:RegisterTaskDefinition",
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "iam:PassRole",
              "Condition": Object {
                "StringEqualsIfExists": Object {
                  "iam:PassedToService": Array [
                    "ecs-tasks.amazonaws.com",
                  ],
                },
              },
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucket7CEB7062",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucket7CEB7062",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucketEncryptionKeyFF223B84",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleDefaultPolicy7B4511DB",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRole689D54EB",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineEcsDeployApplication3B60EEB4": Object {
      "Properties": Object {
        "ComputePlatform": "ECS",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeDeploy::Application",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelinePipelineSourceBucket15AD388A": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineRole40BAE1B5": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codepipeline.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineRoleDefaultPolicy588399DF": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucket7CEB7062",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucket7CEB7062",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucketEncryptionKeyFF223B84",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleC3CB3B51",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRole689D54EB",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineRoleDefaultPolicy588399DF",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineRole40BAE1B5",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleC3CB3B51": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicy87C2D572": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelinePipelineSourceBucket15AD388A",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelinePipelineSourceBucket15AD388A",
                          "Arn",
                        ],
                      },
                      "/image.zip",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucket7CEB7062",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucket7CEB7062",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Decrypt",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineArtifactsBucketEncryptionKeyFF223B84",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicy87C2D572",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleC3CB3B51",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgFargateCpuUtil6A5F107D": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 3,
        "Dimensions": Array [
          Object {
            "Name": "ClusterName",
            "Value": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
          },
          Object {
            "Name": "ServiceName",
            "Value": "BLEA-EcsApp2Bg-Service",
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "CPUUtilization",
        "Namespace": "ECS",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 80,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgLog910F318F": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
        },
        "RetentionInDays": 1827,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgRepo596AC1F1": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ImageScanningConfiguration": Object {
          "ScanOnPush": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::ECR::Repository",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgRepoImageScanComplete4D19BFEF": Object {
      "Properties": Object {
        "EventPattern": Object {
          "detail": Object {
            "repository-name": Array [
              Object {
                "Ref": "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgRepo596AC1F1",
              },
            ],
            "scan-status": Array [
              "COMPLETE",
            ],
          },
          "detail-type": Array [
            "ECR Image Scan",
          ],
          "source": Array [
            "aws.ecr",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgSg7BD1CFB8": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ECS/BLEA-ECSApp/BLEA-EcsApp2Bg-FrontApp-Ecs-Resources-Bg/Sg",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgSgfromBLEAECSBLEAECSAppBLEAFrontendBgSgAlbCDC7031180EFDD9D85": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEAFrontendBgSgAlbCDC70311:80",
        "FromPort": 80,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgSg7BD1CFB8",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAFrontendBgSgAlb2FBDC303",
            "GroupId",
          ],
        },
        "ToPort": 80,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsApp2BgServiceEcsTask7D03EC43": Object {
      "Properties": Object {
        "ContainerDefinitions": Array [
          Object {
            "Environment": Array [
              Object {
                "Name": "ENVIRONMENT_VARIABLE_SAMPLE_KEY",
                "Value": "Environment Variable Sample Value",
              },
            ],
            "Essential": true,
            "Image": "public.ecr.aws/nginx/nginx:stable",
            "Name": "EcsApp",
            "PortMappings": Array [
              Object {
                "ContainerPort": 80,
                "Protocol": "tcp",
              },
            ],
          },
        ],
        "Cpu": "256",
        "ExecutionRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
            "Arn",
          ],
        },
        "Family": "BLEAECSBLEAECSAppBLEAEcsApp2BgServiceEcsTask626513D2",
        "Memory": "512",
        "NetworkMode": "awsvpc",
        "RequiresCompatibilities": Array [
          "FARGATE",
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TaskRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2BgServiceEcsTaskTaskRoleE898B3C1",
            "Arn",
          ],
        },
      },
      "Type": "AWS::ECS::TaskDefinition",
    },
    "BLEAECSAppBLEAEcsApp2BgServiceEcsTaskTaskRoleE898B3C1": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "ecs-tasks.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsApp2BgServiceFargateService73923B20": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEAEcsApp2BgServiceEcsTask7D03EC43",
        "BLEAECSAppBLEAEcsApp2BgServiceEcsTaskTaskRoleE898B3C1",
        "BLEAECSAppBLEAFrontendBgAlbBgappBluepathAddTargetRuleF66D6C5A",
      ],
      "Properties": Object {
        "CapacityProviderStrategy": Array [
          Object {
            "CapacityProvider": "FARGATE",
            "Weight": 1,
          },
        ],
        "Cluster": Object {
          "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
        },
        "DeploymentConfiguration": Object {
          "MaximumPercent": 200,
          "MinimumHealthyPercent": 50,
        },
        "DeploymentController": Object {
          "Type": "CODE_DEPLOY",
        },
        "DesiredCount": 2,
        "EnableECSManagedTags": false,
        "HealthCheckGracePeriodSeconds": 60,
        "LoadBalancers": Array [
          Object {
            "ContainerName": "EcsApp",
            "ContainerPort": 80,
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEAFrontendBgEcsApp2BgBlueTGTargetGroup37AB5347",
            },
          },
        ],
        "NetworkConfiguration": Object {
          "AwsvpcConfiguration": Object {
            "AssignPublicIp": "DISABLED",
            "SecurityGroups": Array [
              Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2BgFrontAppEcsResourcesBgSg7BD1CFB8",
                  "GroupId",
                ],
              },
            ],
            "Subnets": Array [
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet1Subnet10F7BE6AE43431C8",
              },
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet2Subnet3F910288B1BC2DBC",
              },
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet3Subnet5A1AF5388272CEF2",
              },
            ],
          },
        },
        "PlatformVersion": "LATEST",
        "ServiceName": "BLEA-EcsApp2Bg-Service",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TaskDefinition": "BLEAECSBLEAECSAppBLEAEcsApp2BgServiceEcsTask626513D2",
      },
      "Type": "AWS::ECS::Service",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesFargateCpuUtilDC67D7CD": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 3,
        "Dimensions": Array [
          Object {
            "Name": "ClusterName",
            "Value": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
          },
          Object {
            "Name": "ServiceName",
            "Value": "BLEA-EcsApp2-Service",
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "CPUUtilization",
        "Namespace": "ECS",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 80,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesLog646599A8": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
        },
        "RetentionInDays": 1827,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesRepo3967CF4F": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ImageScanningConfiguration": Object {
          "ScanOnPush": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::ECR::Repository",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesRepoImageScanCompleteE2B02A8F": Object {
      "Properties": Object {
        "EventPattern": Object {
          "detail": Object {
            "repository-name": Array [
              Object {
                "Ref": "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesRepo3967CF4F",
              },
            ],
            "scan-status": Array [
              "COMPLETE",
            ],
          },
          "detail-type": Array [
            "ECR Image Scan",
          ],
          "source": Array [
            "aws.ecr",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesSg57AAF89D": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ECS/BLEA-ECSApp/BLEA-EcsApp2-FrontApp-Ecs-Resources/Sg",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesSgfromBLEAECSBLEAECSAppBLEAFrontAlbSgAlb0A251F4C8095DF4A32": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEAFrontAlbSgAlb0A251F4C:80",
        "FromPort": 80,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesSg57AAF89D",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAFrontAlbSgAlb13E16CB3",
            "GroupId",
          ],
        },
        "ToPort": 80,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucket3FA5BBAF": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucketEncryptionKeyCF37E4B4",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucketEncryptionKeyAlias26033668": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AliasName": "alias/codepipeline-bleaecsbleaecsappbleaecsapp2frontapppipeline398581ac",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucketEncryptionKeyCF37E4B4",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucketEncryptionKeyCF37E4B4": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucketPolicy4E39178C": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucket3FA5BBAF",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucket3FA5BBAF",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucket3FA5BBAF",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineB65895C6": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEAEcsApp2FrontAppPipelineRoleDefaultPolicy744A4450",
        "BLEAECSAppBLEAEcsApp2FrontAppPipelineRole18924906",
      ],
      "Properties": Object {
        "ArtifactStore": Object {
          "EncryptionKey": Object {
            "Id": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucketEncryptionKeyCF37E4B4",
                "Arn",
              ],
            },
            "Type": "KMS",
          },
          "Location": Object {
            "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucket3FA5BBAF",
          },
          "Type": "S3",
        },
        "RoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2FrontAppPipelineRole18924906",
            "Arn",
          ],
        },
        "Stages": Array [
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "S3",
                  "Version": "1",
                },
                "Configuration": Object {
                  "S3Bucket": Object {
                    "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelinePipelineSourceBucket3BB51237",
                  },
                  "S3ObjectKey": "image.zip",
                },
                "Name": "SourceBucket",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2FrontAppPipelineSourceSourceBucketCodePipelineActionRoleC1E45843",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Source",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployProject66E1959E",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "Name": "DeployProject",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployDeployProjectCodePipelineActionRole3A8FD0B2",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Deploy",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodePipeline::Pipeline",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployDeployProjectCodePipelineActionRole3A8FD0B2": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployDeployProjectCodePipelineActionRoleDefaultPolicy79BAF779": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployProject66E1959E",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployDeployProjectCodePipelineActionRoleDefaultPolicy79BAF779",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployDeployProjectCodePipelineActionRole3A8FD0B2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployProject66E1959E": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucketEncryptionKeyCF37E4B4",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "EnvironmentVariables": Array [
            Object {
              "Name": "ECS_CLUSTER",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
              },
            },
            Object {
              "Name": "ECS_SERVICE",
              "Type": "PLAINTEXT",
              "Value": "BLEA-EcsApp2-Service",
            },
            Object {
              "Name": "TARGET_GROUP_ARN",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAFrontAlbEcsApp2TGTargetGroupC64D4162",
              },
            },
            Object {
              "Name": "SECURITY_GROUP",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesSg57AAF89D",
                  "GroupId",
                ],
              },
            },
            Object {
              "Name": "SUBNET_1",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet1Subnet10F7BE6AE43431C8",
              },
            },
            Object {
              "Name": "SUBNET_2",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet2Subnet3F910288B1BC2DBC",
              },
            },
            Object {
              "Name": "SUBNET_3",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet3Subnet5A1AF5388272CEF2",
              },
            },
            Object {
              "Name": "LOG_GROUP",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesLog646599A8",
              },
            },
            Object {
              "Name": "LOG_GROUP_SERVICE_CONNECT",
              "Type": "PLAINTEXT",
              "Value": "",
            },
            Object {
              "Name": "EXECUTION_ROLE_ARN",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
                  "Arn",
                ],
              },
            },
            Object {
              "Name": "TASK_ROLE",
              "Type": "PLAINTEXT",
              "Value": "",
            },
            Object {
              "Name": "FAMILY",
              "Type": "PLAINTEXT",
              "Value": "BLEA-EcsApp2-Taskdef",
            },
            Object {
              "Name": "NAMESPACE",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonClusterDefaultServiceDiscoveryNamespace6AF83AD0",
                  "Arn",
                ],
              },
            },
          ],
          "Image": "aws/codebuild/amazonlinux2-x86_64-standard:2.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployProjectRole84DF0FDC",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"pre_build\\": {
      \\"commands\\": [
        \\"echo \\\\\\"The latest version of ecspresso is (It only shows up the log) :\\\\\\"\\",
        \\"curl -s https://api.github.com/repos/kayac/ecspresso/releases/latest | jq .tag_name\\",
        \\"curl -sL -o ecspresso-v2.0.3-linux-amd64.tar.gz https://github.com/kayac/ecspresso/releases/download/v2.0.3/ecspresso_2.0.3_linux_amd64.tar.gz\\",
        \\"tar -zxf ecspresso-v2.0.3-linux-amd64.tar.gz\\",
        \\"sudo install ecspresso /usr/local/bin/ecspresso\\",
        \\"ecspresso version\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"export IMAGE1_NAME=\`cat imagedefinitions.json | jq -r .[0].imageUri\`\\",
        \\"ls -lR\\",
        \\"ecspresso deploy --config ecspresso.yml\\",
        \\"./autoscale.sh\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployProjectRole84DF0FDC": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codebuild.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployProjectRoleDefaultPolicy6D68BA3D": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:ap-northeast-1:410364260571:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployProject66E1959E",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:ap-northeast-1:410364260571:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployProject66E1959E",
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases",
                "codebuild:BatchPutCodeCoverages",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codebuild:ap-northeast-1:410364260571:report-group/",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployProject66E1959E",
                    },
                    "-*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "ecs:RegisterTaskDefinition",
                "ecs:ListTaskDefinitions",
                "ecs:DescribeTaskDefinition",
                "ecs:CreateService",
                "ecs:UpdateService",
                "ecs:DescribeServices",
                "application-autoscaling:DescribeScalableTargets",
                "application-autoscaling:RegisterScalableTarget",
                "application-autoscaling:DeregisterScalableTarget",
                "application-autoscaling:PutScalingPolicy",
                "application-autoscaling:DeleteScalingPolicy",
                "servicediscovery:GetNamespace",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "iam:PassRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucket3FA5BBAF",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucket3FA5BBAF",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucketEncryptionKeyCF37E4B4",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucketEncryptionKeyCF37E4B4",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployProjectRoleDefaultPolicy6D68BA3D",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployProjectRole84DF0FDC",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelinePipelineSourceBucket3BB51237": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineRole18924906": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codepipeline.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineRoleDefaultPolicy744A4450": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucket3FA5BBAF",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucket3FA5BBAF",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucketEncryptionKeyCF37E4B4",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2FrontAppPipelineSourceSourceBucketCodePipelineActionRoleC1E45843",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2FrontAppPipelineDeployDeployProjectCodePipelineActionRole3A8FD0B2",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsApp2FrontAppPipelineRoleDefaultPolicy744A4450",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelineRole18924906",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineSourceSourceBucketCodePipelineActionRoleC1E45843": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsApp2FrontAppPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicy4E295590": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2FrontAppPipelinePipelineSourceBucket3BB51237",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsApp2FrontAppPipelinePipelineSourceBucket3BB51237",
                          "Arn",
                        ],
                      },
                      "/image.zip",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucket3FA5BBAF",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucket3FA5BBAF",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Decrypt",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsApp2FrontAppPipelineArtifactsBucketEncryptionKeyCF37E4B4",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsApp2FrontAppPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicy4E295590",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsApp2FrontAppPipelineSourceSourceBucketCodePipelineActionRoleC1E45843",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipeline279C4F55": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineRoleDefaultPolicyB95737F7",
        "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineRole74C36DC4",
      ],
      "Properties": Object {
        "ArtifactStore": Object {
          "EncryptionKey": Object {
            "Id": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketEncryptionKey21E06BE3",
                "Arn",
              ],
            },
            "Type": "KMS",
          },
          "Location": Object {
            "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketB57CB150",
          },
          "Type": "S3",
        },
        "RoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineRole74C36DC4",
            "Arn",
          ],
        },
        "Stages": Array [
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "S3",
                  "Version": "1",
                },
                "Configuration": Object {
                  "S3Bucket": Object {
                    "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelinePipelineSourceBucketE7433C21",
                  },
                  "S3ObjectKey": "image.zip",
                },
                "Name": "SourceBucket",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleA910E97B",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Source",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CodeDeployToECS",
                  "Version": "1",
                },
                "Configuration": Object {
                  "AppSpecTemplateArtifact": "Artifact_Source_SourceBucket",
                  "AppSpecTemplatePath": "appspec.yaml",
                  "ApplicationName": Object {
                    "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineEcsDeployApplicationDAF37CAE",
                  },
                  "DeploymentGroupName": Object {
                    "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineBlueGreenDeploy987A0990",
                  },
                  "Image1ArtifactName": "Artifact_Source_SourceBucket",
                  "Image1ContainerName": "IMAGE1_NAME",
                  "TaskDefinitionTemplateArtifact": "Artifact_Source_SourceBucket",
                  "TaskDefinitionTemplatePath": "taskdef.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "Name": "ECSBlueGreenDeploy",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleFBD90B25",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Deploy",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodePipeline::Pipeline",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketB57CB150": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketEncryptionKey21E06BE3",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketEncryptionKey21E06BE3": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketEncryptionKeyAliasE2C3D877": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AliasName": "alias/codepipeline-bleaecsbleaecsappbleaecsappbgfrontappbgpipeline5417df3a",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketEncryptionKey21E06BE3",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketPolicy3CCDCB58": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketB57CB150",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketB57CB150",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketB57CB150",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineBlueGreenDeploy987A0990": Object {
      "Properties": Object {
        "ApplicationName": Object {
          "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineEcsDeployApplicationDAF37CAE",
        },
        "AutoRollbackConfiguration": Object {
          "Enabled": true,
          "Events": Array [
            "DEPLOYMENT_FAILURE",
          ],
        },
        "BlueGreenDeploymentConfiguration": Object {
          "DeploymentReadyOption": Object {
            "ActionOnTimeout": "STOP_DEPLOYMENT",
            "WaitTimeInMinutes": 60,
          },
          "TerminateBlueInstancesOnDeploymentSuccess": Object {
            "Action": "TERMINATE",
            "TerminationWaitTimeInMinutes": 60,
          },
        },
        "DeploymentConfigName": "CodeDeployDefault.ECSAllAtOnce",
        "DeploymentStyle": Object {
          "DeploymentOption": "WITH_TRAFFIC_CONTROL",
          "DeploymentType": "BLUE_GREEN",
        },
        "ECSServices": Array [
          Object {
            "ClusterName": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
            "ServiceName": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsAppBgServiceFargateService88078805",
                "Name",
              ],
            },
          },
        ],
        "LoadBalancerInfo": Object {
          "TargetGroupPairInfoList": Array [
            Object {
              "ProdTrafficRoute": Object {
                "ListenerArns": Array [
                  Object {
                    "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                  },
                ],
              },
              "TargetGroups": Array [
                Object {
                  "Name": Object {
                    "Fn::GetAtt": Array [
                      "BLEAECSAppBLEAFrontendBgEcsAppBgBlueTGTargetGroupE1B547D0",
                      "TargetGroupName",
                    ],
                  },
                },
                Object {
                  "Name": Object {
                    "Fn::GetAtt": Array [
                      "BLEAECSAppBLEAFrontendBgEcsAppBgGreenTGTargetGroup32788C5B",
                      "TargetGroupName",
                    ],
                  },
                },
              ],
              "TestTrafficRoute": Object {
                "ListenerArns": Array [
                  Object {
                    "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                  },
                ],
              },
            },
          ],
        },
        "ServiceRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineBlueGreenDeployServiceRoleA51828CA",
            "Arn",
          ],
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeDeploy::DeploymentGroup",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineBlueGreenDeployServiceRoleA51828CA": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codedeploy.ap-northeast-1.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/AWSCodeDeployRoleForECS",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleDefaultPolicy94C2F0A2": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codedeploy:GetApplication",
                "codedeploy:GetApplicationRevision",
                "codedeploy:RegisterApplicationRevision",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:application:",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineEcsDeployApplicationDAF37CAE",
                    },
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "codedeploy:CreateDeployment",
                "codedeploy:GetDeployment",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:deploymentgroup:",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineEcsDeployApplicationDAF37CAE",
                    },
                    "/",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineBlueGreenDeploy987A0990",
                    },
                  ],
                ],
              },
            },
            Object {
              "Action": "codedeploy:GetDeploymentConfig",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:deploymentconfig:CodeDeployDefault.ECSAllAtOnce",
                  ],
                ],
              },
            },
            Object {
              "Action": "ecs:RegisterTaskDefinition",
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "iam:PassRole",
              "Condition": Object {
                "StringEqualsIfExists": Object {
                  "iam:PassedToService": Array [
                    "ecs-tasks.amazonaws.com",
                  ],
                },
              },
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketB57CB150",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketB57CB150",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketEncryptionKey21E06BE3",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleDefaultPolicy94C2F0A2",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleFBD90B25",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleFBD90B25": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineEcsDeployApplicationDAF37CAE": Object {
      "Properties": Object {
        "ComputePlatform": "ECS",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeDeploy::Application",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelinePipelineSourceBucketE7433C21": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineRole74C36DC4": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codepipeline.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineRoleDefaultPolicyB95737F7": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketB57CB150",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketB57CB150",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketEncryptionKey21E06BE3",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleA910E97B",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleFBD90B25",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineRoleDefaultPolicyB95737F7",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineRole74C36DC4",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleA910E97B": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicy805388FC": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelinePipelineSourceBucketE7433C21",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelinePipelineSourceBucketE7433C21",
                          "Arn",
                        ],
                      },
                      "/image.zip",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketB57CB150",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketB57CB150",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Decrypt",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineArtifactsBucketEncryptionKey21E06BE3",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicy805388FC",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppBgPipelineSourceSourceBucketCodePipelineActionRoleA910E97B",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgFargateCpuUtil83231480": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 3,
        "Dimensions": Array [
          Object {
            "Name": "ClusterName",
            "Value": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
          },
          Object {
            "Name": "ServiceName",
            "Value": "BLEA-EcsAppBg-Service",
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "CPUUtilization",
        "Namespace": "ECS",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 80,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgLog6F504E86": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
        },
        "RetentionInDays": 1827,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgRepoD883BC43": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ImageScanningConfiguration": Object {
          "ScanOnPush": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::ECR::Repository",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgRepoImageScanComplete3C742BD2": Object {
      "Properties": Object {
        "EventPattern": Object {
          "detail": Object {
            "repository-name": Array [
              Object {
                "Ref": "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgRepoD883BC43",
              },
            ],
            "scan-status": Array [
              "COMPLETE",
            ],
          },
          "detail-type": Array [
            "ECR Image Scan",
          ],
          "source": Array [
            "aws.ecr",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgSg9727DE7E": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ECS/BLEA-ECSApp/BLEA-EcsAppBg-FrontApp-Ecs-Resources-Bg/Sg",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgSgfromBLEAECSBLEAECSAppBLEAFrontendBgSgAlbCDC703118099382D6C": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEAFrontendBgSgAlbCDC70311:80",
        "FromPort": 80,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgSg9727DE7E",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAFrontendBgSgAlb2FBDC303",
            "GroupId",
          ],
        },
        "ToPort": 80,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsAppBgServiceEcsTaskD502DB42": Object {
      "Properties": Object {
        "ContainerDefinitions": Array [
          Object {
            "Environment": Array [
              Object {
                "Name": "ENVIRONMENT_VARIABLE_SAMPLE_KEY",
                "Value": "Environment Variable Sample Value",
              },
            ],
            "Essential": true,
            "Image": "public.ecr.aws/nginx/nginx:stable",
            "Name": "EcsApp",
            "PortMappings": Array [
              Object {
                "ContainerPort": 80,
                "Protocol": "tcp",
              },
            ],
          },
        ],
        "Cpu": "256",
        "ExecutionRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
            "Arn",
          ],
        },
        "Family": "BLEAECSBLEAECSAppBLEAEcsAppBgServiceEcsTaskA15F8411",
        "Memory": "512",
        "NetworkMode": "awsvpc",
        "RequiresCompatibilities": Array [
          "FARGATE",
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TaskRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppBgServiceEcsTaskTaskRoleB51FABB3",
            "Arn",
          ],
        },
      },
      "Type": "AWS::ECS::TaskDefinition",
    },
    "BLEAECSAppBLEAEcsAppBgServiceEcsTaskTaskRoleB51FABB3": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "ecs-tasks.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsAppBgServiceFargateService88078805": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEAEcsAppBgServiceEcsTaskD502DB42",
        "BLEAECSAppBLEAEcsAppBgServiceEcsTaskTaskRoleB51FABB3",
        "BLEAECSAppBLEAFrontendBgAlbBgappBluepathAddTargetRuleF66D6C5A",
        "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
      ],
      "Properties": Object {
        "CapacityProviderStrategy": Array [
          Object {
            "CapacityProvider": "FARGATE",
            "Weight": 1,
          },
        ],
        "Cluster": Object {
          "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
        },
        "DeploymentConfiguration": Object {
          "MaximumPercent": 200,
          "MinimumHealthyPercent": 50,
        },
        "DeploymentController": Object {
          "Type": "CODE_DEPLOY",
        },
        "DesiredCount": 2,
        "EnableECSManagedTags": false,
        "HealthCheckGracePeriodSeconds": 60,
        "LoadBalancers": Array [
          Object {
            "ContainerName": "EcsApp",
            "ContainerPort": 80,
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEAFrontendBgEcsAppBgBlueTGTargetGroupE1B547D0",
            },
          },
        ],
        "NetworkConfiguration": Object {
          "AwsvpcConfiguration": Object {
            "AssignPublicIp": "DISABLED",
            "SecurityGroups": Array [
              Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppBgFrontAppEcsResourcesBgSg9727DE7E",
                  "GroupId",
                ],
              },
            ],
            "Subnets": Array [
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet1Subnet10F7BE6AE43431C8",
              },
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet2Subnet3F910288B1BC2DBC",
              },
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet3Subnet5A1AF5388272CEF2",
              },
            ],
          },
        },
        "PlatformVersion": "LATEST",
        "ServiceName": "BLEA-EcsAppBg-Service",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TaskDefinition": "BLEAECSBLEAECSAppBLEAEcsAppBgServiceEcsTaskA15F8411",
      },
      "Type": "AWS::ECS::Service",
    },
    "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesFargateCpuUtil69F68BA7": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 3,
        "Dimensions": Array [
          Object {
            "Name": "ClusterName",
            "Value": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
          },
          Object {
            "Name": "ServiceName",
            "Value": "BLEA-EcsApp-Service",
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "CPUUtilization",
        "Namespace": "ECS",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 80,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesLogC9117B5E": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
        },
        "RetentionInDays": 1827,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesRepo187ED7FD": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ImageScanningConfiguration": Object {
          "ScanOnPush": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::ECR::Repository",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesRepoImageScanCompleteB0C8D1FB": Object {
      "Properties": Object {
        "EventPattern": Object {
          "detail": Object {
            "repository-name": Array [
              Object {
                "Ref": "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesRepo187ED7FD",
              },
            ],
            "scan-status": Array [
              "COMPLETE",
            ],
          },
          "detail-type": Array [
            "ECR Image Scan",
          ],
          "source": Array [
            "aws.ecr",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesSg2E0B6338": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ECS/BLEA-ECSApp/BLEA-EcsApp-FrontApp-Ecs-Resources/Sg",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesSgfromBLEAECSBLEAECSAppBLEAFrontAlbSgAlb0A251F4C8068198A23": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEAFrontAlbSgAlb0A251F4C:80",
        "FromPort": 80,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesSg2E0B6338",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAFrontAlbSgAlb13E16CB3",
            "GroupId",
          ],
        },
        "ToPort": 80,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucket9C2EB976": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucketEncryptionKey0B198ACF",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucketEncryptionKey0B198ACF": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucketEncryptionKeyAliasA6B4B9E6": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AliasName": "alias/codepipeline-bleaecsbleaecsappbleaecsappfrontapppipelined9ed84ee",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucketEncryptionKey0B198ACF",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucketPolicy3AFFBA62": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucket9C2EB976",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucket9C2EB976",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucket9C2EB976",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployDeployProjectCodePipelineActionRole947AE476": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployDeployProjectCodePipelineActionRoleDefaultPolicyEC6869CA": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployProjectA71ED506",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployDeployProjectCodePipelineActionRoleDefaultPolicyEC6869CA",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployDeployProjectCodePipelineActionRole947AE476",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployProjectA71ED506": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucketEncryptionKey0B198ACF",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "EnvironmentVariables": Array [
            Object {
              "Name": "ECS_CLUSTER",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
              },
            },
            Object {
              "Name": "ECS_SERVICE",
              "Type": "PLAINTEXT",
              "Value": "BLEA-EcsApp-Service",
            },
            Object {
              "Name": "TARGET_GROUP_ARN",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAFrontAlbEcsAppTGTargetGroupBA6D36C2",
              },
            },
            Object {
              "Name": "SECURITY_GROUP",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesSg2E0B6338",
                  "GroupId",
                ],
              },
            },
            Object {
              "Name": "SUBNET_1",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet1Subnet10F7BE6AE43431C8",
              },
            },
            Object {
              "Name": "SUBNET_2",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet2Subnet3F910288B1BC2DBC",
              },
            },
            Object {
              "Name": "SUBNET_3",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet3Subnet5A1AF5388272CEF2",
              },
            },
            Object {
              "Name": "LOG_GROUP",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesLogC9117B5E",
              },
            },
            Object {
              "Name": "LOG_GROUP_SERVICE_CONNECT",
              "Type": "PLAINTEXT",
              "Value": "",
            },
            Object {
              "Name": "EXECUTION_ROLE_ARN",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
                  "Arn",
                ],
              },
            },
            Object {
              "Name": "TASK_ROLE",
              "Type": "PLAINTEXT",
              "Value": "",
            },
            Object {
              "Name": "FAMILY",
              "Type": "PLAINTEXT",
              "Value": "BLEA-EcsApp-Taskdef",
            },
            Object {
              "Name": "NAMESPACE",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonClusterDefaultServiceDiscoveryNamespace6AF83AD0",
                  "Arn",
                ],
              },
            },
          ],
          "Image": "aws/codebuild/amazonlinux2-x86_64-standard:2.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployProjectRoleE9F81481",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"pre_build\\": {
      \\"commands\\": [
        \\"echo \\\\\\"The latest version of ecspresso is (It only shows up the log) :\\\\\\"\\",
        \\"curl -s https://api.github.com/repos/kayac/ecspresso/releases/latest | jq .tag_name\\",
        \\"curl -sL -o ecspresso-v2.0.3-linux-amd64.tar.gz https://github.com/kayac/ecspresso/releases/download/v2.0.3/ecspresso_2.0.3_linux_amd64.tar.gz\\",
        \\"tar -zxf ecspresso-v2.0.3-linux-amd64.tar.gz\\",
        \\"sudo install ecspresso /usr/local/bin/ecspresso\\",
        \\"ecspresso version\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"export IMAGE1_NAME=\`cat imagedefinitions.json | jq -r .[0].imageUri\`\\",
        \\"ls -lR\\",
        \\"ecspresso deploy --config ecspresso.yml\\",
        \\"./autoscale.sh\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployProjectRoleDefaultPolicy9A655273": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:ap-northeast-1:410364260571:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployProjectA71ED506",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:ap-northeast-1:410364260571:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployProjectA71ED506",
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases",
                "codebuild:BatchPutCodeCoverages",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codebuild:ap-northeast-1:410364260571:report-group/",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployProjectA71ED506",
                    },
                    "-*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "ecs:RegisterTaskDefinition",
                "ecs:ListTaskDefinitions",
                "ecs:DescribeTaskDefinition",
                "ecs:CreateService",
                "ecs:UpdateService",
                "ecs:DescribeServices",
                "application-autoscaling:DescribeScalableTargets",
                "application-autoscaling:RegisterScalableTarget",
                "application-autoscaling:DeregisterScalableTarget",
                "application-autoscaling:PutScalingPolicy",
                "application-autoscaling:DeleteScalingPolicy",
                "servicediscovery:GetNamespace",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "iam:PassRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucket9C2EB976",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucket9C2EB976",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucketEncryptionKey0B198ACF",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucketEncryptionKey0B198ACF",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployProjectRoleDefaultPolicy9A655273",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployProjectRoleE9F81481",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployProjectRoleE9F81481": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codebuild.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineE3400CF1": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEAEcsAppFrontAppPipelineRoleDefaultPolicy5A12D4B9",
        "BLEAECSAppBLEAEcsAppFrontAppPipelineRole39A09A0F",
      ],
      "Properties": Object {
        "ArtifactStore": Object {
          "EncryptionKey": Object {
            "Id": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucketEncryptionKey0B198ACF",
                "Arn",
              ],
            },
            "Type": "KMS",
          },
          "Location": Object {
            "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucket9C2EB976",
          },
          "Type": "S3",
        },
        "RoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppFrontAppPipelineRole39A09A0F",
            "Arn",
          ],
        },
        "Stages": Array [
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "S3",
                  "Version": "1",
                },
                "Configuration": Object {
                  "S3Bucket": Object {
                    "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelinePipelineSourceBucketCC0F879B",
                  },
                  "S3ObjectKey": "image.zip",
                },
                "Name": "SourceBucket",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppFrontAppPipelineSourceSourceBucketCodePipelineActionRole29177B7E",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Source",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployProjectA71ED506",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "Name": "DeployProject",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployDeployProjectCodePipelineActionRole947AE476",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Deploy",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodePipeline::Pipeline",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelinePipelineSourceBucketCC0F879B": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineRole39A09A0F": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codepipeline.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineRoleDefaultPolicy5A12D4B9": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucket9C2EB976",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucket9C2EB976",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucketEncryptionKey0B198ACF",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppFrontAppPipelineSourceSourceBucketCodePipelineActionRole29177B7E",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppFrontAppPipelineDeployDeployProjectCodePipelineActionRole947AE476",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsAppFrontAppPipelineRoleDefaultPolicy5A12D4B9",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelineRole39A09A0F",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineSourceSourceBucketCodePipelineActionRole29177B7E": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsAppFrontAppPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicyE1AF7941": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppFrontAppPipelinePipelineSourceBucketCC0F879B",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsAppFrontAppPipelinePipelineSourceBucketCC0F879B",
                          "Arn",
                        ],
                      },
                      "/image.zip",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucket9C2EB976",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucket9C2EB976",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Decrypt",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsAppFrontAppPipelineArtifactsBucketEncryptionKey0B198ACF",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsAppFrontAppPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicyE1AF7941",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsAppFrontAppPipelineSourceSourceBucketCodePipelineActionRole29177B7E",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesFargateCpuUtilC95CC6F5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 3,
        "Dimensions": Array [
          Object {
            "Name": "ClusterName",
            "Value": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
          },
          Object {
            "Name": "ServiceName",
            "Value": "BLEA-EcsBackend2-Service",
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "CPUUtilization",
        "Namespace": "ECS",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 80,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesLog4BC7D22E": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
        },
        "RetentionInDays": 1827,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesLogforSC1D828615": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
        },
        "RetentionInDays": 1827,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesRepo25F5C2BD": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ImageScanningConfiguration": Object {
          "ScanOnPush": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::ECR::Repository",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesRepoImageScanCompleteCB3B27CC": Object {
      "Properties": Object {
        "EventPattern": Object {
          "detail": Object {
            "repository-name": Array [
              Object {
                "Ref": "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesRepo25F5C2BD",
              },
            ],
            "scan-status": Array [
              "COMPLETE",
            ],
          },
          "detail-type": Array [
            "ECR Image Scan",
          ],
          "source": Array [
            "aws.ecr",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesSgB757C7A6": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ECS/BLEA-ECSApp/BLEA-EcsBackend2-BackApp-Ecs-Resources/Sg",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesSgfromBLEAECSBLEAECSAppBLEAEcsApp2FrontAppEcsResourcesSg0562C97B8080FBF99E5D": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEAEcsApp2FrontAppEcsResourcesSg0562C97B:8080",
        "FromPort": 8080,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesSgB757C7A6",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesSg57AAF89D",
            "GroupId",
          ],
        },
        "ToPort": 8080,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesSgfromBLEAECSBLEAECSAppBLEAEcsAppFrontAppEcsResourcesSgAA83CB448080CDE13CB7": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEAEcsAppFrontAppEcsResourcesSgAA83CB44:8080",
        "FromPort": 8080,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesSgB757C7A6",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesSg2E0B6338",
            "GroupId",
          ],
        },
        "ToPort": 8080,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipeline04C0C87C": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEAEcsBackend2BackAppPipelineRoleDefaultPolicyAD9702E7",
        "BLEAECSAppBLEAEcsBackend2BackAppPipelineRoleA9E690AB",
      ],
      "Properties": Object {
        "ArtifactStore": Object {
          "EncryptionKey": Object {
            "Id": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucketEncryptionKey25354D22",
                "Arn",
              ],
            },
            "Type": "KMS",
          },
          "Location": Object {
            "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucket4AF43F77",
          },
          "Type": "S3",
        },
        "RoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BackAppPipelineRoleA9E690AB",
            "Arn",
          ],
        },
        "Stages": Array [
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "S3",
                  "Version": "1",
                },
                "Configuration": Object {
                  "S3Bucket": Object {
                    "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelinePipelineSourceBucket8E060504",
                  },
                  "S3ObjectKey": "image.zip",
                },
                "Name": "SourceBucket",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BackAppPipelineSourceSourceBucketCodePipelineActionRole07E183FC",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Source",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployProjectA2E204F0",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "Name": "DeployProject",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployDeployProjectCodePipelineActionRole72DB9421",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Deploy",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodePipeline::Pipeline",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucket4AF43F77": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucketEncryptionKey25354D22",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucketEncryptionKey25354D22": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucketEncryptionKeyAliasB9653915": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AliasName": "alias/codepipeline-bleaecsbleaecsappbleaecsbackend2backapppipelinec97eb14e",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucketEncryptionKey25354D22",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucketPolicy7559C78E": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucket4AF43F77",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucket4AF43F77",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucket4AF43F77",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployDeployProjectCodePipelineActionRole72DB9421": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployDeployProjectCodePipelineActionRoleDefaultPolicy6A8D981C": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployProjectA2E204F0",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployDeployProjectCodePipelineActionRoleDefaultPolicy6A8D981C",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployDeployProjectCodePipelineActionRole72DB9421",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployProjectA2E204F0": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucketEncryptionKey25354D22",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "EnvironmentVariables": Array [
            Object {
              "Name": "ECS_CLUSTER",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
              },
            },
            Object {
              "Name": "ECS_SERVICE",
              "Type": "PLAINTEXT",
              "Value": "BLEA-EcsBackend2-Service",
            },
            Object {
              "Name": "TARGET_GROUP_ARN",
              "Type": "PLAINTEXT",
              "Value": "",
            },
            Object {
              "Name": "SECURITY_GROUP",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesSgB757C7A6",
                  "GroupId",
                ],
              },
            },
            Object {
              "Name": "SUBNET_1",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet1Subnet10F7BE6AE43431C8",
              },
            },
            Object {
              "Name": "SUBNET_2",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet2Subnet3F910288B1BC2DBC",
              },
            },
            Object {
              "Name": "SUBNET_3",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet3Subnet5A1AF5388272CEF2",
              },
            },
            Object {
              "Name": "LOG_GROUP",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesLog4BC7D22E",
              },
            },
            Object {
              "Name": "LOG_GROUP_SERVICE_CONNECT",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAEcsBackend2BackAppEcsResourcesLogforSC1D828615",
              },
            },
            Object {
              "Name": "EXECUTION_ROLE_ARN",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
                  "Arn",
                ],
              },
            },
            Object {
              "Name": "TASK_ROLE",
              "Type": "PLAINTEXT",
              "Value": "",
            },
            Object {
              "Name": "FAMILY",
              "Type": "PLAINTEXT",
              "Value": "BLEA-EcsBackend2-Taskdef",
            },
            Object {
              "Name": "NAMESPACE",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonClusterDefaultServiceDiscoveryNamespace6AF83AD0",
                  "Arn",
                ],
              },
            },
          ],
          "Image": "aws/codebuild/amazonlinux2-x86_64-standard:2.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployProjectRoleCE41C4BC",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"pre_build\\": {
      \\"commands\\": [
        \\"echo \\\\\\"The latest version of ecspresso is (It only shows up the log) :\\\\\\"\\",
        \\"curl -s https://api.github.com/repos/kayac/ecspresso/releases/latest | jq .tag_name\\",
        \\"curl -sL -o ecspresso-v2.0.3-linux-amd64.tar.gz https://github.com/kayac/ecspresso/releases/download/v2.0.3/ecspresso_2.0.3_linux_amd64.tar.gz\\",
        \\"tar -zxf ecspresso-v2.0.3-linux-amd64.tar.gz\\",
        \\"sudo install ecspresso /usr/local/bin/ecspresso\\",
        \\"ecspresso version\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"export IMAGE1_NAME=\`cat imagedefinitions.json | jq -r .[0].imageUri\`\\",
        \\"ls -lR\\",
        \\"ecspresso deploy --config ecspresso.yml\\",
        \\"./autoscale.sh\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployProjectRoleCE41C4BC": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codebuild.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployProjectRoleDefaultPolicy2BEB96C7": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:ap-northeast-1:410364260571:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployProjectA2E204F0",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:ap-northeast-1:410364260571:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployProjectA2E204F0",
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases",
                "codebuild:BatchPutCodeCoverages",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codebuild:ap-northeast-1:410364260571:report-group/",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployProjectA2E204F0",
                    },
                    "-*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "ecs:RegisterTaskDefinition",
                "ecs:ListTaskDefinitions",
                "ecs:DescribeTaskDefinition",
                "ecs:CreateService",
                "ecs:UpdateService",
                "ecs:DescribeServices",
                "application-autoscaling:DescribeScalableTargets",
                "application-autoscaling:RegisterScalableTarget",
                "application-autoscaling:DeregisterScalableTarget",
                "application-autoscaling:PutScalingPolicy",
                "application-autoscaling:DeleteScalingPolicy",
                "servicediscovery:GetNamespace",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "iam:PassRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucket4AF43F77",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucket4AF43F77",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucketEncryptionKey25354D22",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucketEncryptionKey25354D22",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployProjectRoleDefaultPolicy2BEB96C7",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployProjectRoleCE41C4BC",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelinePipelineSourceBucket8E060504": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineRoleA9E690AB": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codepipeline.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineRoleDefaultPolicyAD9702E7": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucket4AF43F77",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucket4AF43F77",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucketEncryptionKey25354D22",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BackAppPipelineSourceSourceBucketCodePipelineActionRole07E183FC",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BackAppPipelineDeployDeployProjectCodePipelineActionRole72DB9421",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackend2BackAppPipelineRoleDefaultPolicyAD9702E7",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelineRoleA9E690AB",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineSourceSourceBucketCodePipelineActionRole07E183FC": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackend2BackAppPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicyF8EFF1A0": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BackAppPipelinePipelineSourceBucket8E060504",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackend2BackAppPipelinePipelineSourceBucket8E060504",
                          "Arn",
                        ],
                      },
                      "/image.zip",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucket4AF43F77",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucket4AF43F77",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Decrypt",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BackAppPipelineArtifactsBucketEncryptionKey25354D22",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackend2BackAppPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicyF8EFF1A0",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackend2BackAppPipelineSourceSourceBucketCodePipelineActionRole07E183FC",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipeline7AEE08B2": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineRoleDefaultPolicyE87848CB",
        "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineRoleA8D0A969",
      ],
      "Properties": Object {
        "ArtifactStore": Object {
          "EncryptionKey": Object {
            "Id": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketEncryptionKey74C81A98",
                "Arn",
              ],
            },
            "Type": "KMS",
          },
          "Location": Object {
            "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketBC7E6A5F",
          },
          "Type": "S3",
        },
        "RoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineRoleA8D0A969",
            "Arn",
          ],
        },
        "Stages": Array [
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "S3",
                  "Version": "1",
                },
                "Configuration": Object {
                  "S3Bucket": Object {
                    "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelinePipelineSourceBucketB2726FB7",
                  },
                  "S3ObjectKey": "image.zip",
                },
                "Name": "SourceBucket",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleBA5173A6",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Source",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CodeDeployToECS",
                  "Version": "1",
                },
                "Configuration": Object {
                  "AppSpecTemplateArtifact": "Artifact_Source_SourceBucket",
                  "AppSpecTemplatePath": "appspec.yaml",
                  "ApplicationName": Object {
                    "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineEcsDeployApplicationD9FCADE1",
                  },
                  "DeploymentGroupName": Object {
                    "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineBlueGreenDeploy241FC239",
                  },
                  "Image1ArtifactName": "Artifact_Source_SourceBucket",
                  "Image1ContainerName": "IMAGE1_NAME",
                  "TaskDefinitionTemplateArtifact": "Artifact_Source_SourceBucket",
                  "TaskDefinitionTemplatePath": "taskdef.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "Name": "ECSBlueGreenDeploy",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRole573C7063",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Deploy",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodePipeline::Pipeline",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketBC7E6A5F": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketEncryptionKey74C81A98",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketEncryptionKey74C81A98": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketEncryptionKeyAlias75EFA85D": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AliasName": "alias/codepipeline-bleaecsbleaecsappbleaecsbackend2bgbackappbgpipelinef85afc4b",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketEncryptionKey74C81A98",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketPolicyE4462094": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketBC7E6A5F",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketBC7E6A5F",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketBC7E6A5F",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineBlueGreenDeploy241FC239": Object {
      "Properties": Object {
        "ApplicationName": Object {
          "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineEcsDeployApplicationD9FCADE1",
        },
        "AutoRollbackConfiguration": Object {
          "Enabled": true,
          "Events": Array [
            "DEPLOYMENT_FAILURE",
          ],
        },
        "BlueGreenDeploymentConfiguration": Object {
          "DeploymentReadyOption": Object {
            "ActionOnTimeout": "STOP_DEPLOYMENT",
            "WaitTimeInMinutes": 60,
          },
          "TerminateBlueInstancesOnDeploymentSuccess": Object {
            "Action": "TERMINATE",
            "TerminationWaitTimeInMinutes": 60,
          },
        },
        "DeploymentConfigName": "CodeDeployDefault.ECSAllAtOnce",
        "DeploymentStyle": Object {
          "DeploymentOption": "WITH_TRAFFIC_CONTROL",
          "DeploymentType": "BLUE_GREEN",
        },
        "ECSServices": Array [
          Object {
            "ClusterName": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
            "ServiceName": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsBackend2BgServiceFargateService9D07B14D",
                "Name",
              ],
            },
          },
        ],
        "LoadBalancerInfo": Object {
          "TargetGroupPairInfoList": Array [
            Object {
              "ProdTrafficRoute": Object {
                "ListenerArns": Array [
                  Object {
                    "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                  },
                ],
              },
              "TargetGroups": Array [
                Object {
                  "Name": Object {
                    "Fn::GetAtt": Array [
                      "BLEAECSAppBLEABackendBgEcsBackend2BgBlueTGTargetGroup602A3283",
                      "TargetGroupName",
                    ],
                  },
                },
                Object {
                  "Name": Object {
                    "Fn::GetAtt": Array [
                      "BLEAECSAppBLEABackendBgEcsBackend2BgGreenTGTargetGroupEF36DFC1",
                      "TargetGroupName",
                    ],
                  },
                },
              ],
              "TestTrafficRoute": Object {
                "ListenerArns": Array [
                  Object {
                    "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                  },
                ],
              },
            },
          ],
        },
        "ServiceRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineBlueGreenDeployServiceRole4D4AC49C",
            "Arn",
          ],
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeDeploy::DeploymentGroup",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineBlueGreenDeployServiceRole4D4AC49C": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codedeploy.ap-northeast-1.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/AWSCodeDeployRoleForECS",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRole573C7063": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleDefaultPolicy6FA5187B": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codedeploy:GetApplication",
                "codedeploy:GetApplicationRevision",
                "codedeploy:RegisterApplicationRevision",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:application:",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineEcsDeployApplicationD9FCADE1",
                    },
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "codedeploy:CreateDeployment",
                "codedeploy:GetDeployment",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:deploymentgroup:",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineEcsDeployApplicationD9FCADE1",
                    },
                    "/",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineBlueGreenDeploy241FC239",
                    },
                  ],
                ],
              },
            },
            Object {
              "Action": "codedeploy:GetDeploymentConfig",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:deploymentconfig:CodeDeployDefault.ECSAllAtOnce",
                  ],
                ],
              },
            },
            Object {
              "Action": "ecs:RegisterTaskDefinition",
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "iam:PassRole",
              "Condition": Object {
                "StringEqualsIfExists": Object {
                  "iam:PassedToService": Array [
                    "ecs-tasks.amazonaws.com",
                  ],
                },
              },
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketBC7E6A5F",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketBC7E6A5F",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketEncryptionKey74C81A98",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleDefaultPolicy6FA5187B",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRole573C7063",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineEcsDeployApplicationD9FCADE1": Object {
      "Properties": Object {
        "ComputePlatform": "ECS",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeDeploy::Application",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelinePipelineSourceBucketB2726FB7": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineRoleA8D0A969": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codepipeline.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineRoleDefaultPolicyE87848CB": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketBC7E6A5F",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketBC7E6A5F",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketEncryptionKey74C81A98",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleBA5173A6",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRole573C7063",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineRoleDefaultPolicyE87848CB",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineRoleA8D0A969",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleBA5173A6": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicyD633F47B": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelinePipelineSourceBucketB2726FB7",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelinePipelineSourceBucketB2726FB7",
                          "Arn",
                        ],
                      },
                      "/image.zip",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketBC7E6A5F",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketBC7E6A5F",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Decrypt",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineArtifactsBucketEncryptionKey74C81A98",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicyD633F47B",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleBA5173A6",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgFargateCpuUtil81DED04F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 3,
        "Dimensions": Array [
          Object {
            "Name": "ClusterName",
            "Value": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
          },
          Object {
            "Name": "ServiceName",
            "Value": "BLEA-EcsBackend2Bg-Service",
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "CPUUtilization",
        "Namespace": "ECS",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 80,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgLog189E2D4E": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
        },
        "RetentionInDays": 1827,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgRepo0C7B4B1E": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ImageScanningConfiguration": Object {
          "ScanOnPush": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::ECR::Repository",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgRepoImageScanComplete3FB1F9D5": Object {
      "Properties": Object {
        "EventPattern": Object {
          "detail": Object {
            "repository-name": Array [
              Object {
                "Ref": "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgRepo0C7B4B1E",
              },
            ],
            "scan-status": Array [
              "COMPLETE",
            ],
          },
          "detail-type": Array [
            "ECR Image Scan",
          ],
          "source": Array [
            "aws.ecr",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgSgBF57A36C": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ECS/BLEA-ECSApp/BLEA-EcsBackend2Bg-BackApp-Ecs-Resources-Bg/Sg",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgSgfromBLEAECSBLEAECSAppBLEABackendBgSgAlb32DB00FD8013D15197": Object {
      "Properties": Object {
        "Description": "Load balancer to target",
        "FromPort": 80,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgSgBF57A36C",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEABackendBgSgAlb18538169",
            "GroupId",
          ],
        },
        "ToPort": 80,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgSgfromBLEAECSBLEAECSAppBLEABackendBgSgAlb32DB00FD80804FB49D07": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEABackendBgSgAlb32DB00FD:8080",
        "FromPort": 8080,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgSgBF57A36C",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEABackendBgSgAlb18538169",
            "GroupId",
          ],
        },
        "ToPort": 8080,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsBackend2BgServiceEcsTask807F687D": Object {
      "Properties": Object {
        "ContainerDefinitions": Array [
          Object {
            "Environment": Array [
              Object {
                "Name": "ENVIRONMENT_VARIABLE_SAMPLE_KEY",
                "Value": "Environment Variable Sample Value",
              },
            ],
            "Essential": true,
            "Image": "public.ecr.aws/nginx/nginx:stable",
            "Name": "EcsApp",
            "PortMappings": Array [
              Object {
                "ContainerPort": 80,
                "Protocol": "tcp",
              },
            ],
          },
        ],
        "Cpu": "256",
        "ExecutionRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
            "Arn",
          ],
        },
        "Family": "BLEAECSBLEAECSAppBLEAEcsBackend2BgServiceEcsTaskC95A3619",
        "Memory": "512",
        "NetworkMode": "awsvpc",
        "RequiresCompatibilities": Array [
          "FARGATE",
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TaskRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackend2BgServiceEcsTaskTaskRoleD96418B2",
            "Arn",
          ],
        },
      },
      "Type": "AWS::ECS::TaskDefinition",
    },
    "BLEAECSAppBLEAEcsBackend2BgServiceEcsTaskTaskRoleD96418B2": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "ecs-tasks.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackend2BgServiceFargateService9D07B14D": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEABackendBgAlbBgappBluepathAddTargetRule24F49559",
        "BLEAECSAppBLEAEcsBackend2BgServiceEcsTask807F687D",
        "BLEAECSAppBLEAEcsBackend2BgServiceEcsTaskTaskRoleD96418B2",
      ],
      "Properties": Object {
        "CapacityProviderStrategy": Array [
          Object {
            "CapacityProvider": "FARGATE",
            "Weight": 1,
          },
        ],
        "Cluster": Object {
          "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
        },
        "DeploymentConfiguration": Object {
          "MaximumPercent": 200,
          "MinimumHealthyPercent": 50,
        },
        "DeploymentController": Object {
          "Type": "CODE_DEPLOY",
        },
        "DesiredCount": 2,
        "EnableECSManagedTags": false,
        "HealthCheckGracePeriodSeconds": 60,
        "LoadBalancers": Array [
          Object {
            "ContainerName": "EcsApp",
            "ContainerPort": 80,
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEABackendBgEcsBackend2BgBlueTGTargetGroup602A3283",
            },
          },
        ],
        "NetworkConfiguration": Object {
          "AwsvpcConfiguration": Object {
            "AssignPublicIp": "DISABLED",
            "SecurityGroups": Array [
              Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackend2BgBackAppEcsResourcesBgSgBF57A36C",
                  "GroupId",
                ],
              },
            ],
            "Subnets": Array [
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet1Subnet10F7BE6AE43431C8",
              },
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet2Subnet3F910288B1BC2DBC",
              },
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet3Subnet5A1AF5388272CEF2",
              },
            ],
          },
        },
        "PlatformVersion": "LATEST",
        "ServiceName": "BLEA-EcsBackend2Bg-Service",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TaskDefinition": "BLEAECSBLEAECSAppBLEAEcsBackend2BgServiceEcsTaskC95A3619",
      },
      "Type": "AWS::ECS::Service",
    },
    "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesFargateCpuUtil412C5C69": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 3,
        "Dimensions": Array [
          Object {
            "Name": "ClusterName",
            "Value": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
          },
          Object {
            "Name": "ServiceName",
            "Value": "BLEA-EcsBackend-Service",
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "CPUUtilization",
        "Namespace": "ECS",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 80,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesLogA1AF81C6": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
        },
        "RetentionInDays": 1827,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesLogforSCB05F9EBD": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
        },
        "RetentionInDays": 1827,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesRepo7ED95025": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ImageScanningConfiguration": Object {
          "ScanOnPush": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::ECR::Repository",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesRepoImageScanComplete70322DE1": Object {
      "Properties": Object {
        "EventPattern": Object {
          "detail": Object {
            "repository-name": Array [
              Object {
                "Ref": "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesRepo7ED95025",
              },
            ],
            "scan-status": Array [
              "COMPLETE",
            ],
          },
          "detail-type": Array [
            "ECR Image Scan",
          ],
          "source": Array [
            "aws.ecr",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesSgBF741673": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ECS/BLEA-ECSApp/BLEA-EcsBackend-BackApp-Ecs-Resources/Sg",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesSgfromBLEAECSBLEAECSAppBLEAEcsApp2FrontAppEcsResourcesSg0562C97B80800156C83C": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEAEcsApp2FrontAppEcsResourcesSg0562C97B:8080",
        "FromPort": 8080,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesSgBF741673",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsApp2FrontAppEcsResourcesSg57AAF89D",
            "GroupId",
          ],
        },
        "ToPort": 8080,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesSgfromBLEAECSBLEAECSAppBLEAEcsAppFrontAppEcsResourcesSgAA83CB448080E16C5EDA": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEAEcsAppFrontAppEcsResourcesSgAA83CB44:8080",
        "FromPort": 8080,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesSgBF741673",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsAppFrontAppEcsResourcesSg2E0B6338",
            "GroupId",
          ],
        },
        "ToPort": 8080,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucket70ECF5C5": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucketEncryptionKeyCB32EB60",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucketEncryptionKeyAliasDF2357A1": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AliasName": "alias/codepipeline-bleaecsbleaecsappbleaecsbackendbackapppipelinebe256b24",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucketEncryptionKeyCB32EB60",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucketEncryptionKeyCB32EB60": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucketPolicy588D4462": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucket70ECF5C5",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucket70ECF5C5",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucket70ECF5C5",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineB33DACD5": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEAEcsBackendBackAppPipelineRoleDefaultPolicy7B844AF0",
        "BLEAECSAppBLEAEcsBackendBackAppPipelineRole835AFE22",
      ],
      "Properties": Object {
        "ArtifactStore": Object {
          "EncryptionKey": Object {
            "Id": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucketEncryptionKeyCB32EB60",
                "Arn",
              ],
            },
            "Type": "KMS",
          },
          "Location": Object {
            "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucket70ECF5C5",
          },
          "Type": "S3",
        },
        "RoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBackAppPipelineRole835AFE22",
            "Arn",
          ],
        },
        "Stages": Array [
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "S3",
                  "Version": "1",
                },
                "Configuration": Object {
                  "S3Bucket": Object {
                    "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelinePipelineSourceBucket80D8005D",
                  },
                  "S3ObjectKey": "image.zip",
                },
                "Name": "SourceBucket",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBackAppPipelineSourceSourceBucketCodePipelineActionRole03F64486",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Source",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Build",
                  "Owner": "AWS",
                  "Provider": "CodeBuild",
                  "Version": "1",
                },
                "Configuration": Object {
                  "ProjectName": Object {
                    "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployProjectBF2B6722",
                  },
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "Name": "DeployProject",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployDeployProjectCodePipelineActionRole0CE295C0",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Deploy",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodePipeline::Pipeline",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployDeployProjectCodePipelineActionRole0CE295C0": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployDeployProjectCodePipelineActionRoleDefaultPolicyD3FDD444": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codebuild:BatchGetBuilds",
                "codebuild:StartBuild",
                "codebuild:StopBuild",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployProjectBF2B6722",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployDeployProjectCodePipelineActionRoleDefaultPolicyD3FDD444",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployDeployProjectCodePipelineActionRole0CE295C0",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployProjectBF2B6722": Object {
      "Properties": Object {
        "Artifacts": Object {
          "Type": "CODEPIPELINE",
        },
        "Cache": Object {
          "Type": "NO_CACHE",
        },
        "EncryptionKey": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucketEncryptionKeyCB32EB60",
            "Arn",
          ],
        },
        "Environment": Object {
          "ComputeType": "BUILD_GENERAL1_SMALL",
          "EnvironmentVariables": Array [
            Object {
              "Name": "ECS_CLUSTER",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
              },
            },
            Object {
              "Name": "ECS_SERVICE",
              "Type": "PLAINTEXT",
              "Value": "BLEA-EcsBackend-Service",
            },
            Object {
              "Name": "TARGET_GROUP_ARN",
              "Type": "PLAINTEXT",
              "Value": "",
            },
            Object {
              "Name": "SECURITY_GROUP",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesSgBF741673",
                  "GroupId",
                ],
              },
            },
            Object {
              "Name": "SUBNET_1",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet1Subnet10F7BE6AE43431C8",
              },
            },
            Object {
              "Name": "SUBNET_2",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet2Subnet3F910288B1BC2DBC",
              },
            },
            Object {
              "Name": "SUBNET_3",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet3Subnet5A1AF5388272CEF2",
              },
            },
            Object {
              "Name": "LOG_GROUP",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesLogA1AF81C6",
              },
            },
            Object {
              "Name": "LOG_GROUP_SERVICE_CONNECT",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Ref": "BLEAECSAppBLEAEcsBackendBackAppEcsResourcesLogforSCB05F9EBD",
              },
            },
            Object {
              "Name": "EXECUTION_ROLE_ARN",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
                  "Arn",
                ],
              },
            },
            Object {
              "Name": "TASK_ROLE",
              "Type": "PLAINTEXT",
              "Value": "",
            },
            Object {
              "Name": "FAMILY",
              "Type": "PLAINTEXT",
              "Value": "BLEA-EcsBackend-Taskdef",
            },
            Object {
              "Name": "NAMESPACE",
              "Type": "PLAINTEXT",
              "Value": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonClusterDefaultServiceDiscoveryNamespace6AF83AD0",
                  "Arn",
                ],
              },
            },
          ],
          "Image": "aws/codebuild/amazonlinux2-x86_64-standard:2.0",
          "ImagePullCredentialsType": "CODEBUILD",
          "PrivilegedMode": false,
          "Type": "LINUX_CONTAINER",
        },
        "ServiceRole": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployProjectRole09FD883D",
            "Arn",
          ],
        },
        "Source": Object {
          "BuildSpec": "{
  \\"version\\": \\"0.2\\",
  \\"phases\\": {
    \\"pre_build\\": {
      \\"commands\\": [
        \\"echo \\\\\\"The latest version of ecspresso is (It only shows up the log) :\\\\\\"\\",
        \\"curl -s https://api.github.com/repos/kayac/ecspresso/releases/latest | jq .tag_name\\",
        \\"curl -sL -o ecspresso-v2.0.3-linux-amd64.tar.gz https://github.com/kayac/ecspresso/releases/download/v2.0.3/ecspresso_2.0.3_linux_amd64.tar.gz\\",
        \\"tar -zxf ecspresso-v2.0.3-linux-amd64.tar.gz\\",
        \\"sudo install ecspresso /usr/local/bin/ecspresso\\",
        \\"ecspresso version\\"
      ]
    },
    \\"build\\": {
      \\"commands\\": [
        \\"export IMAGE1_NAME=\`cat imagedefinitions.json | jq -r .[0].imageUri\`\\",
        \\"ls -lR\\",
        \\"ecspresso deploy --config ecspresso.yml\\",
        \\"./autoscale.sh\\"
      ]
    }
  }
}",
          "Type": "CODEPIPELINE",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeBuild::Project",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployProjectRole09FD883D": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codebuild.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployProjectRoleDefaultPolicy02F4A5EA": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:CreateLogGroup",
                "logs:CreateLogStream",
                "logs:PutLogEvents",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:ap-northeast-1:410364260571:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployProjectBF2B6722",
                      },
                    ],
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":logs:ap-northeast-1:410364260571:log-group:/aws/codebuild/",
                      Object {
                        "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployProjectBF2B6722",
                      },
                      ":*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "codebuild:CreateReportGroup",
                "codebuild:CreateReport",
                "codebuild:UpdateReport",
                "codebuild:BatchPutTestCases",
                "codebuild:BatchPutCodeCoverages",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codebuild:ap-northeast-1:410364260571:report-group/",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployProjectBF2B6722",
                    },
                    "-*",
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "ecs:RegisterTaskDefinition",
                "ecs:ListTaskDefinitions",
                "ecs:DescribeTaskDefinition",
                "ecs:CreateService",
                "ecs:UpdateService",
                "ecs:DescribeServices",
                "application-autoscaling:DescribeScalableTargets",
                "application-autoscaling:RegisterScalableTarget",
                "application-autoscaling:DeregisterScalableTarget",
                "application-autoscaling:PutScalingPolicy",
                "application-autoscaling:DeleteScalingPolicy",
                "servicediscovery:GetNamespace",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "iam:PassRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucket70ECF5C5",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucket70ECF5C5",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucketEncryptionKeyCB32EB60",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucketEncryptionKeyCB32EB60",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployProjectRoleDefaultPolicy02F4A5EA",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployProjectRole09FD883D",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelinePipelineSourceBucket80D8005D": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineRole835AFE22": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codepipeline.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineRoleDefaultPolicy7B844AF0": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucket70ECF5C5",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucket70ECF5C5",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucketEncryptionKeyCB32EB60",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBackAppPipelineSourceSourceBucketCodePipelineActionRole03F64486",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBackAppPipelineDeployDeployProjectCodePipelineActionRole0CE295C0",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackendBackAppPipelineRoleDefaultPolicy7B844AF0",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelineRole835AFE22",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineSourceSourceBucketCodePipelineActionRole03F64486": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackendBackAppPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicyB3899FC7": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBackAppPipelinePipelineSourceBucket80D8005D",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackendBackAppPipelinePipelineSourceBucket80D8005D",
                          "Arn",
                        ],
                      },
                      "/image.zip",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucket70ECF5C5",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucket70ECF5C5",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Decrypt",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBackAppPipelineArtifactsBucketEncryptionKeyCB32EB60",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackendBackAppPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicyB3899FC7",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackendBackAppPipelineSourceSourceBucketCodePipelineActionRole03F64486",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipeline90EA4BFC": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineRoleDefaultPolicyB61D9594",
        "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineRole21696678",
      ],
      "Properties": Object {
        "ArtifactStore": Object {
          "EncryptionKey": Object {
            "Id": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucketEncryptionKey34813E7E",
                "Arn",
              ],
            },
            "Type": "KMS",
          },
          "Location": Object {
            "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucket03625A47",
          },
          "Type": "S3",
        },
        "RoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineRole21696678",
            "Arn",
          ],
        },
        "Stages": Array [
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Source",
                  "Owner": "AWS",
                  "Provider": "S3",
                  "Version": "1",
                },
                "Configuration": Object {
                  "S3Bucket": Object {
                    "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelinePipelineSourceBucket657623D7",
                  },
                  "S3ObjectKey": "image.zip",
                },
                "Name": "SourceBucket",
                "OutputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleA98A5C15",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Source",
          },
          Object {
            "Actions": Array [
              Object {
                "ActionTypeId": Object {
                  "Category": "Deploy",
                  "Owner": "AWS",
                  "Provider": "CodeDeployToECS",
                  "Version": "1",
                },
                "Configuration": Object {
                  "AppSpecTemplateArtifact": "Artifact_Source_SourceBucket",
                  "AppSpecTemplatePath": "appspec.yaml",
                  "ApplicationName": Object {
                    "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineEcsDeployApplication4291F94B",
                  },
                  "DeploymentGroupName": Object {
                    "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineBlueGreenDeployDB632990",
                  },
                  "Image1ArtifactName": "Artifact_Source_SourceBucket",
                  "Image1ContainerName": "IMAGE1_NAME",
                  "TaskDefinitionTemplateArtifact": "Artifact_Source_SourceBucket",
                  "TaskDefinitionTemplatePath": "taskdef.json",
                },
                "InputArtifacts": Array [
                  Object {
                    "Name": "Artifact_Source_SourceBucket",
                  },
                ],
                "Name": "ECSBlueGreenDeploy",
                "RoleArn": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleC74A9F52",
                    "Arn",
                  ],
                },
                "RunOrder": 1,
              },
            ],
            "Name": "Deploy",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodePipeline::Pipeline",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucket03625A47": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "KMSMasterKeyID": Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucketEncryptionKey34813E7E",
                    "Arn",
                  ],
                },
                "SSEAlgorithm": "aws:kms",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucketEncryptionKey34813E7E": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "KeyPolicy": Object {
          "Statement": Array [
            Object {
              "Action": "kms:*",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::KMS::Key",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucketEncryptionKeyAliasF93EDF92": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "AliasName": "alias/codepipeline-bleaecsbleaecsappbleaecsbackendbgbackappbgpipeline5c30bdc7",
        "TargetKeyId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucketEncryptionKey34813E7E",
            "Arn",
          ],
        },
      },
      "Type": "AWS::KMS::Alias",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucketPolicyC57AF0FE": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucket03625A47",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucket03625A47",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucket03625A47",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineBlueGreenDeployDB632990": Object {
      "Properties": Object {
        "ApplicationName": Object {
          "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineEcsDeployApplication4291F94B",
        },
        "AutoRollbackConfiguration": Object {
          "Enabled": true,
          "Events": Array [
            "DEPLOYMENT_FAILURE",
          ],
        },
        "BlueGreenDeploymentConfiguration": Object {
          "DeploymentReadyOption": Object {
            "ActionOnTimeout": "STOP_DEPLOYMENT",
            "WaitTimeInMinutes": 60,
          },
          "TerminateBlueInstancesOnDeploymentSuccess": Object {
            "Action": "TERMINATE",
            "TerminationWaitTimeInMinutes": 60,
          },
        },
        "DeploymentConfigName": "CodeDeployDefault.ECSAllAtOnce",
        "DeploymentStyle": Object {
          "DeploymentOption": "WITH_TRAFFIC_CONTROL",
          "DeploymentType": "BLUE_GREEN",
        },
        "ECSServices": Array [
          Object {
            "ClusterName": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
            "ServiceName": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAEcsBackendBgServiceFargateService4FADBE13",
                "Name",
              ],
            },
          },
        ],
        "LoadBalancerInfo": Object {
          "TargetGroupPairInfoList": Array [
            Object {
              "ProdTrafficRoute": Object {
                "ListenerArns": Array [
                  Object {
                    "Ref": "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
                  },
                ],
              },
              "TargetGroups": Array [
                Object {
                  "Name": Object {
                    "Fn::GetAtt": Array [
                      "BLEAECSAppBLEABackendBgEcsBackendBgBlueTGTargetGroup10D49C22",
                      "TargetGroupName",
                    ],
                  },
                },
                Object {
                  "Name": Object {
                    "Fn::GetAtt": Array [
                      "BLEAECSAppBLEABackendBgEcsBackendBgGreenTGTargetGroup02662F90",
                      "TargetGroupName",
                    ],
                  },
                },
              ],
              "TestTrafficRoute": Object {
                "ListenerArns": Array [
                  Object {
                    "Ref": "BLEAECSAppBLEABackendBgAlbBgappGreenD8737181",
                  },
                ],
              },
            },
          ],
        },
        "ServiceRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineBlueGreenDeployServiceRoleF1EB0D9D",
            "Arn",
          ],
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeDeploy::DeploymentGroup",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineBlueGreenDeployServiceRoleF1EB0D9D": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codedeploy.ap-northeast-1.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/AWSCodeDeployRoleForECS",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleC74A9F52": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleDefaultPolicy6315DB4C": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "codedeploy:GetApplication",
                "codedeploy:GetApplicationRevision",
                "codedeploy:RegisterApplicationRevision",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:application:",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineEcsDeployApplication4291F94B",
                    },
                  ],
                ],
              },
            },
            Object {
              "Action": Array [
                "codedeploy:CreateDeployment",
                "codedeploy:GetDeployment",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:deploymentgroup:",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineEcsDeployApplication4291F94B",
                    },
                    "/",
                    Object {
                      "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineBlueGreenDeployDB632990",
                    },
                  ],
                ],
              },
            },
            Object {
              "Action": "codedeploy:GetDeploymentConfig",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    "arn:",
                    Object {
                      "Ref": "AWS::Partition",
                    },
                    ":codedeploy:ap-northeast-1:410364260571:deploymentconfig:CodeDeployDefault.ECSAllAtOnce",
                  ],
                ],
              },
            },
            Object {
              "Action": "ecs:RegisterTaskDefinition",
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "iam:PassRole",
              "Condition": Object {
                "StringEqualsIfExists": Object {
                  "iam:PassedToService": Array [
                    "ecs-tasks.amazonaws.com",
                  ],
                },
              },
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucket03625A47",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucket03625A47",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucketEncryptionKey34813E7E",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleDefaultPolicy6315DB4C",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleC74A9F52",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineEcsDeployApplication4291F94B": Object {
      "Properties": Object {
        "ComputePlatform": "ECS",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CodeDeploy::Application",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelinePipelineSourceBucket657623D7": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineRole21696678": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "codepipeline.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineRoleDefaultPolicyB61D9594": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucket03625A47",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucket03625A47",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Decrypt",
                "kms:DescribeKey",
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucketEncryptionKey34813E7E",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleA98A5C15",
                  "Arn",
                ],
              },
            },
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineDeployECSBlueGreenDeployCodePipelineActionRoleC74A9F52",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineRoleDefaultPolicyB61D9594",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineRole21696678",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleA98A5C15": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::410364260571:root",
                    ],
                  ],
                },
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicyDA56BB87": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "s3:GetObject*",
                "s3:GetBucket*",
                "s3:List*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelinePipelineSourceBucket657623D7",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelinePipelineSourceBucket657623D7",
                          "Arn",
                        ],
                      },
                      "/image.zip",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "s3:DeleteObject*",
                "s3:PutObject",
                "s3:PutObjectLegalHold",
                "s3:PutObjectRetention",
                "s3:PutObjectTagging",
                "s3:PutObjectVersionTagging",
                "s3:Abort*",
              ],
              "Effect": "Allow",
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucket03625A47",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucket03625A47",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": Array [
                "kms:Encrypt",
                "kms:ReEncrypt*",
                "kms:GenerateDataKey*",
                "kms:Decrypt",
              ],
              "Effect": "Allow",
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineArtifactsBucketEncryptionKey34813E7E",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleDefaultPolicyDA56BB87",
        "Roles": Array [
          Object {
            "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppBgPipelineSourceSourceBucketCodePipelineActionRoleA98A5C15",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgFargateCpuUtilF662E06F": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 3,
        "Dimensions": Array [
          Object {
            "Name": "ClusterName",
            "Value": Object {
              "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
            },
          },
          Object {
            "Name": "ServiceName",
            "Value": "BLEA-EcsBackendBg-Service",
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "CPUUtilization",
        "Namespace": "ECS",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 80,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgLogF0F316FF": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
        },
        "RetentionInDays": 1827,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgRepo7F415B9B": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "ImageScanningConfiguration": Object {
          "ScanOnPush": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::ECR::Repository",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgRepoImageScanCompleteC3AA396B": Object {
      "Properties": Object {
        "EventPattern": Object {
          "detail": Object {
            "repository-name": Array [
              Object {
                "Ref": "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgRepo7F415B9B",
              },
            ],
            "scan-status": Array [
              "COMPLETE",
            ],
          },
          "detail-type": Array [
            "ECR Image Scan",
          ],
          "source": Array [
            "aws.ecr",
          ],
        },
        "State": "ENABLED",
        "Targets": Array [
          Object {
            "Arn": Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
            },
            "Id": "Target0",
          },
        ],
      },
      "Type": "AWS::Events::Rule",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgSg32B91F12": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ECS/BLEA-ECSApp/BLEA-EcsBackendBg-BackApp-Ecs-Resources-Bg/Sg",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgSgfromBLEAECSBLEAECSAppBLEABackendBgSgAlb32DB00FD8080B7D7DAE3": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEABackendBgSgAlb32DB00FD:8080",
        "FromPort": 8080,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgSg32B91F12",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEABackendBgSgAlb18538169",
            "GroupId",
          ],
        },
        "ToPort": 8080,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgSgfromBLEAECSBLEAECSAppBLEABackendBgSgAlb32DB00FD80BADEC570": Object {
      "Properties": Object {
        "Description": "Load balancer to target",
        "FromPort": 80,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgSg32B91F12",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEABackendBgSgAlb18538169",
            "GroupId",
          ],
        },
        "ToPort": 80,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "BLEAECSAppBLEAEcsBackendBgServiceEcsTask465ECF5D": Object {
      "Properties": Object {
        "ContainerDefinitions": Array [
          Object {
            "Environment": Array [
              Object {
                "Name": "ENVIRONMENT_VARIABLE_SAMPLE_KEY",
                "Value": "Environment Variable Sample Value",
              },
            ],
            "Essential": true,
            "Image": "public.ecr.aws/nginx/nginx:stable",
            "Name": "EcsApp",
            "PortMappings": Array [
              Object {
                "ContainerPort": 80,
                "Protocol": "tcp",
              },
            ],
          },
        ],
        "Cpu": "256",
        "ExecutionRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAECSCommonEcsTaskExecutionRole65032F65",
            "Arn",
          ],
        },
        "Family": "BLEAECSBLEAECSAppBLEAEcsBackendBgServiceEcsTask2A3B1095",
        "Memory": "512",
        "NetworkMode": "awsvpc",
        "RequiresCompatibilities": Array [
          "FARGATE",
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TaskRoleArn": Object {
          "Fn::GetAtt": Array [
            "BLEAECSAppBLEAEcsBackendBgServiceEcsTaskTaskRole7D9763F9",
            "Arn",
          ],
        },
      },
      "Type": "AWS::ECS::TaskDefinition",
    },
    "BLEAECSAppBLEAEcsBackendBgServiceEcsTaskTaskRole7D9763F9": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "ecs-tasks.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAECSAppBLEAEcsBackendBgServiceFargateService4FADBE13": Object {
      "DependsOn": Array [
        "BLEAECSAppBLEABackendBgAlbBgappBluepathAddTargetRule24F49559",
        "BLEAECSAppBLEABackendBgAlbBgappBlueECDD7257",
        "BLEAECSAppBLEAEcsBackendBgServiceEcsTask465ECF5D",
        "BLEAECSAppBLEAEcsBackendBgServiceEcsTaskTaskRole7D9763F9",
      ],
      "Properties": Object {
        "CapacityProviderStrategy": Array [
          Object {
            "CapacityProvider": "FARGATE",
            "Weight": 1,
          },
        ],
        "Cluster": Object {
          "Ref": "BLEAECSAppBLEAECSCommonClusterF9835809",
        },
        "DeploymentConfiguration": Object {
          "MaximumPercent": 200,
          "MinimumHealthyPercent": 50,
        },
        "DeploymentController": Object {
          "Type": "CODE_DEPLOY",
        },
        "DesiredCount": 2,
        "EnableECSManagedTags": false,
        "HealthCheckGracePeriodSeconds": 60,
        "LoadBalancers": Array [
          Object {
            "ContainerName": "EcsApp",
            "ContainerPort": 80,
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEABackendBgEcsBackendBgBlueTGTargetGroup10D49C22",
            },
          },
        ],
        "NetworkConfiguration": Object {
          "AwsvpcConfiguration": Object {
            "AssignPublicIp": "DISABLED",
            "SecurityGroups": Array [
              Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAEcsBackendBgBackAppEcsResourcesBgSg32B91F12",
                  "GroupId",
                ],
              },
            ],
            "Subnets": Array [
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet1Subnet10F7BE6AE43431C8",
              },
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet2Subnet3F910288B1BC2DBC",
              },
              Object {
                "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPrivateSubnet3Subnet5A1AF5388272CEF2",
              },
            ],
          },
        },
        "PlatformVersion": "LATEST",
        "ServiceName": "BLEA-EcsBackendBg-Service",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TaskDefinition": "BLEAECSBLEAECSAppBLEAEcsBackendBgServiceEcsTask2A3B1095",
      },
      "Type": "AWS::ECS::Service",
    },
    "BLEAECSAppBLEAFrontAlb426FC84F": Object {
      "Properties": Object {
        "LoadBalancerAttributes": Array [
          Object {
            "Key": "deletion_protection.enabled",
            "Value": "false",
          },
          Object {
            "Key": "access_logs.s3.enabled",
            "Value": "true",
          },
          Object {
            "Key": "access_logs.s3.bucket",
            "Value": Object {
              "Ref": "BLEAECSAppBLEAFrontAlbalblogbucket735CDB7C",
            },
          },
        ],
        "Scheme": "internet-facing",
        "SecurityGroups": Array [
          Object {
            "Fn::GetAtt": Array [
              "BLEAECSAppBLEAFrontAlbSgAlb13E16CB3",
              "GroupId",
            ],
          },
        ],
        "Subnets": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPublicSubnet1Subnet5DC06C9FE9689AC8",
          },
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPublicSubnet2Subnet197E9DA596910BEA",
          },
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPublicSubnet3Subnet190190BA16029F0B",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "Type": "application",
      },
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
    },
    "BLEAECSAppBLEAFrontAlbAlbHttp4xxEC6C15AA": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontAlb426FC84F",
                "LoadBalancerFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HTTPCode_ELB_4XX_Count",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Sum",
        "Threshold": 10,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontAlbAlbHttp5xx3399428B": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontAlb426FC84F",
                "LoadBalancerFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HTTPCode_ELB_5XX_Count",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Sum",
        "Threshold": 10,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontAlbAlbResponseTimeB5C4F1BB": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontAlb426FC84F",
                "LoadBalancerFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "TargetResponseTime",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 100,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontAlbEcsApp2TGAlbTgHealthyHostCount410A9F96": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "LessThanThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontAlbEcsApp2TGTargetGroupC64D4162",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontAlbEcsApp2TGAlbTgUnHealthyHostCountFF6C5217": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontAlbEcsApp2TGTargetGroupC64D4162",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "UnHealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontAlbEcsApp2TGTargetGroupC64D4162": Object {
      "Properties": Object {
        "Port": 80,
        "Protocol": "HTTP",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TargetGroupAttributes": Array [
          Object {
            "Key": "deregistration_delay.timeout_seconds",
            "Value": "30",
          },
          Object {
            "Key": "stickiness.enabled",
            "Value": "false",
          },
        ],
        "TargetType": "ip",
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
    },
    "BLEAECSAppBLEAFrontAlbEcsAppTGAlbTgHealthyHostCountFB72B500": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "LessThanThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontAlbEcsAppTGTargetGroupBA6D36C2",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontAlbEcsAppTGAlbTgUnHealthyHostCountC0EB54E5": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontAlbEcsAppTGTargetGroupBA6D36C2",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "UnHealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontAlbEcsAppTGTargetGroupBA6D36C2": Object {
      "Properties": Object {
        "Port": 80,
        "Protocol": "HTTP",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TargetGroupAttributes": Array [
          Object {
            "Key": "deregistration_delay.timeout_seconds",
            "Value": "30",
          },
          Object {
            "Key": "stickiness.enabled",
            "Value": "false",
          },
        ],
        "TargetType": "ip",
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
    },
    "BLEAECSAppBLEAFrontAlbSgAlb13E16CB3": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ECS/BLEA-ECSApp/BLEA-FrontAlb/SgAlb",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow from anyone on port 80",
            "FromPort": 80,
            "IpProtocol": "tcp",
            "ToPort": 80,
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAECSAppBLEAFrontAlbalblogbucket735CDB7C": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "AccessControl": "Private",
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAFrontAlbalblogbucketPolicyE99F0C81": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAECSAppBLEAFrontAlbalblogbucket735CDB7C",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAFrontAlbalblogbucket735CDB7C",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAFrontAlbalblogbucket735CDB7C",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "s3:PutObject",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::582318560864:root",
                    ],
                  ],
                },
              },
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "BLEAECSAppBLEAFrontAlbalblogbucket735CDB7C",
                        "Arn",
                      ],
                    },
                    "/AWSLogs/410364260571/*",
                  ],
                ],
              },
            },
            Object {
              "Action": "s3:PutObject",
              "Condition": Object {
                "StringEquals": Object {
                  "s3:x-amz-acl": "bucket-owner-full-control",
                },
              },
              "Effect": "Allow",
              "Principal": Object {
                "Service": "delivery.logs.amazonaws.com",
              },
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "BLEAECSAppBLEAFrontAlbalblogbucket735CDB7C",
                        "Arn",
                      ],
                    },
                    "/AWSLogs/410364260571/*",
                  ],
                ],
              },
            },
            Object {
              "Action": "s3:GetBucketAcl",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "delivery.logs.amazonaws.com",
              },
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAFrontAlbalblogbucket735CDB7C",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEAECSAppBLEAFrontAlbappF1C4A009": Object {
      "Properties": Object {
        "DefaultActions": Array [
          Object {
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEAFrontAlbEcsAppTGTargetGroupBA6D36C2",
            },
            "Type": "forward",
          },
        ],
        "LoadBalancerArn": Object {
          "Ref": "BLEAECSAppBLEAFrontAlb426FC84F",
        },
        "Port": 80,
        "Protocol": "HTTP",
      },
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
    },
    "BLEAECSAppBLEAFrontAlbapppathAddTargetRuleBA27F011": Object {
      "Properties": Object {
        "Actions": Array [
          Object {
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEAFrontAlbEcsApp2TGTargetGroupC64D4162",
            },
            "Type": "forward",
          },
        ],
        "Conditions": Array [
          Object {
            "Field": "path-pattern",
            "PathPatternConfig": Object {
              "Values": Array [
                "/path",
              ],
            },
          },
        ],
        "ListenerArn": Object {
          "Ref": "BLEAECSAppBLEAFrontAlbappF1C4A009",
        },
        "Priority": 1,
      },
      "Type": "AWS::ElasticLoadBalancingV2::ListenerRule",
    },
    "BLEAECSAppBLEAFrontendBgAlbBg7D4F4A31": Object {
      "Properties": Object {
        "LoadBalancerAttributes": Array [
          Object {
            "Key": "deletion_protection.enabled",
            "Value": "false",
          },
          Object {
            "Key": "access_logs.s3.enabled",
            "Value": "true",
          },
          Object {
            "Key": "access_logs.s3.bucket",
            "Value": Object {
              "Ref": "BLEAECSAppBLEAFrontendBgalblogbucketDD8C1AC0",
            },
          },
        ],
        "Scheme": "internet-facing",
        "SecurityGroups": Array [
          Object {
            "Fn::GetAtt": Array [
              "BLEAECSAppBLEAFrontendBgSgAlb2FBDC303",
              "GroupId",
            ],
          },
        ],
        "Subnets": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPublicSubnet1Subnet5DC06C9FE9689AC8",
          },
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPublicSubnet2Subnet197E9DA596910BEA",
          },
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcPublicSubnet3Subnet190190BA16029F0B",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "Type": "application",
      },
      "Type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
    },
    "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155": Object {
      "Properties": Object {
        "DefaultActions": Array [
          Object {
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEAFrontendBgEcsAppBgBlueTGTargetGroupE1B547D0",
            },
            "Type": "forward",
          },
        ],
        "LoadBalancerArn": Object {
          "Ref": "BLEAECSAppBLEAFrontendBgAlbBg7D4F4A31",
        },
        "Port": 80,
        "Protocol": "HTTP",
      },
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
    },
    "BLEAECSAppBLEAFrontendBgAlbBgappBluepathAddTargetRuleF66D6C5A": Object {
      "Properties": Object {
        "Actions": Array [
          Object {
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEAFrontendBgEcsApp2BgBlueTGTargetGroup37AB5347",
            },
            "Type": "forward",
          },
        ],
        "Conditions": Array [
          Object {
            "Field": "path-pattern",
            "PathPatternConfig": Object {
              "Values": Array [
                "/path",
              ],
            },
          },
        ],
        "ListenerArn": Object {
          "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
        },
        "Priority": 1,
      },
      "Type": "AWS::ElasticLoadBalancingV2::ListenerRule",
    },
    "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8": Object {
      "Properties": Object {
        "DefaultActions": Array [
          Object {
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEAFrontendBgEcsAppBgGreenTGTargetGroup32788C5B",
            },
            "Type": "forward",
          },
        ],
        "LoadBalancerArn": Object {
          "Ref": "BLEAECSAppBLEAFrontendBgAlbBg7D4F4A31",
        },
        "Port": 8080,
        "Protocol": "HTTP",
      },
      "Type": "AWS::ElasticLoadBalancingV2::Listener",
    },
    "BLEAECSAppBLEAFrontendBgAlbBgappGreenpathAddTargetRule81AFCC33": Object {
      "Properties": Object {
        "Actions": Array [
          Object {
            "TargetGroupArn": Object {
              "Ref": "BLEAECSAppBLEAFrontendBgEcsApp2BgGreenTGTargetGroup6CDE1BBB",
            },
            "Type": "forward",
          },
        ],
        "Conditions": Array [
          Object {
            "Field": "path-pattern",
            "PathPatternConfig": Object {
              "Values": Array [
                "/path",
              ],
            },
          },
        ],
        "ListenerArn": Object {
          "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
        },
        "Priority": 1,
      },
      "Type": "AWS::ElasticLoadBalancingV2::ListenerRule",
    },
    "BLEAECSAppBLEAFrontendBgAlbHttp4xxEA2917B3": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontendBgAlbBg7D4F4A31",
                "LoadBalancerFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HTTPCode_ELB_4XX_Count",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Sum",
        "Threshold": 10,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontendBgAlbHttp5xx9274E746": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontendBgAlbBg7D4F4A31",
                "LoadBalancerFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HTTPCode_ELB_5XX_Count",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Sum",
        "Threshold": 10,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontendBgAlbResponseTime07149D49": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontendBgAlbBg7D4F4A31",
                "LoadBalancerFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "TargetResponseTime",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 100,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontendBgEcsApp2BgBlueTGAlbTgHealthyHostCountE42C57D2": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "LessThanThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontendBgEcsApp2BgBlueTGTargetGroup37AB5347",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontendBgEcsApp2BgBlueTGAlbTgUnHealthyHostCount020F3385": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontendBgEcsApp2BgBlueTGTargetGroup37AB5347",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "UnHealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontendBgEcsApp2BgBlueTGTargetGroup37AB5347": Object {
      "Properties": Object {
        "Port": 80,
        "Protocol": "HTTP",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TargetGroupAttributes": Array [
          Object {
            "Key": "deregistration_delay.timeout_seconds",
            "Value": "30",
          },
          Object {
            "Key": "stickiness.enabled",
            "Value": "false",
          },
        ],
        "TargetType": "ip",
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
    },
    "BLEAECSAppBLEAFrontendBgEcsApp2BgGreenTGAlbTgHealthyHostCountA3DC064A": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "LessThanThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontendBgEcsApp2BgGreenTGTargetGroup6CDE1BBB",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontendBgEcsApp2BgGreenTGAlbTgUnHealthyHostCountAA917284": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontendBgEcsApp2BgGreenTGTargetGroup6CDE1BBB",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "UnHealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontendBgEcsApp2BgGreenTGTargetGroup6CDE1BBB": Object {
      "Properties": Object {
        "Port": 80,
        "Protocol": "HTTP",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TargetGroupAttributes": Array [
          Object {
            "Key": "deregistration_delay.timeout_seconds",
            "Value": "30",
          },
          Object {
            "Key": "stickiness.enabled",
            "Value": "false",
          },
        ],
        "TargetType": "ip",
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
    },
    "BLEAECSAppBLEAFrontendBgEcsAppBgBlueTGAlbTgHealthyHostCount641ACAEA": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "LessThanThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontendBgEcsAppBgBlueTGTargetGroupE1B547D0",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontendBgEcsAppBgBlueTGAlbTgUnHealthyHostCount7C736D87": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappBlue3D875155",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontendBgEcsAppBgBlueTGTargetGroupE1B547D0",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "UnHealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontendBgEcsAppBgBlueTGTargetGroupE1B547D0": Object {
      "Properties": Object {
        "Port": 80,
        "Protocol": "HTTP",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TargetGroupAttributes": Array [
          Object {
            "Key": "deregistration_delay.timeout_seconds",
            "Value": "30",
          },
          Object {
            "Key": "stickiness.enabled",
            "Value": "false",
          },
        ],
        "TargetType": "ip",
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
    },
    "BLEAECSAppBLEAFrontendBgEcsAppBgGreenTGAlbTgHealthyHostCount19986ED3": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "LessThanThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontendBgEcsAppBgGreenTGTargetGroup32788C5B",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "HealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontendBgEcsAppBgGreenTGAlbTgUnHealthyHostCountE42269E3": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "Dimensions": Array [
          Object {
            "Name": "LoadBalancer",
            "Value": Object {
              "Fn::Join": Array [
                "",
                Array [
                  Object {
                    "Fn::Select": Array [
                      1,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      2,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                  "/",
                  Object {
                    "Fn::Select": Array [
                      3,
                      Object {
                        "Fn::Split": Array [
                          "/",
                          Object {
                            "Ref": "BLEAECSAppBLEAFrontendBgAlbBgappGreen6DC553B8",
                          },
                        ],
                      },
                    ],
                  },
                ],
              ],
            },
          },
          Object {
            "Name": "TargetGroup",
            "Value": Object {
              "Fn::GetAtt": Array [
                "BLEAECSAppBLEAFrontendBgEcsAppBgGreenTGTargetGroup32788C5B",
                "TargetGroupFullName",
              ],
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "UnHealthyHostCount",
        "Namespace": "AWS/ApplicationELB",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 1,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "BLEAECSAppBLEAFrontendBgEcsAppBgGreenTGTargetGroup32788C5B": Object {
      "Properties": Object {
        "Port": 80,
        "Protocol": "HTTP",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TargetGroupAttributes": Array [
          Object {
            "Key": "deregistration_delay.timeout_seconds",
            "Value": "30",
          },
          Object {
            "Key": "stickiness.enabled",
            "Value": "false",
          },
        ],
        "TargetType": "ip",
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::ElasticLoadBalancingV2::TargetGroup",
    },
    "BLEAECSAppBLEAFrontendBgSgAlb2FBDC303": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ECS/BLEA-ECSApp/BLEA-Frontend-Bg/SgAlb",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "SecurityGroupIngress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow from anyone on port 80",
            "FromPort": 80,
            "IpProtocol": "tcp",
            "ToPort": 80,
          },
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow from anyone on port 8080",
            "FromPort": 8080,
            "IpProtocol": "tcp",
            "ToPort": 8080,
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "BLEAECSAppBLEAFrontendBgalblogbucketDD8C1AC0": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "AccessControl": "Private",
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAECSAppBLEAFrontendBgalblogbucketPolicyB89F996E": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEAECSAppBLEAFrontendBgalblogbucketDD8C1AC0",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEAECSAppBLEAFrontendBgalblogbucketDD8C1AC0",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEAECSAppBLEAFrontendBgalblogbucketDD8C1AC0",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "s3:PutObject",
              "Effect": "Allow",
              "Principal": Object {
                "AWS": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "arn:",
                      Object {
                        "Ref": "AWS::Partition",
                      },
                      ":iam::582318560864:root",
                    ],
                  ],
                },
              },
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "BLEAECSAppBLEAFrontendBgalblogbucketDD8C1AC0",
                        "Arn",
                      ],
                    },
                    "/AWSLogs/410364260571/*",
                  ],
                ],
              },
            },
            Object {
              "Action": "s3:PutObject",
              "Condition": Object {
                "StringEquals": Object {
                  "s3:x-amz-acl": "bucket-owner-full-control",
                },
              },
              "Effect": "Allow",
              "Principal": Object {
                "Service": "delivery.logs.amazonaws.com",
              },
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "BLEAECSAppBLEAFrontendBgalblogbucketDD8C1AC0",
                        "Arn",
                      ],
                    },
                    "/AWSLogs/410364260571/*",
                  ],
                ],
              },
            },
            Object {
              "Action": "s3:GetBucketAcl",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "delivery.logs.amazonaws.com",
              },
              "Resource": Object {
                "Fn::GetAtt": Array [
                  "BLEAECSAppBLEAFrontendBgalblogbucketDD8C1AC0",
                  "Arn",
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`BLEA Guest Stacks GuestAccount ECS App Stacks 6`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "WafAlbBLEAWafAlbWebAcl66CC336D": Object {
      "Properties": Object {
        "DefaultAction": Object {
          "Block": Object {},
        },
        "Rules": Array [
          Object {
            "Action": Object {
              "Allow": Object {},
            },
            "Name": "IPset",
            "Priority": 1,
            "Statement": Object {
              "IPSetReferenceStatement": Object {
                "Arn": Object {
                  "Fn::GetAtt": Array [
                    "WafAlbIPset08CA3181",
                    "Arn",
                  ],
                },
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "IPset",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Action": Object {
              "Allow": Object {},
            },
            "Name": "preSharedKey",
            "Priority": 2,
            "Statement": Object {
              "ByteMatchStatement": Object {
                "FieldToMatch": Object {
                  "SingleHeader": Object {
                    "name": "x-pre-shared-key",
                  },
                },
                "PositionalConstraint": "EXACTLY",
                "SearchString": "cc56a81d",
                "TextTransformations": Array [
                  Object {
                    "Priority": 0,
                    "Type": "NONE",
                  },
                ],
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "IPset",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWSManagedRulesCommonRuleSet",
            "OverrideAction": Object {
              "Count": Object {},
            },
            "Priority": 101,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesCommonRuleSet",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AWSManagedRulesCommonRuleSet",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWSManagedRulesKnownBadInputsRuleSet",
            "OverrideAction": Object {
              "Count": Object {},
            },
            "Priority": 102,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesKnownBadInputsRuleSet",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AWSManagedRulesKnownBadInputsRuleSet",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWSManagedRulesAmazonIpReputationList",
            "OverrideAction": Object {
              "Count": Object {},
            },
            "Priority": 103,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesAmazonIpReputationList",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AWSManagedRulesAmazonIpReputationList",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWSManagedRulesLinuxRuleSet",
            "OverrideAction": Object {
              "Count": Object {},
            },
            "Priority": 104,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesLinuxRuleSet",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AWSManagedRulesLinuxRuleSet",
              "SampledRequestsEnabled": true,
            },
          },
          Object {
            "Name": "AWSManagedRulesSQLiRuleSet",
            "OverrideAction": Object {
              "Count": Object {},
            },
            "Priority": 105,
            "Statement": Object {
              "ManagedRuleGroupStatement": Object {
                "Name": "AWSManagedRulesSQLiRuleSet",
                "VendorName": "AWS",
              },
            },
            "VisibilityConfig": Object {
              "CloudWatchMetricsEnabled": true,
              "MetricName": "AWS-AWSManagedRulesSQLiRuleSet",
              "SampledRequestsEnabled": true,
            },
          },
        ],
        "Scope": "REGIONAL",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VisibilityConfig": Object {
          "CloudWatchMetricsEnabled": true,
          "MetricName": "WafAcl",
          "SampledRequestsEnabled": true,
        },
      },
      "Type": "AWS::WAFv2::WebACL",
    },
    "WafAlbIPset08CA3181": Object {
      "Properties": Object {
        "Addresses": Array [
          "210.190.113.128/25",
        ],
        "IPAddressVersion": "IPV4",
        "Name": "IPset",
        "Scope": "REGIONAL",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::WAFv2::IPSet",
    },
    "WafAlbWebAclAssociation07344E7B9": Object {
      "Properties": Object {
        "ResourceArn": Object {
          "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAFrontAlb426FC84FBABF62D0",
        },
        "WebACLArn": Object {
          "Fn::GetAtt": Array [
            "WafAlbBLEAWafAlbWebAcl66CC336D",
            "Arn",
          ],
        },
      },
      "Type": "AWS::WAFv2::WebACLAssociation",
    },
    "WafAlbWebAclAssociation1A699A768": Object {
      "Properties": Object {
        "ResourceArn": Object {
          "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAFrontendBgAlbBg7D4F4A31C9802585",
        },
        "WebACLArn": Object {
          "Fn::GetAtt": Array [
            "WafAlbBLEAWafAlbWebAcl66CC336D",
            "Arn",
          ],
        },
      },
      "Type": "AWS::WAFv2::WebACLAssociation",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`BLEA Guest Stacks GuestAccount ECS App Stacks 7`] = `
Object {
  "Outputs": Object {
    "ExportsOutputRefBLEACloudFrontDistributionEFC3B20D5F11808A": Object {
      "Export": Object {
        "Name": "BLEA-Cloudfront:ExportsOutputRefBLEACloudFrontDistributionEFC3B20D5F11808A",
      },
      "Value": Object {
        "Ref": "BLEACloudFrontDistributionEFC3B20D",
      },
    },
  },
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "BLEACloudFrontClosedBucketAC80ACBC": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "AccessControl": "Private",
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEACloudFrontClosedBucketPolicyB8E2DD80": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEACloudFrontClosedBucketAC80ACBC",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEACloudFrontClosedBucketAC80ACBC",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEACloudFrontClosedBucketAC80ACBC",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEACloudFrontCloudFrontLogBucket1A873AB4": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "AccessControl": "Private",
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "OwnershipControls": Object {
          "Rules": Array [
            Object {
              "ObjectOwnership": "ObjectWriter",
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEACloudFrontCloudFrontLogBucketPolicy597EFC90": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEACloudFrontCloudFrontLogBucket1A873AB4",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEACloudFrontCloudFrontLogBucket1A873AB4",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEACloudFrontCloudFrontLogBucket1A873AB4",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "BLEACloudFrontDistributionEFC3B20D": Object {
      "Properties": Object {
        "DistributionConfig": Object {
          "CacheBehaviors": Array [
            Object {
              "CachePolicyId": "658327ea-f89d-4fab-a63d-7e88639e58f6",
              "Compress": true,
              "PathPattern": "/static/*",
              "TargetOriginId": "BLEACloudfrontBLEACloudFrontDistributionOrigin2864E1A25",
              "ViewerProtocolPolicy": "redirect-to-https",
            },
          ],
          "CustomErrorResponses": Array [
            Object {
              "ErrorCachingMinTTL": 20,
              "ErrorCode": 403,
              "ResponseCode": 403,
              "ResponsePagePath": "/static/sorry.html",
            },
          ],
          "DefaultCacheBehavior": Object {
            "AllowedMethods": Array [
              "GET",
              "HEAD",
              "OPTIONS",
              "PUT",
              "PATCH",
              "POST",
              "DELETE",
            ],
            "CachePolicyId": "4135ea2d-6df8-44a3-9df3-4b5a84be39ad",
            "Compress": true,
            "OriginRequestPolicyId": "216adef6-5c7f-47e4-b989-5492eafa07d3",
            "TargetOriginId": "BLEACloudfrontBLEACloudFrontDistributionOrigin1810A6CAB",
            "ViewerProtocolPolicy": "redirect-to-https",
          },
          "DefaultRootObject": "/",
          "Enabled": true,
          "HttpVersion": "http2",
          "IPV6Enabled": true,
          "Logging": Object {
            "Bucket": Object {
              "Fn::GetAtt": Array [
                "BLEACloudFrontCloudFrontLogBucket1A873AB4",
                "RegionalDomainName",
              ],
            },
            "IncludeCookies": true,
            "Prefix": "CloudFrontAccessLogs/",
          },
          "Origins": Array [
            Object {
              "CustomOriginConfig": Object {
                "OriginProtocolPolicy": "http-only",
                "OriginSSLProtocols": Array [
                  "TLSv1.2",
                ],
              },
              "DomainName": Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontendBgAlbBg7D4F4A31DNSNameEF586E40",
              },
              "Id": "BLEACloudfrontBLEACloudFrontDistributionOrigin1810A6CAB",
              "OriginCustomHeaders": Array [
                Object {
                  "HeaderName": "x-pre-shared-key",
                  "HeaderValue": "cc56a81d",
                },
              ],
            },
            Object {
              "DomainName": Object {
                "Fn::GetAtt": Array [
                  "BLEACloudFrontWebBucket2B4B298C",
                  "RegionalDomainName",
                ],
              },
              "Id": "BLEACloudfrontBLEACloudFrontDistributionOrigin2864E1A25",
              "S3OriginConfig": Object {
                "OriginAccessIdentity": Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      "origin-access-identity/cloudfront/",
                      Object {
                        "Ref": "BLEACloudFrontDistributionOrigin2S3Origin1B3C6A92",
                      },
                    ],
                  ],
                },
              },
            },
          ],
          "WebACLId": Object {
            "Fn::GetAtt": Array [
              "ExportsReader8B249524",
              "/cdk/exports/BLEA-Cloudfront/BLEAWafuseast1FnGetAttBLEAWafWebAcl3291C551Arn3119F950",
            ],
          },
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::CloudFront::Distribution",
    },
    "BLEACloudFrontDistributionOrigin2S3Origin1B3C6A92": Object {
      "Properties": Object {
        "CloudFrontOriginAccessIdentityConfig": Object {
          "Comment": "Identity for BLEACloudfrontBLEACloudFrontDistributionOrigin2864E1A25",
        },
      },
      "Type": "AWS::CloudFront::CloudFrontOriginAccessIdentity",
    },
    "BLEACloudFrontWebBucket2B4B298C": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "AccessControl": "Private",
        "BucketEncryption": Object {
          "ServerSideEncryptionConfiguration": Array [
            Object {
              "ServerSideEncryptionByDefault": Object {
                "SSEAlgorithm": "AES256",
              },
            },
          ],
        },
        "PublicAccessBlockConfiguration": Object {
          "BlockPublicAcls": true,
          "BlockPublicPolicy": true,
          "IgnorePublicAcls": true,
          "RestrictPublicBuckets": true,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VersioningConfiguration": Object {
          "Status": "Enabled",
        },
      },
      "Type": "AWS::S3::Bucket",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEACloudFrontWebBucketPolicyECD17DD6": Object {
      "Properties": Object {
        "Bucket": Object {
          "Ref": "BLEACloudFrontWebBucket2B4B298C",
        },
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "s3:*",
              "Condition": Object {
                "Bool": Object {
                  "aws:SecureTransport": "false",
                },
              },
              "Effect": "Deny",
              "Principal": Object {
                "AWS": "*",
              },
              "Resource": Array [
                Object {
                  "Fn::GetAtt": Array [
                    "BLEACloudFrontWebBucket2B4B298C",
                    "Arn",
                  ],
                },
                Object {
                  "Fn::Join": Array [
                    "",
                    Array [
                      Object {
                        "Fn::GetAtt": Array [
                          "BLEACloudFrontWebBucket2B4B298C",
                          "Arn",
                        ],
                      },
                      "/*",
                    ],
                  ],
                },
              ],
            },
            Object {
              "Action": "s3:GetObject",
              "Effect": "Allow",
              "Principal": Object {
                "CanonicalUser": Object {
                  "Fn::GetAtt": Array [
                    "BLEACloudFrontDistributionOrigin2S3Origin1B3C6A92",
                    "S3CanonicalUserId",
                  ],
                },
              },
              "Resource": Object {
                "Fn::Join": Array [
                  "",
                  Array [
                    Object {
                      "Fn::GetAtt": Array [
                        "BLEACloudFrontWebBucket2B4B298C",
                        "Arn",
                      ],
                    },
                    "/*",
                  ],
                ],
              },
            },
          ],
          "Version": "2012-10-17",
        },
      },
      "Type": "AWS::S3::BucketPolicy",
    },
    "CustomCrossRegionExportReaderCustomResourceProviderHandler46647B68": Object {
      "DependsOn": Array [
        "CustomCrossRegionExportReaderCustomResourceProviderRole10531BBD",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": "cdk-hnb659fds-assets-410364260571-ap-northeast-1",
          "S3Key": "e72e707870c336971ab7edc78222966e07384ecaa2af26b78e930ecdd37fc088.zip",
        },
        "Handler": "__entrypoint__.handler",
        "MemorySize": 128,
        "Role": Object {
          "Fn::GetAtt": Array [
            "CustomCrossRegionExportReaderCustomResourceProviderRole10531BBD",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Timeout": 900,
      },
      "Type": "AWS::Lambda::Function",
    },
    "CustomCrossRegionExportReaderCustomResourceProviderRole10531BBD": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Sub": "arn:\${AWS::Partition}:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
          },
        ],
        "Policies": Array [
          Object {
            "PolicyDocument": Object {
              "Statement": Array [
                Object {
                  "Action": Array [
                    "ssm:AddTagsToResource",
                    "ssm:RemoveTagsFromResource",
                    "ssm:GetParameters",
                  ],
                  "Effect": "Allow",
                  "Resource": Object {
                    "Fn::Join": Array [
                      "",
                      Array [
                        "arn:",
                        Object {
                          "Ref": "AWS::Partition",
                        },
                        ":ssm:ap-northeast-1:410364260571:parameter/cdk/exports/BLEA-Cloudfront/*",
                      ],
                    ],
                  },
                },
              ],
              "Version": "2012-10-17",
            },
            "PolicyName": "Inline",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "ExportsReader8B249524": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "ReaderProps": Object {
          "imports": Object {
            "/cdk/exports/BLEA-Cloudfront/BLEAWafuseast1FnGetAttBLEAWafWebAcl3291C551Arn3119F950": "{{resolve:ssm:/cdk/exports/BLEA-Cloudfront/BLEAWafuseast1FnGetAttBLEAWafWebAcl3291C551Arn3119F950}}",
          },
          "prefix": "BLEA-Cloudfront",
          "region": "ap-northeast-1",
        },
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "CustomCrossRegionExportReaderCustomResourceProviderHandler46647B68",
            "Arn",
          ],
        },
      },
      "Type": "Custom::CrossRegionExportReader",
      "UpdateReplacePolicy": "Delete",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`BLEA Guest Stacks GuestAccount ECS App Stacks 8`] = `
Object {
  "Outputs": Object {
    "ExportsOutputRefAurora2CBAB212533F1A7B": Object {
      "Export": Object {
        "Name": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
      },
      "Value": Object {
        "Ref": "Aurora2CBAB212",
      },
    },
  },
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "Aurora2CBAB212": Object {
      "DeletionPolicy": "Snapshot",
      "Properties": Object {
        "CopyTagsToSnapshot": true,
        "DBClusterParameterGroupName": Object {
          "Ref": "AuroraClusterParameterGroup22D979D8",
        },
        "DBSubnetGroupName": Object {
          "Ref": "AuroraSubnetsC4DF45C9",
        },
        "DatabaseName": "mydbname",
        "EnableCloudwatchLogsExports": Array [
          "postgresql",
        ],
        "Engine": "aurora-postgresql",
        "EngineVersion": "15.4",
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputFnGetAttBLEAAppKey3972867FArn205C8289",
        },
        "MasterUserPassword": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{{resolve:secretsmanager:",
              Object {
                "Ref": "BLEADBAuroraSecret0717DFE13fdaad7efa858a3daf9490cf0a702aeb",
              },
              ":SecretString:password::}}",
            ],
          ],
        },
        "MasterUsername": "dbUser",
        "Port": 5432,
        "StorageEncrypted": true,
        "Tags": Array [
          Object {
            "Key": "AWSBackup",
            "Value": "True",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcSecurityGroupIds": Array [
          Object {
            "Fn::GetAtt": Array [
              "AuroraSecurityGroup3440C66D",
              "GroupId",
            ],
          },
        ],
      },
      "Type": "AWS::RDS::DBCluster",
      "UpdateReplacePolicy": "Snapshot",
    },
    "AuroraCPUUtil2EEE6630": Object {
      "Properties": Object {
        "ActionsEnabled": true,
        "AlarmActions": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
          },
        ],
        "ComparisonOperator": "GreaterThanOrEqualToThreshold",
        "DatapointsToAlarm": 3,
        "Dimensions": Array [
          Object {
            "Name": "DBClusterIdentifier",
            "Value": Object {
              "Ref": "Aurora2CBAB212",
            },
          },
        ],
        "EvaluationPeriods": 3,
        "MetricName": "CPUUtilization",
        "Namespace": "AWS/RDS",
        "Period": 60,
        "Statistic": "Average",
        "Threshold": 90,
      },
      "Type": "AWS::CloudWatch::Alarm",
    },
    "AuroraClusterParameterGroup22D979D8": Object {
      "Properties": Object {
        "Description": "Aurora-ClusterParameterGroup",
        "Family": "aurora-postgresql15",
        "Parameters": Object {
          "client_encoding": "UTF8",
          "timezone": "Asia/Tokyo",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::RDS::DBClusterParameterGroup",
    },
    "AuroraInstanceParameterGroup79EAC8A3": Object {
      "Properties": Object {
        "Description": "Aurora-InstanceParameterGroup",
        "Family": "aurora-postgresql15",
        "Parameters": Object {
          "auto_explain.log_min_duration": "5000",
          "auto_explain.log_verbose": "1",
          "idle_in_transaction_session_timeout": "7200000",
          "log_connections": "1",
          "log_disconnections": "1",
          "log_lock_waits": "1",
          "log_min_duration_statement": "5000",
          "log_rotation_age": "1440",
          "log_rotation_size": "102400",
          "log_statement": "ddl",
          "random_page_cost": "1",
          "rds.log_retention_period": "10080",
          "search_path": "\\"$user\\",public",
          "shared_preload_libraries": "auto_explain,pg_stat_statements,pg_hint_plan,pgaudit",
          "statement_timeout": "7200000",
          "track_activity_query_size": "16384",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::RDS::DBParameterGroup",
    },
    "AuroraLogRetentionpostgresqlBFB2AD06": Object {
      "Properties": Object {
        "LogGroupName": Object {
          "Fn::Join": Array [
            "",
            Array [
              "/aws/rds/cluster/",
              Object {
                "Ref": "Aurora2CBAB212",
              },
              "/postgresql",
            ],
          ],
        },
        "RetentionInDays": 90,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A",
            "Arn",
          ],
        },
      },
      "Type": "Custom::LogRetention",
    },
    "AuroraSecretAttachmentEAAB0558": Object {
      "Properties": Object {
        "SecretId": Object {
          "Ref": "BLEADBAuroraSecret0717DFE13fdaad7efa858a3daf9490cf0a702aeb",
        },
        "TargetId": Object {
          "Ref": "Aurora2CBAB212",
        },
        "TargetType": "AWS::RDS::DBCluster",
      },
      "Type": "AWS::SecretsManager::SecretTargetAttachment",
    },
    "AuroraSecurityGroup3440C66D": Object {
      "Properties": Object {
        "GroupDescription": "RDS security group",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "AWSBackup",
            "Value": "True",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "AuroraSecurityGroupfromBLEAECSBLEAECSAppBLEAEcsBackendBackAppEcsResourcesSg7885E274IndirectPortF7A37F9B": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEAEcsBackendBackAppEcsResourcesSg7885E274:{IndirectPort}",
        "FromPort": Object {
          "Fn::GetAtt": Array [
            "Aurora2CBAB212",
            "Endpoint.Port",
          ],
        },
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "AuroraSecurityGroup3440C66D",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAEcsBackendBackAppEcsResourcesSgBF741673GroupId0FB8EEE6",
        },
        "ToPort": Object {
          "Fn::GetAtt": Array [
            "Aurora2CBAB212",
            "Endpoint.Port",
          ],
        },
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
    "AuroraSubnetsC4DF45C9": Object {
      "Properties": Object {
        "DBSubnetGroupDescription": "Subnets for Aurora database",
        "SubnetIds": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet1SubnetCCF23E7394FF610E",
          },
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet2SubnetC330AB5133437650",
          },
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet3Subnet27FB7E261FAB8480",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "AWSBackup",
            "Value": "True",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::RDS::DBSubnetGroup",
    },
    "Aurorareader1C7647A85": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "CACertificateIdentifier": "rds-ca-rsa4096-g1",
        "DBClusterIdentifier": Object {
          "Ref": "Aurora2CBAB212",
        },
        "DBInstanceClass": "db.t3.medium",
        "DBParameterGroupName": Object {
          "Ref": "AuroraInstanceParameterGroup79EAC8A3",
        },
        "EnablePerformanceInsights": false,
        "Engine": "aurora-postgresql",
        "PromotionTier": 2,
        "PubliclyAccessible": false,
        "Tags": Array [
          Object {
            "Key": "AWSBackup",
            "Value": "True",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::RDS::DBInstance",
      "UpdateReplacePolicy": "Delete",
    },
    "AurorawriterDC5BC759": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "CACertificateIdentifier": "rds-ca-rsa4096-g1",
        "DBClusterIdentifier": Object {
          "Ref": "Aurora2CBAB212",
        },
        "DBInstanceClass": "db.t3.medium",
        "DBParameterGroupName": Object {
          "Ref": "AuroraInstanceParameterGroup79EAC8A3",
        },
        "EnablePerformanceInsights": false,
        "Engine": "aurora-postgresql",
        "PromotionTier": 0,
        "PubliclyAccessible": false,
        "Tags": Array [
          Object {
            "Key": "AWSBackup",
            "Value": "True",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::RDS::DBInstance",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEADBAuroraSecret0717DFE13fdaad7efa858a3daf9490cf0a702aeb": Object {
      "DeletionPolicy": "Delete",
      "Properties": Object {
        "Description": Object {
          "Fn::Join": Array [
            "",
            Array [
              "Generated by the CDK for stack: ",
              Object {
                "Ref": "AWS::StackName",
              },
            ],
          ],
        },
        "GenerateSecretString": Object {
          "ExcludeCharacters": " %+~\`#$&*()|[]{}:;<>?!'/@\\"\\\\",
          "GenerateStringKey": "password",
          "PasswordLength": 30,
          "SecretStringTemplate": "{\\"username\\":\\"dbUser\\"}",
        },
        "Tags": Array [
          Object {
            "Key": "AWSBackup",
            "Value": "True",
          },
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::SecretsManager::Secret",
      "UpdateReplacePolicy": "Delete",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aFD4BFC8A": Object {
      "DependsOn": Array [
        "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
        "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": "cdk-hnb659fds-assets-410364260571-ap-northeast-1",
          "S3Key": "4e26bf2d0a26f2097fb2b261f22bb51e3f6b4b52635777b1e54edbd8e2d58c35.zip",
        },
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "Timeout": 900,
      },
      "Type": "AWS::Lambda::Function",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": Array [
                "logs:PutRetentionPolicy",
                "logs:DeleteRetentionPolicy",
              ],
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB",
        "Roles": Array [
          Object {
            "Ref": "LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "RdsEventsCluster": Object {
      "Properties": Object {
        "Enabled": true,
        "EventCategories": Array [
          "failure",
          "failover",
          "maintenance",
        ],
        "SnsTopicArn": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
        },
        "SourceType": "db-cluster",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::RDS::EventSubscription",
    },
    "RdsEventsInstances": Object {
      "Properties": Object {
        "Enabled": true,
        "EventCategories": Array [
          "availability",
          "configuration change",
          "deletion",
          "failover",
          "failure",
          "maintenance",
          "notification",
          "recovery",
        ],
        "SnsTopicArn": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
        },
        "SourceType": "db-instance",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::RDS::EventSubscription",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`BLEA Guest Stacks GuestAccount ECS App Stacks 9`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "BLEADashboard3A0FEBCD": Object {
      "Properties": Object {
        "DashboardBody": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"widgets\\":[{\\"type\\":\\"text\\",\\"width\\":24,\\"height\\":1,\\"x\\":0,\\"y\\":0,\\"properties\\":{\\"markdown\\":\\"# Requests\\"}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":0,\\"y\\":1,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"CloudFront Requests\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/CloudFront\\",\\"Requests\\",\\"DistributionId\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-Cloudfront:ExportsOutputRefBLEACloudFrontDistributionEFC3B20D5F11808A",
              },
              "\\",\\"Region\\",\\"Global\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"region\\":\\"us-east-1\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":6,\\"y\\":1,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ALB Requests\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ApplicationELB\\",\\"RequestCount\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}],[\\"AWS/ApplicationELB\\",\\"NewConnectionCount\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}],[\\"AWS/ApplicationELB\\",\\"RejectedConnectionCount\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":12,\\"y\\":1,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Target Group Requests\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ApplicationELB\\",\\"HTTPCode_Target_2XX_Count\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":18,\\"y\\":1,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Aurora Connections\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/RDS\\",\\"DatabaseConnections\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"Writer: \${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}],[\\"AWS/RDS\\",\\"DatabaseConnections\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"READER\\",{\\"label\\":\\"Reader: \${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}]],\\"yAxis\\":{}}},{\\"type\\":\\"text\\",\\"width\\":24,\\"height\\":1,\\"x\\":0,\\"y\\":7,\\"properties\\":{\\"markdown\\":\\"# Response Time\\"}},{\\"type\\":\\"metric\\",\\"width\\":8,\\"height\\":6,\\"x\\":0,\\"y\\":8,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Target Group Response Time\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ApplicationELB\\",\\"TargetResponseTime\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":8,\\"height\\":6,\\"x\\":8,\\"y\\":8,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Aurora Operation Lantency (Writer)\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/RDS\\",\\"InsertLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"AWS/RDS\\",\\"SelectLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"AWS/RDS\\",\\"UpdateLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"AWS/RDS\\",\\"CommitLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"AWS/RDS\\",\\"DDLLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"AWS/RDS\\",\\"DeleteLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"AWS/RDS\\",\\"DMLLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"AWS/RDS\\",\\"ReadLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}],[\\"AWS/RDS\\",\\"WriteLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":8,\\"height\\":6,\\"x\\":16,\\"y\\":8,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Aurora Operation Lantency (Reader)\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/RDS\\",\\"SelectLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"READER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"AWS/RDS\\",\\"ReadLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"READER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}],[\\"AWS/RDS\\",\\"WriteLatency\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"READER\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}]],\\"yAxis\\":{}}},{\\"type\\":\\"text\\",\\"width\\":24,\\"height\\":1,\\"x\\":0,\\"y\\":14,\\"properties\\":{\\"markdown\\":\\"# Errors\\"}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":0,\\"y\\":15,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"CloudFront Error Rates\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":true,\\"metrics\\":[[\\"AWS/CloudFront\\",\\"5xxErrorRate\\",\\"DistributionId\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-Cloudfront:ExportsOutputRefBLEACloudFrontDistributionEFC3B20D5F11808A",
              },
              "\\",\\"Region\\",\\"Global\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"region\\":\\"us-east-1\\",\\"period\\":60}],[\\"AWS/CloudFront\\",\\"4xxErrorRate\\",\\"DistributionId\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-Cloudfront:ExportsOutputRefBLEACloudFrontDistributionEFC3B20D5F11808A",
              },
              "\\",\\"Region\\",\\"Global\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"region\\":\\"us-east-1\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":6,\\"y\\":15,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ALB Errors\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ApplicationELB\\",\\"ClientTLSNegotiationErrorCount\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}],[\\"AWS/ApplicationELB\\",\\"HTTPCode_ELB_5XX_Count\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}],[\\"AWS/ApplicationELB\\",\\"HTTPCode_ELB_4XX_Count\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":12,\\"y\\":15,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Target Group Errors\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":true,\\"metrics\\":[[\\"AWS/ApplicationELB\\",\\"HTTPCode_Target_5XX_Count\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}],[\\"AWS/ApplicationELB\\",\\"HTTPCode_Target_4XX_Count\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}],[\\"AWS/ApplicationELB\\",\\"TargetConnectionErrorCount\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}],[\\"AWS/ApplicationELB\\",\\"TargetTLSNegotiationErrorCount\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":18,\\"y\\":15,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Aurora CPU Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/RDS\\",\\"CPUUtilization\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"Writer: \${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"AWS/RDS\\",\\"CPUUtilization\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"READER\\",{\\"label\\":\\"Reader: \${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":0,\\"y\\":21,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Aurora Free Memory\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/RDS\\",\\"FreeableMemory\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"Writer: \${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"AWS/RDS\\",\\"FreeableMemory\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"READER\\",{\\"label\\":\\"Reader: \${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":6,\\"y\\":21,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Aurora Free Local Storage\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/RDS\\",\\"FreeLocalStorage\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"WRITER\\",{\\"label\\":\\"Writer: \${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"AWS/RDS\\",\\"FreeLocalStorage\\",\\"DBClusterIdentifier\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-DBAurora:ExportsOutputRefAurora2CBAB212533F1A7B",
              },
              "\\",\\"Role\\",\\"READER\\",{\\"label\\":\\"Reader: \${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"text\\",\\"width\\":24,\\"height\\":1,\\"x\\":0,\\"y\\":27,\\"properties\\":{\\"markdown\\":\\"# Resources\\"}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":0,\\"y\\":28,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS CPU Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"CPUUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":6,\\"y\\":28,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Memory Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"MemoryUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":12,\\"y\\":28,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Desired Task Count\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"ECS/ContainerInsights\\",\\"DesiredTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":18,\\"y\\":28,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Task Count\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":true,\\"metrics\\":[[\\"ECS/ContainerInsights\\",\\"RunningTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"ECS/ContainerInsights\\",\\"PendingTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":12,\\"height\\":6,\\"x\\":0,\\"y\\":34,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Auto Scaling with Requests per tasks\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ApplicationELB\\",\\"RequestCountPerTarget\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",\\"TargetGroup\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsAppTGTargetGroupBA6D36C2TargetGroupNameDAC7366B",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}],[\\"ECS/ContainerInsights\\",\\"RunningTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}],[\\"ECS/ContainerInsights\\",\\"PendingTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}]],\\"annotations\\":{\\"horizontal\\":[{\\"value\\":50,\\"label\\":\\"Threshold: Requests per tasks\\",\\"color\\":\\"#aec7e8\\",\\"fill\\":\\"below\\",\\"yAxis\\":\\"left\\"}]},\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":12,\\"height\\":6,\\"x\\":12,\\"y\\":34,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Auto Scaling with CPU Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"CPUUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"ECS/ContainerInsights\\",\\"RunningTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}],[\\"ECS/ContainerInsights\\",\\"PendingTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}]],\\"annotations\\":{\\"horizontal\\":[{\\"value\\":10000,\\"label\\":\\"Threshold: CPU Utilization\\",\\"color\\":\\"#aec7e8\\",\\"fill\\":\\"below\\",\\"yAxis\\":\\"left\\"}]},\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":0,\\"y\\":40,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Alarm for UnHealthy Host in Target Group\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"annotations\\":{\\"alarms\\":[\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsAppTGAlbTgUnHealthyHostCountC0EB54E5ArnBA9D40C8",
              },
              "\\"]},\\"yAxis\\":{}}},{\\"type\\":\\"text\\",\\"width\\":24,\\"height\\":1,\\"x\\":0,\\"y\\":46,\\"properties\\":{\\"markdown\\":\\"# Resources\\"}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":0,\\"y\\":47,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS CPU Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"CPUUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":6,\\"y\\":47,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Memory Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"MemoryUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":12,\\"y\\":47,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Desired Task Count\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"ECS/ContainerInsights\\",\\"DesiredTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":18,\\"y\\":47,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Task Count\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":true,\\"metrics\\":[[\\"ECS/ContainerInsights\\",\\"RunningTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"ECS/ContainerInsights\\",\\"PendingTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":12,\\"height\\":6,\\"x\\":0,\\"y\\":53,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Auto Scaling with Requests per tasks\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ApplicationELB\\",\\"RequestCountPerTarget\\",\\"LoadBalancer\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlb426FC84FLoadBalancerFullNameC44A1F15",
              },
              "\\",\\"TargetGroup\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsApp2TGTargetGroupC64D4162TargetGroupName0F72D580",
              },
              "\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"stat\\":\\"Sum\\"}],[\\"ECS/ContainerInsights\\",\\"RunningTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}],[\\"ECS/ContainerInsights\\",\\"PendingTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}]],\\"annotations\\":{\\"horizontal\\":[{\\"value\\":50,\\"label\\":\\"Threshold: Requests per tasks\\",\\"color\\":\\"#aec7e8\\",\\"fill\\":\\"below\\",\\"yAxis\\":\\"left\\"}]},\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":12,\\"height\\":6,\\"x\\":12,\\"y\\":53,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Auto Scaling with CPU Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"CPUUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"ECS/ContainerInsights\\",\\"RunningTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}],[\\"ECS/ContainerInsights\\",\\"PendingTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}]],\\"annotations\\":{\\"horizontal\\":[{\\"value\\":10000,\\"label\\":\\"Threshold: CPU Utilization\\",\\"color\\":\\"#aec7e8\\",\\"fill\\":\\"below\\",\\"yAxis\\":\\"left\\"}]},\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":0,\\"y\\":59,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"Alarm for UnHealthy Host in Target Group\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"annotations\\":{\\"alarms\\":[\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAFrontAlbEcsApp2TGAlbTgUnHealthyHostCountFF6C5217Arn25279973",
              },
              "\\"]},\\"yAxis\\":{}}},{\\"type\\":\\"text\\",\\"width\\":24,\\"height\\":1,\\"x\\":0,\\"y\\":65,\\"properties\\":{\\"markdown\\":\\"# Resources\\"}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":0,\\"y\\":66,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS CPU Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"CPUUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":6,\\"y\\":66,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Memory Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"MemoryUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":12,\\"y\\":66,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Desired Task Count\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"ECS/ContainerInsights\\",\\"DesiredTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":18,\\"y\\":66,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Task Count\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":true,\\"metrics\\":[[\\"ECS/ContainerInsights\\",\\"RunningTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"ECS/ContainerInsights\\",\\"PendingTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":12,\\"height\\":6,\\"x\\":0,\\"y\\":72,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Auto Scaling with CPU Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"CPUUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"ECS/ContainerInsights\\",\\"RunningTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}],[\\"ECS/ContainerInsights\\",\\"PendingTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}]],\\"annotations\\":{\\"horizontal\\":[{\\"value\\":10000,\\"label\\":\\"Threshold: CPU Utilization\\",\\"color\\":\\"#aec7e8\\",\\"fill\\":\\"below\\",\\"yAxis\\":\\"left\\"}]},\\"yAxis\\":{}}},{\\"type\\":\\"text\\",\\"width\\":24,\\"height\\":1,\\"x\\":0,\\"y\\":78,\\"properties\\":{\\"markdown\\":\\"# Resources\\"}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":0,\\"y\\":79,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS CPU Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"CPUUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":6,\\"y\\":79,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Memory Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"MemoryUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":12,\\"y\\":79,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Desired Task Count\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"ECS/ContainerInsights\\",\\"DesiredTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":6,\\"height\\":6,\\"x\\":18,\\"y\\":79,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Task Count\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":true,\\"metrics\\":[[\\"ECS/ContainerInsights\\",\\"RunningTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"ECS/ContainerInsights\\",\\"PendingTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}]],\\"yAxis\\":{}}},{\\"type\\":\\"metric\\",\\"width\\":12,\\"height\\":6,\\"x\\":0,\\"y\\":85,\\"properties\\":{\\"view\\":\\"timeSeries\\",\\"title\\":\\"ECS Auto Scaling with CPU Utilization\\",\\"region\\":\\"",
              Object {
                "Ref": "AWS::Region",
              },
              "\\",\\"stacked\\":false,\\"metrics\\":[[\\"AWS/ECS\\",\\"CPUUtilization\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsApp2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60}],[\\"ECS/ContainerInsights\\",\\"RunningTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}],[\\"ECS/ContainerInsights\\",\\"PendingTaskCount\\",\\"ClusterName\\",\\"",
              Object {
                "Fn::ImportValue": "BLEA-ECS:ExportsOutputRefBLEAECSAppBLEAECSCommonClusterF98358090B634101",
              },
              "\\",\\"ServiceName\\",\\"BLEA-EcsBackend2-Service\\",{\\"label\\":\\"\${PROP('MetricName')} /\${PROP('Period')}sec\\",\\"period\\":60,\\"yAxis\\":\\"right\\"}]],\\"annotations\\":{\\"horizontal\\":[{\\"value\\":10000,\\"label\\":\\"Threshold: CPU Utilization\\",\\"color\\":\\"#aec7e8\\",\\"fill\\":\\"below\\",\\"yAxis\\":\\"left\\"}]},\\"yAxis\\":{}}}]}",
            ],
          ],
        },
        "DashboardName": "BLEA-ECSApp",
      },
      "Type": "AWS::CloudWatch::Dashboard",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`BLEA Guest Stacks GuestAccount ECS App Stacks 10`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "AWS679f53fac002430cb0da5b7982bd22872D164C4C": Object {
      "DependsOn": Array [
        "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
      ],
      "Properties": Object {
        "Code": Object {
          "S3Bucket": "cdk-hnb659fds-assets-410364260571-ap-northeast-1",
          "S3Key": "17c16a3854838fd3ff4bda08146122a6701f33b9c86ae17f415ad0dc47a97544.zip",
        },
        "Handler": "index.handler",
        "Role": Object {
          "Fn::GetAtt": Array [
            "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
            "Arn",
          ],
        },
        "Runtime": "nodejs18.x",
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "Timeout": 120,
      },
      "Type": "AWS::Lambda::Function",
    },
    "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2": Object {
      "Properties": Object {
        "AssumeRolePolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "sts:AssumeRole",
              "Effect": "Allow",
              "Principal": Object {
                "Service": "lambda.amazonaws.com",
              },
            },
          ],
          "Version": "2012-10-17",
        },
        "ManagedPolicyArns": Array [
          Object {
            "Fn::Join": Array [
              "",
              Array [
                "arn:",
                Object {
                  "Ref": "AWS::Partition",
                },
                ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole",
              ],
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::IAM::Role",
    },
    "BLEAOpenSearchOpenSearchAppLogsEC995CAD": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "RetentionInDays": 30,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAOpenSearchOpenSearchB4BF591E": Object {
      "DeletionPolicy": "Retain",
      "DependsOn": Array [
        "BLEAOpenSearchOpenSearchESLogGroupPolicyc86adaf0bdcd4a2b69f36f806886de0ad5a44abf6cCustomResourcePolicy65E64705",
        "BLEAOpenSearchOpenSearchESLogGroupPolicyc86adaf0bdcd4a2b69f36f806886de0ad5a44abf6c95D6C2FB",
      ],
      "Properties": Object {
        "ClusterConfig": Object {
          "DedicatedMasterCount": 3,
          "DedicatedMasterEnabled": true,
          "DedicatedMasterType": "t3.medium.search",
          "InstanceCount": 3,
          "InstanceType": "t3.medium.search",
          "ZoneAwarenessConfig": Object {
            "AvailabilityZoneCount": 3,
          },
          "ZoneAwarenessEnabled": true,
        },
        "DomainEndpointOptions": Object {
          "EnforceHTTPS": true,
          "TLSSecurityPolicy": "Policy-Min-TLS-1-2-2019-07",
        },
        "EBSOptions": Object {
          "EBSEnabled": true,
          "Iops": 5000,
          "VolumeSize": 20,
          "VolumeType": "gp3",
        },
        "EncryptionAtRestOptions": Object {
          "Enabled": true,
        },
        "EngineVersion": "OpenSearch_1.3",
        "LogPublishingOptions": Object {
          "ES_APPLICATION_LOGS": Object {
            "CloudWatchLogsLogGroupArn": Object {
              "Fn::GetAtt": Array [
                "BLEAOpenSearchOpenSearchAppLogsEC995CAD",
                "Arn",
              ],
            },
            "Enabled": true,
          },
          "INDEX_SLOW_LOGS": Object {
            "CloudWatchLogsLogGroupArn": Object {
              "Fn::GetAtt": Array [
                "BLEAOpenSearchOpenSearchSlowIndexLogsD3593E39",
                "Arn",
              ],
            },
            "Enabled": true,
          },
          "SEARCH_SLOW_LOGS": Object {
            "CloudWatchLogsLogGroupArn": Object {
              "Fn::GetAtt": Array [
                "BLEAOpenSearchOpenSearchSlowSearchLogs515443EA",
                "Arn",
              ],
            },
            "Enabled": true,
          },
        },
        "NodeToNodeEncryptionOptions": Object {
          "Enabled": false,
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VPCOptions": Object {
          "SecurityGroupIds": Array [
            Object {
              "Fn::GetAtt": Array [
                "domainsgB1E855AB",
                "GroupId",
              ],
            },
          ],
          "SubnetIds": Array [
            Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet1SubnetCCF23E7394FF610E",
            },
            Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet2SubnetC330AB5133437650",
            },
            Object {
              "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet3Subnet27FB7E261FAB8480",
            },
          ],
        },
      },
      "Type": "AWS::OpenSearchService::Domain",
      "UpdatePolicy": Object {
        "EnableVersionUpgrade": true,
      },
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAOpenSearchOpenSearchESLogGroupPolicyc86adaf0bdcd4a2b69f36f806886de0ad5a44abf6c95D6C2FB": Object {
      "DeletionPolicy": "Delete",
      "DependsOn": Array [
        "BLEAOpenSearchOpenSearchESLogGroupPolicyc86adaf0bdcd4a2b69f36f806886de0ad5a44abf6cCustomResourcePolicy65E64705",
      ],
      "Properties": Object {
        "Create": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"CloudWatchLogs\\",\\"action\\":\\"putResourcePolicy\\",\\"parameters\\":{\\"policyName\\":\\"ESLogPolicyc86adaf0bdcd4a2b69f36f806886de0ad5a44abf6c\\",\\"policyDocument\\":\\"{\\\\\\"Statement\\\\\\":[{\\\\\\"Action\\\\\\":[\\\\\\"logs:PutLogEvents\\\\\\",\\\\\\"logs:CreateLogStream\\\\\\"],\\\\\\"Effect\\\\\\":\\\\\\"Allow\\\\\\",\\\\\\"Principal\\\\\\":{\\\\\\"Service\\\\\\":\\\\\\"es.amazonaws.com\\\\\\"},\\\\\\"Resource\\\\\\":[\\\\\\"",
              Object {
                "Fn::GetAtt": Array [
                  "BLEAOpenSearchOpenSearchSlowSearchLogs515443EA",
                  "Arn",
                ],
              },
              "\\\\\\",\\\\\\"",
              Object {
                "Fn::GetAtt": Array [
                  "BLEAOpenSearchOpenSearchSlowIndexLogsD3593E39",
                  "Arn",
                ],
              },
              "\\\\\\",\\\\\\"",
              Object {
                "Fn::GetAtt": Array [
                  "BLEAOpenSearchOpenSearchAppLogsEC995CAD",
                  "Arn",
                ],
              },
              "\\\\\\"]}],\\\\\\"Version\\\\\\":\\\\\\"2012-10-17\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"ESLogGroupPolicyc86adaf0bdcd4a2b69f36f806886de0ad5a44abf6c\\"}}",
            ],
          ],
        },
        "Delete": "{\\"service\\":\\"CloudWatchLogs\\",\\"action\\":\\"deleteResourcePolicy\\",\\"parameters\\":{\\"policyName\\":\\"ESLogPolicyc86adaf0bdcd4a2b69f36f806886de0ad5a44abf6c\\"},\\"ignoreErrorCodesMatching\\":\\"ResourceNotFoundException\\"}",
        "InstallLatestAwsSdk": true,
        "ServiceToken": Object {
          "Fn::GetAtt": Array [
            "AWS679f53fac002430cb0da5b7982bd22872D164C4C",
            "Arn",
          ],
        },
        "Update": Object {
          "Fn::Join": Array [
            "",
            Array [
              "{\\"service\\":\\"CloudWatchLogs\\",\\"action\\":\\"putResourcePolicy\\",\\"parameters\\":{\\"policyName\\":\\"ESLogPolicyc86adaf0bdcd4a2b69f36f806886de0ad5a44abf6c\\",\\"policyDocument\\":\\"{\\\\\\"Statement\\\\\\":[{\\\\\\"Action\\\\\\":[\\\\\\"logs:PutLogEvents\\\\\\",\\\\\\"logs:CreateLogStream\\\\\\"],\\\\\\"Effect\\\\\\":\\\\\\"Allow\\\\\\",\\\\\\"Principal\\\\\\":{\\\\\\"Service\\\\\\":\\\\\\"es.amazonaws.com\\\\\\"},\\\\\\"Resource\\\\\\":[\\\\\\"",
              Object {
                "Fn::GetAtt": Array [
                  "BLEAOpenSearchOpenSearchSlowSearchLogs515443EA",
                  "Arn",
                ],
              },
              "\\\\\\",\\\\\\"",
              Object {
                "Fn::GetAtt": Array [
                  "BLEAOpenSearchOpenSearchSlowIndexLogsD3593E39",
                  "Arn",
                ],
              },
              "\\\\\\",\\\\\\"",
              Object {
                "Fn::GetAtt": Array [
                  "BLEAOpenSearchOpenSearchAppLogsEC995CAD",
                  "Arn",
                ],
              },
              "\\\\\\"]}],\\\\\\"Version\\\\\\":\\\\\\"2012-10-17\\\\\\"}\\"},\\"physicalResourceId\\":{\\"id\\":\\"ESLogGroupPolicyc86adaf0bdcd4a2b69f36f806886de0ad5a44abf6c\\"}}",
            ],
          ],
        },
      },
      "Type": "Custom::CloudwatchLogResourcePolicy",
      "UpdateReplacePolicy": "Delete",
    },
    "BLEAOpenSearchOpenSearchESLogGroupPolicyc86adaf0bdcd4a2b69f36f806886de0ad5a44abf6cCustomResourcePolicy65E64705": Object {
      "Properties": Object {
        "PolicyDocument": Object {
          "Statement": Array [
            Object {
              "Action": "logs:PutResourcePolicy",
              "Effect": "Allow",
              "Resource": "*",
            },
            Object {
              "Action": "logs:DeleteResourcePolicy",
              "Effect": "Allow",
              "Resource": "*",
            },
          ],
          "Version": "2012-10-17",
        },
        "PolicyName": "BLEAOpenSearchOpenSearchESLogGroupPolicyc86adaf0bdcd4a2b69f36f806886de0ad5a44abf6cCustomResourcePolicy65E64705",
        "Roles": Array [
          Object {
            "Ref": "AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2",
          },
        ],
      },
      "Type": "AWS::IAM::Policy",
    },
    "BLEAOpenSearchOpenSearchSlowIndexLogsD3593E39": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "RetentionInDays": 30,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "BLEAOpenSearchOpenSearchSlowSearchLogs515443EA": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "RetentionInDays": 30,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "domainsgB1E855AB": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-OpenSearch/domainsg",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "domainsgfromBLEAECSBLEAECSAppBLEAEcsBackendBackAppEcsResourcesSg7885E2744431CA1D287": Object {
      "Properties": Object {
        "Description": "from BLEAECSBLEAECSAppBLEAEcsBackendBackAppEcsResourcesSg7885E274:443",
        "FromPort": 443,
        "GroupId": Object {
          "Fn::GetAtt": Array [
            "domainsgB1E855AB",
            "GroupId",
          ],
        },
        "IpProtocol": "tcp",
        "SourceSecurityGroupId": Object {
          "Fn::ImportValue": "BLEA-ECS:ExportsOutputFnGetAttBLEAECSAppBLEAEcsBackendBackAppEcsResourcesSgBF741673GroupId0FB8EEE6",
        },
        "ToPort": 443,
      },
      "Type": "AWS::EC2::SecurityGroupIngress",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;

exports[`BLEA Guest Stacks GuestAccount ECS App Stacks 11`] = `
Object {
  "Parameters": Object {
    "BootstrapVersion": Object {
      "Default": "/cdk-bootstrap/hnb659fds/version",
      "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]",
      "Type": "AWS::SSM::Parameter::Value<String>",
    },
  },
  "Resources": Object {
    "ElastiCacheRedis": Object {
      "DependsOn": Array [
        "ElastiCacheRedisSubnetGroup",
      ],
      "Properties": Object {
        "AtRestEncryptionEnabled": true,
        "AutomaticFailoverEnabled": true,
        "CacheNodeType": "cache.t3.small",
        "CacheParameterGroupName": Object {
          "Ref": "ElastiCacheRedisCustomParameterGroup",
        },
        "CacheSubnetGroupName": "BLEA-ElastiCacheRedis-Subnetgroup",
        "Engine": "redis",
        "EngineVersion": "6.2",
        "KmsKeyId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAppKey3972867FF6F5067F",
        },
        "LogDeliveryConfigurations": Array [
          Object {
            "DestinationDetails": Object {
              "CloudWatchLogsDetails": Object {
                "LogGroup": Object {
                  "Ref": "ElastiCacheRedisLoggroupFB0C3E33",
                },
              },
            },
            "DestinationType": "cloudwatch-logs",
            "LogFormat": "json",
            "LogType": "slow-log",
          },
        ],
        "MultiAZEnabled": true,
        "NotificationTopicArn": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAAlarmSNSTopic7CA8AFCFC993B138",
        },
        "NumNodeGroups": 3,
        "ReplicasPerNodeGroup": 2,
        "ReplicationGroupDescription": "redis",
        "ReplicationGroupId": "BLEA-ElastiCacheRedis-repGroup",
        "SecurityGroupIds": Array [
          Object {
            "Fn::GetAtt": Array [
              "ElastiCacheRedisSecuritygGroup20195709",
              "GroupId",
            ],
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "TransitEncryptionEnabled": true,
      },
      "Type": "AWS::ElastiCache::ReplicationGroup",
      "UpdatePolicy": Object {
        "UseOnlineResharding": true,
      },
    },
    "ElastiCacheRedisCustomParameterGroup": Object {
      "Properties": Object {
        "CacheParameterGroupFamily": "redis6.x",
        "Description": "CustomParameterGroupForRedis",
        "Properties": Object {
          "cluster-enabled": "yes",
        },
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::ElastiCache::ParameterGroup",
    },
    "ElastiCacheRedisLoggroupFB0C3E33": Object {
      "DeletionPolicy": "Retain",
      "Properties": Object {
        "RetentionInDays": 90,
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::Logs::LogGroup",
      "UpdateReplacePolicy": "Retain",
    },
    "ElastiCacheRedisSecret": Object {
      "Properties": Object {
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::SecretsManager::Secret",
    },
    "ElastiCacheRedisSecuritygGroup20195709": Object {
      "Properties": Object {
        "GroupDescription": "BLEA-ElastiCacheRedis/ElastiCacheRedisSecuritygGroup",
        "SecurityGroupEgress": Array [
          Object {
            "CidrIp": "0.0.0.0/0",
            "Description": "Allow all outbound traffic by default",
            "IpProtocol": "-1",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
        "VpcId": Object {
          "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpc6BF639B16F5B81D1",
        },
      },
      "Type": "AWS::EC2::SecurityGroup",
    },
    "ElastiCacheRedisSubnetGroup": Object {
      "Properties": Object {
        "CacheSubnetGroupName": "BLEA-ElastiCacheRedis-Subnetgroup",
        "Description": "for redis",
        "SubnetIds": Array [
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet1SubnetCCF23E7394FF610E",
          },
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet2SubnetC330AB5133437650",
          },
          Object {
            "Fn::ImportValue": "BLEA-ShareResources:ExportsOutputRefBLEAVpcProtectedSubnet3Subnet27FB7E261FAB8480",
          },
        ],
        "Tags": Array [
          Object {
            "Key": "Environment",
            "Value": "dev",
          },
        ],
      },
      "Type": "AWS::ElastiCache::SubnetGroup",
    },
  },
  "Rules": Object {
    "CheckBootstrapVersion": Object {
      "Assertions": Array [
        Object {
          "Assert": Object {
            "Fn::Not": Array [
              Object {
                "Fn::Contains": Array [
                  Array [
                    "1",
                    "2",
                    "3",
                    "4",
                    "5",
                  ],
                  Object {
                    "Ref": "BootstrapVersion",
                  },
                ],
              },
            ],
          },
          "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI.",
        },
      ],
    },
  },
}
`;
